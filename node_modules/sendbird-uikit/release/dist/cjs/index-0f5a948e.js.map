{"version":3,"file":"index-0f5a948e.js","sources":["../../../src/lib/UserProfileContext.jsx","../../../src/utils/index.ts","../../../src/ui/IconButton/index.jsx","../../../src/hooks/useModal/ModalRoot/index.jsx","../../../src/ui/Button/type.js","../../../src/ui/Button/utils.js","../../../src/ui/Button/index.jsx","../../../src/ui/Modal/index.jsx","../../../src/utils/color.js","../../../src/ui/TextButton/index.jsx","../../../src/lib/pubSub/topics.js","../../../src/lib/selectors.js","../../../src/ui/UserProfile/index.tsx","../../../src/ui/ContextMenu/items/MenuItems.jsx","../../../src/ui/SortByRow/index.jsx","../../../src/ui/ContextMenu/items/EmojiListItems.jsx","../../../src/ui/ContextMenu/index.jsx"],"sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\n\n/**\n * user profile goes deep inside the component tree\n * use this context as a short circuit to send in values\n */\nconst UserProfileContext = React.createContext({\n  disableUserProfile: true,\n  isOpenChannel: false,\n  renderUserProfile: null,\n});\n\nconst UserProfileProvider = (props) => {\n  const { children, className } = props;\n  return (\n    <UserProfileContext.Provider value={props}>\n      <div className={className}>\n        {children}\n      </div>\n    </UserProfileContext.Provider>\n  );\n};\n\nUserProfileProvider.propTypes = {\n  children: PropTypes.oneOfType([\n    PropTypes.element,\n    PropTypes.arrayOf(PropTypes.element),\n    PropTypes.any,\n  ]).isRequired,\n  // eslint-disable-next-line react/no-unused-prop-types\n  isOpenChannel: PropTypes.bool,\n  // eslint-disable-next-line react/no-unused-prop-types\n  disableUserProfile: PropTypes.bool,\n  // eslint-disable-next-line react/no-unused-prop-types\n  renderUserProfile: PropTypes.func,\n  className: PropTypes.string,\n};\n\nUserProfileProvider.defaultProps = {\n  className: null,\n  isOpenChannel: false,\n  disableUserProfile: false,\n  renderUserProfile: null,\n};\n\nexport { UserProfileContext, UserProfileProvider };\n","import format from 'date-fns/format';\nimport { AdminMessage, Emoji, EmojiCategory, EmojiContainer, FileMessage, GroupChannel, GroupChannelListQuery, Member, MessageListParams, OpenChannel, Reaction, SendBirdInstance, User, UserMessage } from \"sendbird\";\n\n// https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Complete_list_of_MIME_types\nconst SUPPORTED_MIMES = {\n  IMAGE: [\n    'image/jpeg',\n    'image/jpg',\n    'image/png',\n    'image/gif',\n    'image/svg+xml',\n    'image/webp', // not supported in IE\n  ],\n  VIDEO: [\n    'video/mpeg',\n    'video/ogg',\n    'video/webm',\n    'video/mp4',\n  ],\n  AUDIO: [\n    'audio/aac',\n    'audio/midi',\n    'audio/x-midi',\n    'audio/mpeg',\n    'audio/ogg',\n    'audio/opus',\n    'audio/wav',\n    'audio/webm',\n    'audio/3gpp',\n    'audio/3gpp2',\n    'audio/mp3',\n  ],\n};\n\nexport interface UIKitMessageTypes {\n  ADMIN: \"ADMIN\",\n  TEXT: \"TEXT\",\n  FILE: \"FILE\",\n  THUMBNAIL: \"THUMBNAIL\",\n  OG: \"OG\",\n  UNKNOWN: \"UNKNOWN\",\n}\nconst UIKitMessageTypes: UIKitMessageTypes = {\n  ADMIN: \"ADMIN\",\n  TEXT: \"TEXT\",\n  FILE: \"FILE\",\n  THUMBNAIL: \"THUMBNAIL\",\n  OG: \"OG\",\n  UNKNOWN: \"UNKNOWN\",\n};\nexport interface UIKitFileTypes {\n  IMAGE: \"IMAGE\",\n  AUDIO: \"AUDIO\",\n  VIDEO: \"VIDEO\",\n  GIF: \"GIF\",\n  OTHERS: \"OTHERS\",\n}\nexport const UIKitFileTypes: UIKitFileTypes = {\n  IMAGE: \"IMAGE\",\n  AUDIO: \"AUDIO\",\n  VIDEO: \"VIDEO\",\n  GIF: \"GIF\",\n  OTHERS: \"OTHERS\",\n};\n\nexport interface SendingMessageStatus {\n  NONE: 'none',\n  SUCCEEDED: 'succeeded',\n  FAILED: 'failed',\n  PENDING: 'pending',\n}\nconst SendingMessageStatus: SendingMessageStatus = {\n  NONE: 'none',\n  SUCCEEDED: 'succeeded',\n  FAILED: 'failed',\n  PENDING: 'pending',\n};\n\nexport interface OutgoingMessageStates {\n  NONE: 'NONE',\n  PENDING: 'PENDING',\n  SENT: 'SENT',\n  FAILED: 'FAILED',\n  DELIVERED: 'DELIVERED',\n  READ: 'READ',\n  // delivered and read are only in group channel\n}\nconst OutgoingMessageStates: OutgoingMessageStates = {\n  NONE: 'NONE',\n  PENDING: 'PENDING',\n  SENT: 'SENT',\n  FAILED: 'FAILED',\n  DELIVERED: 'DELIVERED',\n  READ: 'READ',\n};\n\nexport type CoreMessageType = AdminMessage | UserMessage | FileMessage;\n\nexport const isImage = (type: string): boolean => SUPPORTED_MIMES.IMAGE.indexOf(type) >= 0;\nexport const isVideo = (type: string): boolean => SUPPORTED_MIMES.VIDEO.indexOf(type) >= 0;\nexport const isGif = (type: string): boolean => type === 'image/gif';\nexport const isSupportedFileView = (type: string): boolean => isImage(type) || isVideo(type);\nexport const isAudio = (type: string): boolean => SUPPORTED_MIMES.AUDIO.indexOf(type) >= 0;\n\nexport const getUIKitFileTypes = (): UIKitFileTypes => ({ ...UIKitFileTypes });\nexport const getUIKitFileType = (type: string): string => {\n  if (isGif(type)) return UIKitFileTypes.GIF;\n  if (isImage(type)) return UIKitFileTypes.IMAGE;\n  if (isVideo(type)) return UIKitFileTypes.VIDEO;\n  if (isAudio(type)) return UIKitFileTypes.AUDIO;\n  return UIKitFileTypes.OTHERS;\n};\nexport const getOutgoingMessageStates = (): OutgoingMessageStates => ({ ...OutgoingMessageStates });\nexport const getOutgoingMessageState = (channel: GroupChannel | OpenChannel, message: UserMessage | FileMessage): string => {\n  if (message.sendingStatus === 'pending') return OutgoingMessageStates.PENDING;\n  if (message.sendingStatus === 'failed') return OutgoingMessageStates.FAILED;\n  if (channel?.isGroupChannel?.()) {\n    /* GroupChannel only */\n    if ((channel as GroupChannel).getUnreadMemberCount(message) === 0) {\n      return OutgoingMessageStates.READ;\n    } else if ((channel as GroupChannel).getUndeliveredMemberCount(message) === 0) {\n      return OutgoingMessageStates.DELIVERED;\n    }\n  }\n  if (message.sendingStatus === 'succeeded') return OutgoingMessageStates.SENT;\n  return OutgoingMessageStates.NONE;\n};\nexport const isSentMessage = (channel: GroupChannel | OpenChannel, message: UserMessage | FileMessage): boolean => (\n  getOutgoingMessageState(channel, message) === OutgoingMessageStates.SENT\n  || getOutgoingMessageState(channel, message) === OutgoingMessageStates.DELIVERED\n  || getOutgoingMessageState(channel, message) === OutgoingMessageStates.READ\n);\nexport const isDeliveredMessage = (channel: GroupChannel, message: UserMessage | FileMessage): boolean => (\n  getOutgoingMessageState(channel, message) === OutgoingMessageStates.DELIVERED\n  || getOutgoingMessageState(channel, message) === OutgoingMessageStates.READ\n);\nexport const isReadMessage = (channel: GroupChannel, message: UserMessage | FileMessage): boolean => (\n  getOutgoingMessageState(channel, message) === OutgoingMessageStates.READ\n);\n// TODO: Remove channel from the params, it seems unnecessary\nexport const isFailedMessage = (channel: GroupChannel | OpenChannel, message: UserMessage | FileMessage): boolean => (\n  getOutgoingMessageState(channel, message) === OutgoingMessageStates.FAILED\n);\nexport const isPendingMessage = (channel: GroupChannel | OpenChannel, message: UserMessage | FileMessage): boolean => (\n  getOutgoingMessageState(channel, message) === OutgoingMessageStates.PENDING\n);\nexport const isSentStatus = (state: string): boolean => (\n  state === OutgoingMessageStates.SENT\n  || state === OutgoingMessageStates.DELIVERED\n  || state === OutgoingMessageStates.READ\n);\n\nexport const isAdminMessage = (message: AdminMessage): boolean => (\n  message && (message.isAdminMessage?.() || (message['messageType'] && message.messageType === 'admin'))\n);\nexport const isUserMessage = (message: UserMessage): boolean => (\n  message && (message.isUserMessage?.() || (message['messageType'] && message.messageType === 'user'))\n);\nexport const isFileMessage = (message: FileMessage): boolean => (\n  message && (message.isFileMessage?.() || (message['messageType'] && message.messageType === 'file'))\n);\n\nexport const isOGMessage = (message: UserMessage): boolean => !!(\n  message && isUserMessage(message) && message?.ogMetaData && message?.ogMetaData?.url\n);\nexport const isTextMessage = (message: UserMessage): boolean => isUserMessage(message) && !isOGMessage(message);\nexport const isThumbnailMessage = (message: FileMessage): boolean => message && isFileMessage(message) && isSupportedFileView(message.type);\nexport const isImageMessage = (message: FileMessage): boolean => message && isThumbnailMessage(message) && isImage(message.type);\nexport const isVideoMessage = (message: FileMessage): boolean => message && isThumbnailMessage(message) && isVideo(message.type);\nexport const isGifMessage = (message: FileMessage): boolean => message && isThumbnailMessage(message) && isGif(message.type);\nexport const isAudioMessage = (message: FileMessage): boolean => message && isFileMessage(message) && isAudio(message.type);\n\nexport const isEditedMessage = (message: UserMessage): boolean => isUserMessage(message) && (message?.updatedAt > 0);\nexport const isEnabledOGMessage = (message: UserMessage): boolean => (\n  (!message || !message.ogMetaData || !message.ogMetaData.url) ? false : true\n);\n\nexport const getUIKitMessageTypes = (): UIKitMessageTypes => ({ ...UIKitMessageTypes });\nexport const getUIKitMessageType = (message: CoreMessageType): string => {\n  if (isAdminMessage(message as AdminMessage)) return UIKitMessageTypes.ADMIN;\n  if (isUserMessage(message as UserMessage)) {\n    return isOGMessage(message as UserMessage) ? UIKitMessageTypes.OG : UIKitMessageTypes.TEXT;\n  }\n  if (isFileMessage(message as FileMessage)) {\n    return isThumbnailMessage(message as FileMessage) ? UIKitMessageTypes.THUMBNAIL : UIKitMessageTypes.FILE;\n  }\n  return UIKitMessageTypes.UNKNOWN;\n};\nexport const getSendingMessageStatus = (): SendingMessageStatus => ({ ...SendingMessageStatus });\n\nconst reducer = (accumulator: Array<string>, currentValue: string | Array<string>): Array<any> => {\n  if (Array.isArray(currentValue)) {\n    return [...accumulator, ...currentValue];\n  } else {\n    accumulator.push(currentValue);\n    return accumulator;\n  }\n};\nexport const getClassName = (classNames: string | Array<string | Array<string>>): string => (\n  Array.isArray(classNames)\n    ? classNames.reduce(reducer, []).join(' ')\n    : classNames\n);\nexport const isReactedBy = (userId: string, reaction: Reaction): boolean => (\n  reaction.userIds.some((reactorUserId: string): boolean => reactorUserId === userId)\n);\ninterface StringSet {\n  TOOLTIP__YOU: string;\n  TOOLTIP__AND_YOU: string;\n  TOOLTIP__UNKNOWN_USER: string;\n}\nexport const getEmojiTooltipString = (reaction: Reaction, userId: string, memberNicknamesMap: Map<string, string>, stringSet: StringSet): string => {\n  let you = '';\n  if (isReactedBy(userId, reaction)) {\n    you = reaction.userIds.length === 1 ? stringSet.TOOLTIP__YOU : stringSet.TOOLTIP__AND_YOU;\n  }\n  return (`${reaction.userIds\n    .filter((reactorUserId: string) => reactorUserId !== userId)\n    .map((reactorUserId: string) => (memberNicknamesMap.get(reactorUserId) || stringSet.TOOLTIP__UNKNOWN_USER))\n    .join(', ')}${you}`);\n};\n\n// TODO: Use the interface after language tranlsatation of Sendbird.js\ninterface UIKitStore {\n  stores: {\n    sdkStore: {\n      sdk: SendBirdInstance,\n    },\n    userStore: {\n      user: User,\n    },\n  },\n  config: {\n    useReaction: boolean,\n  }\n}\nexport const getCurrentUserId = (store: UIKitStore): string => (store?.stores?.userStore?.user?.userId);\nexport const getUseReaction = (store: UIKitStore, channel: GroupChannel | OpenChannel): boolean => {\n  if (!store?.config?.useReaction)\n    return false;\n  if (!store?.stores?.sdkStore?.sdk?.appInfo?.isUsingReaction)\n    return false;\n  if (channel?.isGroupChannel())\n    return !((channel as GroupChannel).isBroadcast || (channel as GroupChannel).isSuper);\n  return store?.config?.useReaction;\n};\n\nexport const isMessageSentByMe = (userId: string, message: UserMessage | FileMessage): boolean => (\n  (userId && message?.sender?.userId) && userId === message.sender.userId\n);\n\nconst URL_REG = /[-a-zA-Z0-9@:%._+~#=]{1,256}\\.[a-zA-Z0-9()]{1,6}\\b([-a-zA-Z0-9()@:%_+.~#?&//=]*)/;\nexport const isUrl = (text: string): boolean => URL_REG.test(text);\n\nexport const truncateString = (fullStr: string, strLen?: number): string => {\n  if (!strLen) strLen = 40;\n  if (fullStr === null || fullStr === undefined) return '';\n  if (fullStr.length <= strLen) return fullStr;\n  const separator = '...';\n  const sepLen = separator.length;\n  const charsToShow = strLen - sepLen;\n  const frontChars = Math.ceil(charsToShow / 2);\n  const backChars = Math.floor(charsToShow / 2);\n  return fullStr.substr(0, frontChars) + separator + fullStr.substr(fullStr.length - backChars);\n};\n\nexport const copyToClipboard = (text: string): boolean => {\n  // @ts-ignore: Unreachable code error\n  if (window.clipboardData && window.clipboardData.setData) {\n    // Internet Explorer-specific code path to prevent textarea being shown while dialog is visible.\n    // @ts-ignore: Unreachable code error\n    return window.clipboardData.setData('Text', text);\n  }\n  if (document.queryCommandSupported && document.queryCommandSupported('copy')) {\n    const textarea = document.createElement('textarea');\n    textarea.textContent = text;\n    textarea.style.position = 'fixed'; // Prevent scrolling to bottom of page in Microsoft Edge.\n    document.body.appendChild(textarea);\n    textarea.select();\n    try {\n      return document.execCommand('copy'); // Security exception may be thrown by some browsers.\n    } catch (ex) {\n      return false;\n    } finally {\n      document.body.removeChild(textarea);\n    }\n  }\n  return false;\n};\n\nexport const getEmojiListAll = (emojiContainer: EmojiContainer): Array<Emoji> => (\n  emojiContainer?.emojiCategories?.map((emojiCategory: EmojiCategory) => emojiCategory.emojis)\n    .reduce((prevArr: Array<Emoji>, currArr: Array<Emoji>) => prevArr.concat(currArr), [])\n);\nexport const getEmojiMapAll = (emojiContainer: EmojiContainer): Map<string, Emoji> => {\n  const emojiMap = new Map();\n  emojiContainer?.emojiCategories?.forEach((category: EmojiCategory) => {\n    category?.emojis?.forEach((emoji: Emoji): void => {\n      if (emoji && emoji.key) {\n        emojiMap.set(emoji.key, emoji);\n      }\n    });\n  });\n  return emojiMap;\n};\n\nexport const getUserName = (user: User): string => (user?.friendName || user?.nickname || user?.userId);\nexport const getSenderName = (message: UserMessage | FileMessage): string => (message.sender && getUserName(message.sender));\nexport const getMessageCreatedAt = (message: UserMessage | FileMessage): string => format(message.createdAt || 0, 'p');\n\nexport const hasSameMembers = <T>(a: T[], b: T[]): boolean => {\n  if (a === b) {\n    return true;\n  }\n  if (a == null || b == null) {\n    return false;\n  }\n  if (a.length !== b.length) {\n    return false;\n  }\n\n  const sortedA = [...a].sort();\n  const sortedB = [...b].sort();\n\n  for (let i = 0; i < sortedA.length; ++i) {\n    if (sortedA[i] !== sortedB[i]) {\n      return false;\n    }\n  }\n  return true;\n}\nexport const isFriend = (user: User): boolean => !!(user.friendDiscoveryKey || user.friendName);\n\nexport const filterMessageListParams = (params: MessageListParams, message: UserMessage | FileMessage): boolean => {\n  if (params?.messageType && params.messageType !== message.messageType) {\n    return false;\n  }\n  if (params?.customTypes?.length > 0) {\n    const customTypes = params.customTypes.filter((item) => item !== '*');\n    // Because Chat SDK inserts '*' when customTypes is empty\n    if (customTypes.length > 0 && !customTypes.includes(message.customType)) {\n      return false;\n    }\n  }\n  if (params?.senderUserIds && params?.senderUserIds?.length > 0) {\n    if (message?.isUserMessage() || message.isFileMessage()) {\n      const messageSender = (message as UserMessage | FileMessage).sender || message['_sender'];\n      if (!params?.senderUserIds?.includes(messageSender?.userId)) {\n        return false;\n      }\n    } else {\n      return false;\n    }\n  }\n  if (!params?.includeParentMessageInfo && (message?.parentMessageId || message?.parentMessage)) {\n    return false;\n  }\n  return true;\n};\n\ninterface SDKChannelListParamsPrivateProps extends GroupChannelListQuery {\n  _searchFilter: {\n    search_query: string,\n    search_fields: Array<'member_nickname' | 'channel_name'>,\n  };\n  _userIdsFilter: {\n    userIds: Array<string>,\n    includeMode: boolean,\n    queryType: 'AND' | 'OR',\n  };\n}\nexport const filterChannelListParams = (params: SDKChannelListParamsPrivateProps, channel: GroupChannel, currentUserId: string): boolean => {\n  if (!params?.includeEmpty && channel?.lastMessage && channel.lastMessage === null) {\n    return false;\n  }\n  if (params?._searchFilter?.search_query && params._searchFilter.search_fields?.length > 0) {\n    const searchFilter = params._searchFilter;\n    const searchQuery = searchFilter.search_query;\n    const searchFields = searchFilter.search_fields;\n    if (searchQuery && searchFields && searchFields.length > 0) {\n      if (!searchFields.some((searchField) => {\n        switch (searchField) {\n          case 'channel_name': {\n            return channel.name.toLowerCase().includes(searchQuery.toLowerCase());\n          }\n          case 'member_nickname': {\n            return channel.members.some((member: Member) => member.nickname.toLowerCase().includes(searchQuery.toLowerCase()));\n          }\n          default: {\n            return true;\n          }\n        }\n      })) {\n        return false;\n      }\n    }\n  }\n  if (params?._userIdsFilter?.userIds?.length > 0) {\n    const userIdsFilter = params._userIdsFilter;\n    const { includeMode, queryType } = userIdsFilter;\n    const userIds: string[] = userIdsFilter.userIds;\n    const memberIds = channel.members.map((member: Member) => member.userId);\n    if (!includeMode) { // exact match\n      if (!userIds.includes(currentUserId)) {\n        userIds.push(currentUserId); // add the caller's userId if not added already.\n      }\n      if (channel.members.length > userIds.length) {\n        return false; // userIds may contain one or more non-member(s).\n      }\n      if (!hasSameMembers(userIds, memberIds)) {\n        return false;\n      }\n    } else if (userIds.length > 0) { // inclusive\n      switch (queryType) {\n        case 'AND': {\n          if (userIds.some((userId: string) => !memberIds.includes(userId))) {\n            return false;\n          }\n          break;\n        }\n        case 'OR': {\n          if (userIds.every((userId: string) => !memberIds.includes(userId))) {\n            return false;\n          }\n          break;\n        }\n        default: {\n          break;\n        }\n      }\n    }\n  }\n  if (params?.includeEmpty === false && channel?.lastMessage === null) {\n    return false;\n  }\n  if (params?.includeFrozen === false && channel?.isFrozen === true) {\n    return false;\n  }\n  if (params?.customTypesFilter?.length > 0 && !params.customTypesFilter.includes(channel?.customType)) {\n    return false;\n  }\n  if (params?.customTypeStartsWithFilter && !new RegExp(`^${params.customTypeStartsWithFilter}`).test(channel?.customType)) {\n    return false;\n  }\n  if (params?.channelNameContainsFilter && !channel?.name?.toLowerCase().includes(params.channelNameContainsFilter.toLowerCase())) {\n    return false;\n  }\n  if (params?.nicknameContainsFilter) {\n    const lowerCasedSubString = params.nicknameContainsFilter.toLowerCase();\n    if (channel?.members?.every((member: Member) => !member.nickname.toLowerCase().includes(lowerCasedSubString))) {\n      return false;\n    }\n  }\n  if (params?.channelUrlsFilter?.length > 0 && !params.channelUrlsFilter.includes(channel?.url)) {\n    return false;\n  }\n  if (params?.memberStateFilter) {\n    switch (params.memberStateFilter) {\n      case 'joined_only':\n        if (channel?.myMemberState !== 'joined') {\n          return false;\n        }\n        break;\n      case 'invited_only':\n        if (channel?.myMemberState !== 'invited') {\n          return false;\n        }\n        break;\n      case 'invited_by_friend':\n        if (channel?.myMemberState !== 'invited' || !isFriend(channel.inviter)) {\n          return false;\n        }\n        break;\n      case 'invited_by_non_friend':\n        if (channel?.myMemberState !== 'invited' || isFriend(channel.inviter)) {\n          return false;\n        }\n        break;\n    }\n  }\n  if (params?.hiddenChannelFilter) {\n    switch (params.hiddenChannelFilter) {\n      case 'unhidden_only':\n        if (channel?.isHidden || channel?.hiddenState !== 'unhidden') {\n          return false;\n        }\n        break;\n      case 'hidden_only':\n        if (!channel?.isHidden) {\n          return false;\n        }\n        break;\n      case 'hidden_allow_auto_unhide':\n        if (!channel?.isHidden || channel?.hiddenState !== 'hidden_allow_auto_unhide') {\n          return false;\n        }\n        break;\n      case 'hidden_prevent_auto_unhide':\n        if (!channel?.isHidden || channel?.hiddenState !== 'hidden_prevent_auto_unhide') {\n          return false;\n        }\n        break;\n    }\n  }\n  if (params?.unreadChannelFilter) {\n    switch (params.unreadChannelFilter) {\n      case 'unread_message':\n        if (channel?.unreadMessageCount === 0) {\n          return false;\n        }\n        break;\n    }\n  }\n  if (params?.publicChannelFilter) {\n    switch (params.publicChannelFilter) {\n      case 'public':\n        if (!channel?.isPublic) {\n          return false;\n        }\n        break;\n      case 'private':\n        if (channel?.isPublic) {\n          return false;\n        }\n        break;\n    }\n  }\n  if (params?.superChannelFilter) {\n    switch (params.superChannelFilter) {\n      case 'super':\n        if (!channel?.isSuper) {\n          return false;\n        }\n        break;\n      case 'nonsuper':\n        if (channel?.isSuper) {\n          return false;\n        }\n        break;\n    }\n  }\n  return true;\n};\n\nexport const binarySearch = (list: Array<number>, number: number): number => {// [100, 99, 98, 97, ...]\n  const pivot = Math.floor(list.length / 2);\n  if (list[pivot] === number) {\n    return pivot;\n  }\n  const leftList = list.slice(0, pivot);\n  const rightList = list.slice(pivot + 1, list.length);\n  if (list[pivot] > number) {\n    return pivot + 1 + (rightList.length === 0 ? 0 : binarySearch(rightList, number));\n  } else {\n    return (leftList.length === 0) ? pivot : binarySearch(leftList, number);\n  }\n};\n// This is required when channel is displayed on channel list by filter\nexport const getChannelsWithUpsertedChannel = (channels: Array<GroupChannel>, channel: GroupChannel): Array<GroupChannel> => {\n  if (channels.some((ch: GroupChannel) => ch.url === channel.url)) {\n    return channels.map((ch: GroupChannel) => (ch.url === channel.url ? channel : ch));\n  }\n  const targetIndex = binarySearch(\n    channels.map((channel: GroupChannel) => channel?.lastMessage?.createdAt || channel?.createdAt),\n    channel?.lastMessage?.createdAt || channel?.createdAt\n  );\n  return [...channels.slice(0, targetIndex), channel, ...channels.slice(targetIndex, channels.length)];\n};\n","import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\n\nimport './index.scss';\n\nconst IconButton = React.forwardRef((props, ref) => {\n  const {\n    className,\n    children,\n    disabled,\n    width,\n    height,\n    type,\n    onClick,\n    onBlur,\n    style,\n  } = props;\n\n  const [pressed, setPressed] = useState('');\n\n  return (\n    // eslint-disable-next-line react/button-has-type\n    <button\n      className={[\n        ...(Array.isArray(className) ? className : [className]),\n        'sendbird-iconbutton',\n        pressed,\n      ].join(' ')}\n      disabled={disabled}\n      ref={ref}\n      type={type} // eslint-disable-line react/button-has-type\n      style={{\n        ...style,\n        height,\n        width,\n      }}\n      onClick={(e) => {\n        if (disabled) { return; }\n        setPressed('sendbird-iconbutton--pressed');\n        onClick(e);\n      }}\n      onBlur={(e) => {\n        setPressed('');\n        onBlur(e);\n      }}\n    >\n      <span className=\"sendbird-iconbutton__inner\">\n        {children}\n      </span>\n    </button>\n  );\n});\n\nIconButton.propTypes = {\n  className: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.arrayOf(PropTypes.string),\n  ]),\n  children: PropTypes.oneOfType([\n    PropTypes.element,\n    PropTypes.arrayOf(PropTypes.element),\n    PropTypes.any,\n  ]).isRequired,\n  disabled: PropTypes.bool,\n  width: PropTypes.string,\n  height: PropTypes.string,\n  type: PropTypes.string,\n  onClick: PropTypes.func,\n  onBlur: PropTypes.func,\n  style: PropTypes.shape({}),\n};\n\nIconButton.defaultProps = {\n  className: '',\n  disabled: false,\n  width: '56px',\n  height: '56px',\n  type: 'button',\n  onClick: () => { },\n  onBlur: () => { },\n  style: {},\n};\n\nexport default IconButton;\n","// simple component to be used as modal root\nimport React from 'react';\n\nexport const MODAL_ROOT = 'sendbird-modal-root';\n\nexport default () => (\n  <div id={MODAL_ROOT} />\n);\n","export const Type = {\n  PRIMARY: 'PRIMARY',\n  SECONDARY: 'SECONDARY',\n  DANGER: 'DANGER',\n  DISABLED: 'DISABLED',\n};\n\nexport const Size = {\n  BIG: 'BIG',\n  SMALL: 'SMALL',\n};\n","import { Type, Size } from './type';\n\nexport function changeTypeToClassName(type) {\n  switch (type) {\n    case Type.PRIMARY: return 'sendbird-button--primary';\n    case Type.SECONDARY: return 'sendbird-button--secondary';\n    case Type.DANGER: return 'sendbird-button--danger';\n    case Type.DISABLED: return 'sendbird-button--disabled';\n    default: return null;\n  }\n}\n\nexport function changeSizeToClassName(size) {\n  switch (size) {\n    case Size.BIG: return 'sendbird-button--big';\n    case Size.SMALL: return 'sendbird-button--small';\n    default: return null;\n  }\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport './index.scss';\nimport Label, { LabelTypography, LabelColors } from '../Label';\nimport { Type, Size } from './type';\nimport { changeTypeToClassName, changeSizeToClassName } from './utils';\n\nexport default function Button({\n  className,\n  type,\n  size,\n  children,\n  disabled,\n  onClick,\n}) {\n  const injectingClassNames = [\n    ...((Array.isArray(className)) ? className : [className]),\n    'sendbird-button',\n    (disabled ? 'sendbird-button__disabled' : ''),\n    changeTypeToClassName(type),\n    changeSizeToClassName(size),\n  ].join(' ');\n\n  return (\n    <button\n      className={injectingClassNames}\n      type=\"button\"\n      onClick={onClick}\n      disabled={disabled}\n    >\n      <Label\n        className=\"sendbird-button__text\"\n        type={LabelTypography.BUTTON_1}\n        color={LabelColors.ONCONTENT_1}\n      >\n        {children}\n      </Label>\n    </button>\n  );\n}\n\nexport const ButtonTypes = Type;\nexport const ButtonSizes = Size;\n\nButton.propTypes = {\n  className: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.arrayOf(PropTypes.string),\n  ]),\n  type: PropTypes.oneOf(Object.keys(Type)),\n  size: PropTypes.oneOf(Object.keys(Size)),\n  children: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.element,\n    PropTypes.arrayOf(PropTypes.element),\n  ]),\n  disabled: PropTypes.bool,\n  onClick: PropTypes.func,\n};\n\nButton.defaultProps = {\n  className: '',\n  type: Type.PRIMARY,\n  size: Size.BIG,\n  children: 'Button',\n  disabled: false,\n  onClick: () => { },\n};\n","import React, { useContext } from 'react';\nimport PropTypes from 'prop-types';\nimport { createPortal } from 'react-dom';\n\nimport './index.scss';\n\nimport { LocalizationContext } from '../../lib/LocalizationContext';\nimport { MODAL_ROOT } from '../../hooks/useModal/ModalRoot';\nimport IconButton from '../IconButton';\nimport Icon, { IconTypes, IconColors } from '../Icon';\nimport Button, { ButtonTypes } from '../Button';\nimport Label, { LabelTypography, LabelColors } from '../Label';\n\nexport const ModalHeader = ({ titleText }) => (\n  <div className=\"sendbird-modal__header\">\n    <Label type={LabelTypography.H_1} color={LabelColors.ONBACKGROUND_1}>\n      {titleText}\n    </Label>\n  </div>\n);\nModalHeader.propTypes = {\n  titleText: PropTypes.string.isRequired,\n};\n\nexport const ModalBody = ({ children }) => (\n  <div className=\"sendbird-modal__body\">{children}</div>\n);\nModalBody.propTypes = {\n  children: PropTypes.oneOfType([\n    PropTypes.element.isRequired,\n    PropTypes.arrayOf(PropTypes.element.isRequired),\n  ]),\n};\nModalBody.defaultProps = {\n  children: null,\n};\n\nexport const ModalFooter = ({\n  onSubmit,\n  onCancel,\n  disabled = false,\n  submitText,\n  type,\n}) => {\n  const { stringSet } = useContext(LocalizationContext);\n  return (\n    <div className=\"sendbird-modal__footer\">\n      <Button type={ButtonTypes.SECONDARY} onClick={onCancel}>\n        <Label type={LabelTypography.BUTTON_1} color={LabelColors.ONBACKGROUND_1}>\n          {stringSet.BUTTON__CANCEL}\n        </Label>\n      </Button>\n      <Button type={type} disabled={disabled} onClick={onSubmit}>\n        {submitText}\n      </Button>\n    </div>\n  );\n};\n\nModalFooter.propTypes = {\n  onCancel: PropTypes.func.isRequired,\n  onSubmit: PropTypes.func.isRequired,\n  submitText: PropTypes.string.isRequired,\n  disabled: PropTypes.bool,\n  type: PropTypes.string,\n};\nModalFooter.defaultProps = {\n  disabled: false,\n  type: ButtonTypes.DANGER,\n};\n\nexport default function Modal(props) {\n  const {\n    children,\n    onCancel,\n    onSubmit,\n    disabled,\n    submitText,\n    titleText,\n    hideFooter,\n    type,\n  } = props;\n  return createPortal((\n    <div className=\"sendbird-modal\">\n      <div className=\"sendbird-modal__content\">\n        <ModalHeader titleText={titleText} />\n        <ModalBody>{children}</ModalBody>\n        {\n          !hideFooter && (\n            <ModalFooter\n              disabled={disabled}\n              onCancel={onCancel}\n              onSubmit={onSubmit}\n              submitText={submitText}\n              type={type}\n            />\n          )\n        }\n        <div className=\"sendbird-modal__close\">\n          <IconButton\n            width=\"32px\"\n            height=\"32px\"\n            onClick={onCancel}\n          >\n            <Icon\n              type={IconTypes.CLOSE}\n              fillColor={IconColors.DEFAULT}\n              width=\"24px\"\n              height=\"24px\"\n            />\n          </IconButton>\n        </div>\n      </div>\n      <div className=\"sendbird-modal__backdrop\" />\n    </div>\n  ), document.getElementById(MODAL_ROOT));\n}\n\nModal.propTypes = {\n  children: PropTypes.oneOfType([\n    PropTypes.element,\n    PropTypes.arrayOf(PropTypes.element),\n  ]),\n  onCancel: PropTypes.func.isRequired,\n  onSubmit: PropTypes.func.isRequired,\n  hideFooter: PropTypes.bool,\n  disabled: PropTypes.bool,\n  type: PropTypes.string,\n};\nModal.defaultProps = {\n  children: null,\n  hideFooter: false,\n  disabled: false,\n  type: ButtonTypes.DANGER,\n};\n","import './color.scss';\n\nexport const Colors = {\n  ONBACKGROUND_1: 'ONBACKGROUND_1',\n  ONBACKGROUND_2: 'ONBACKGROUND_2',\n  ONBACKGROUND_3: 'ONBACKGROUND_3',\n  ONBACKGROUND_4: 'ONBACKGROUND_4',\n  ONCONTENT_1: 'ONCONTENT_1',\n  PRIMARY: 'PRIMARY',\n  ERROR: 'ERROR',\n};\n\nexport function changeColorToClassName(color) {\n  switch (color) {\n    case Colors.ONBACKGROUND_1: return 'sendbird-color--onbackground-1';\n    case Colors.ONBACKGROUND_2: return 'sendbird-color--onbackground-2';\n    case Colors.ONBACKGROUND_3: return 'sendbird-color--onbackground-3';\n    case Colors.ONBACKGROUND_4: return 'sendbird-color--onbackground-4';\n    case Colors.ONCONTENT_1: return 'sendbird-color--oncontent-1';\n    case Colors.PRIMARY: return 'sendbird-color--primary';\n    case Colors.ERROR: return 'sendbird-color--error';\n    default: return null;\n  }\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport './index.scss';\nimport { changeColorToClassName, Colors } from '../../utils/color';\n\nexport default function TextButton({\n  className,\n  color,\n  disabled,\n  notUnderline,\n  onClick,\n  children,\n}) {\n  return (\n    <div\n      className={[\n        ...(Array.isArray(className) ? className : [className]),\n        changeColorToClassName(color),\n        notUnderline ? 'sendbird-textbutton--not-underline' : 'sendbird-textbutton',\n        disabled ? 'sendbird-textbutton--disabled' : '',\n      ].join(' ')}\n      role=\"button\"\n      tabIndex={0}\n      onClick={onClick}\n      onKeyPress={onClick}\n    >\n      {children}\n    </div>\n  );\n}\n\nTextButton.propTypes = {\n  className: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.arrayOf(PropTypes.string),\n  ]),\n  color: PropTypes.string,\n  disabled: PropTypes.bool,\n  notUnderline: PropTypes.bool,\n  onClick: PropTypes.func,\n  children: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.element,\n  ]).isRequired,\n};\n\nTextButton.defaultProps = {\n  className: '',\n  color: Colors.ONBACKGROUND_1,\n  disabled: false,\n  notUnderline: false,\n  onClick: () => { },\n};\n","export const USER_UPDATED = 'USER_UPDATED';\nexport const SEND_MESSAGE_START = 'SEND_MESSAGE_START';\nexport const SEND_USER_MESSAGE = 'SEND_USER_MESSAGE';\nexport const SEND_FILE_MESSAGE = 'SEND_FILE_MESSAGE';\nexport const UPDATE_USER_MESSAGE = 'UPDATE_USER_MESSAGE';\nexport const DELETE_MESSAGE = 'DELETE_MESSAGE';\nexport const LEAVE_CHANNEL = 'LEAVE_CHANNEL';\nexport const CREATE_CHANNEL = 'CREATE_CHANNEL';\n","import * as topics from './pubSub/topics';\n\nexport const getSdk = (store) => {\n  const { stores = {} } = store;\n  const { sdkStore = {} } = stores;\n  const { sdk } = sdkStore;\n  return sdk;\n};\n\nexport const getPubSub = (store) => {\n  const { config = {} } = store;\n  const { pubSub } = config;\n  return pubSub;\n};\n\n// SendBird disconnect. Invalidates currentUser\n// eslint-disable-next-line max-len\nexport const getConnect = (store) => (userId, accessToken) => new Promise((resolve, reject) => {\n  const sdk = getSdk(store);\n  if (!sdk) {\n    reject(new Error('Sdk not found'));\n  }\n  if (!accessToken) {\n    sdk.connect(userId)\n      .then((res) => resolve(res))\n      .catch((err) => reject(err));\n  } else {\n    sdk.connect(userId, accessToken)\n      .then((res) => resolve(res))\n      .catch((err) => reject(err));\n  }\n});\n\n// SendBird disconnect. Invalidates currentUser\nexport const getDisconnect = (store) => () => new Promise((resolve, reject) => {\n  const sdk = getSdk(store);\n  if (!sdk) {\n    reject(new Error('Sdk not found'));\n  }\n  sdk.disconnect()\n    .then((res) => resolve(res))\n    .catch((err) => reject(err));\n});\n\n// Using the updateCurrentUserInfo() method\n// you can update a user's nickname and profile image with a URL\n// eslint-disable-next-line max-len\nexport const getUpdateUserInfo = (store) => (nickName, profileUrl) => new Promise((resolve, reject) => {\n  const sdk = getSdk(store);\n  if (!sdk) {\n    reject(new Error('Sdk not found'));\n  }\n  sdk.updateCurrentUserInfo(nickName, profileUrl)\n    .then((res) => resolve(res))\n    .catch((err) => reject(err));\n});\n\nexport const getSendUserMessage = (store) => (channelUrl, userMessageParams) => {\n  const sdk = getSdk(store);\n  const pubsub = getPubSub(store);\n  return new Promise((resolve, reject) => {\n    if (!sdk) {\n      reject(new Error('Sdk not found'));\n    }\n    sdk.GroupChannel.getChannel(channelUrl)\n      .then((channel) => {\n        const promisify = () => {\n          let pendingMsg = null;\n          const pendingPromise = new Promise((resolve_, reject_) => {\n            pendingMsg = channel.sendUserMessage(userMessageParams, (res, err) => {\n              const swapParams = sdk.getErrorFirstCallback();\n              let message = res;\n              let error = err;\n              if (swapParams) {\n                message = err;\n                error = res;\n              }\n              if (error) {\n                reject_(error);\n                return;\n              }\n              resolve_(message);\n              pubsub.publish(\n                topics.SEND_USER_MESSAGE,\n                {\n                  message,\n                  channel,\n                },\n              );\n            });\n            pubsub.publish(\n              topics.SEND_MESSAGE_START,\n              {\n                message: pendingMsg,\n                channel,\n              },\n            );\n          });\n          pendingPromise.get = () => pendingMsg;\n          return pendingPromise;\n        };\n        resolve(promisify());\n      })\n      .catch(reject);\n  });\n};\nexport const getSendFileMessage = (store) => (channelUrl, fileMessageParams) => {\n  const sdk = getSdk(store);\n  const pubsub = getPubSub(store);\n  return new Promise((resolve, reject) => {\n    if (!sdk) {\n      reject(new Error('Sdk not found'));\n    }\n    sdk.GroupChannel.getChannel(channelUrl)\n      .then((channel) => {\n        const promisify = () => {\n          let pendingMsg = null;\n          const pendingPromise = new Promise((resolve_, reject_) => {\n            pendingMsg = channel.sendFileMessage(fileMessageParams, (res, err) => {\n              const swapParams = sdk.getErrorFirstCallback();\n              let message = res;\n              let error = err;\n              if (swapParams) {\n                message = err;\n                error = res;\n              }\n\n              if (error) {\n                reject_(error);\n                return;\n              }\n              resolve_(message);\n              pubsub.publish(\n                topics.SEND_FILE_MESSAGE,\n                {\n                  message,\n                  channel,\n                },\n              );\n            });\n          });\n          if (fileMessageParams.file) {\n            // keep the file's local version in pendingMsg.localUrl\n            // because promise doesnt allow overriding of pendingMsg.url\n            // eslint-disable-next-line no-param-reassign\n            pendingMsg.localUrl = URL.createObjectURL(fileMessageParams.file);\n          }\n          if (fileMessageParams.fileUrl) {\n            // eslint-disable-next-line no-param-reassign\n            pendingMsg.localUrl = fileMessageParams.fileUrl;\n          }\n          // eslint-disable-next-line no-param-reassign\n          pendingMsg.requestState = 'pending';\n          pubsub.publish(\n            topics.SEND_MESSAGE_START,\n            {\n              message: pendingMsg,\n              channel,\n            },\n          );\n          pendingPromise.get = () => pendingMsg;\n          return pendingPromise;\n        };\n        resolve(promisify());\n      })\n      .catch(reject);\n  });\n};\nexport const getUpdateUserMessage = (store) => (channelUrl, messageId, params) => {\n  const sdk = getSdk(store);\n  const pubsub = getPubSub(store);\n  return new Promise((resolve, reject) => {\n    if (!sdk) {\n      reject(new Error('Sdk not found'));\n    }\n    sdk.GroupChannel.getChannel(channelUrl)\n      .then((channel) => {\n        channel.updateUserMessage(messageId, params, (res, err) => {\n          const swapParams = sdk.getErrorFirstCallback();\n          let message = res;\n          let error = err;\n          if (swapParams) {\n            message = err;\n            error = res;\n          }\n\n          if (error) {\n            reject(error);\n            return;\n          }\n          resolve(message);\n          pubsub.publish(\n            topics.UPDATE_USER_MESSAGE,\n            {\n              message,\n              channel,\n              // workaround for updating channelPreview on message-edit\n              // https://sendbird.atlassian.net/browse/UIKIT-268\n              fromSelector: true,\n            },\n          );\n        });\n      })\n      .catch(reject);\n  });\n};\nexport const getDeleteMessage = (store) => (channelUrl, message) => {\n  const sdk = getSdk(store);\n  const pubsub = getPubSub(store);\n  return new Promise((resolve, reject) => {\n    if (!sdk) {\n      reject(new Error('Sdk not found'));\n    }\n    sdk.GroupChannel.getChannel(channelUrl)\n      .then((channel) => {\n        const { messageId } = message;\n        channel.deleteMessage(message, (res, err) => {\n          const swapParams = sdk.getErrorFirstCallback();\n          let error = err;\n          if (swapParams) {\n            error = res;\n          }\n\n          if (error) {\n            reject(error);\n            return;\n          }\n          resolve(message);\n          pubsub.publish(\n            topics.DELETE_MESSAGE,\n            {\n              messageId,\n              channel,\n            },\n          );\n        });\n      })\n      .catch(reject);\n  });\n};\n\nexport const getResendUserMessage = (store) => (channelUrl, failedMessage) => {\n  const sdk = getSdk(store);\n  const pubsub = getPubSub(store);\n  return new Promise((resolve, reject) => {\n    if (!sdk) {\n      reject(new Error('Sdk not found'));\n    }\n    sdk.GroupChannel.getChannel(channelUrl)\n      .then((channel) => {\n        channel.resendUserMessage(failedMessage)\n          .then((message) => {\n            resolve(message);\n            pubsub.publish(\n              topics.SEND_USER_MESSAGE,\n              {\n                message,\n                channel,\n              },\n            );\n          })\n          .catch(reject);\n      })\n      .catch(reject);\n  });\n};\n\nexport const getResendFileMessage = (store) => (channelUrl, failedMessage) => {\n  const sdk = getSdk(store);\n  const pubsub = getPubSub(store);\n  return new Promise((resolve, reject) => {\n    if (!sdk) {\n      reject(new Error('Sdk not found'));\n    }\n    sdk.GroupChannel.getChannel(channelUrl)\n      .then((channel) => {\n        channel.resendFileMessage(failedMessage)\n          .then((message) => {\n            resolve(message);\n            pubsub.publish(\n              topics.SEND_FILE_MESSAGE,\n              {\n                message,\n                channel,\n              },\n            );\n          })\n          .catch(reject);\n      })\n      .catch(reject);\n  });\n};\n\nexport const getCreateChannel = (store) => (params) => {\n  const sdk = getSdk(store);\n  const pubsub = getPubSub(store);\n  return new Promise((resolve, reject) => {\n    if (!sdk) {\n      reject(new Error('Sdk not found'));\n    }\n    sdk.GroupChannel.createChannel(params)\n      .then((channel) => {\n        resolve(channel);\n        pubsub.publish(\n          topics.CREATE_CHANNEL,\n          {\n            channel,\n          },\n        );\n      })\n      .catch(reject);\n  });\n};\n\nexport const getLeaveChannel = (store) => (channelUrl) => {\n  const sdk = getSdk(store);\n  const pubsub = getPubSub(store);\n  return new Promise((resolve, reject) => {\n    if (!sdk) {\n      reject(new Error('Sdk not found'));\n    }\n    sdk.GroupChannel.getChannel(channelUrl)\n      .then((channel) => {\n        channel.leave()\n          .then(() => {\n            resolve(channel);\n            pubsub.publish(\n              topics.LEAVE_CHANNEL,\n              {\n                channel,\n              },\n            );\n          })\n          .catch(reject);\n      })\n      .catch(reject);\n  });\n};\n\nexport const getFreezeChannel = (store) => (channelUrl) => {\n  const sdk = getSdk(store);\n  return new Promise((resolve, reject) => {\n    if (!sdk) {\n      reject(new Error('Sdk not found'));\n    }\n    sdk.GroupChannel.getChannel(channelUrl)\n      .then((channel) => {\n        channel.freeze()\n          .then(() => {\n            // do not need pubsub here - event listener works\n            resolve(channel);\n          })\n          .catch(reject);\n      })\n      .catch(reject);\n  });\n};\n\nexport const getUnFreezeChannel = (store) => (channelUrl) => {\n  const sdk = getSdk(store);\n  return new Promise((resolve, reject) => {\n    if (!sdk) {\n      reject(new Error('Sdk not found'));\n    }\n    sdk.GroupChannel.getChannel(channelUrl)\n      .then((channel) => {\n        channel.unfreeze()\n          .then(() => {\n            // do not need pubsub here - event listener works\n            resolve(channel);\n          })\n          .catch(reject);\n      })\n      .catch(reject);\n  });\n};\n\nexport const getCreateOpenChannel = (store) => (params) => {\n  const sdk = getSdk(store);\n  return new Promise((resolve, reject) => {\n    if (!sdk) {\n      reject(new Error('Sdk not found'));\n    }\n    sdk.OpenChannel.createChannel(params)\n      .then((channel) => {\n        resolve(channel);\n      })\n      .catch(reject);\n  });\n};\nexport const enterOpenChannel = (store) => (channelUrl) => {\n  const sdk = getSdk(store);\n  return new Promise((resolve, reject) => {\n    if (!sdk) {\n      reject(new Error('Sdk not found'));\n    }\n    sdk.OpenChannel.getChannel(channelUrl, (openChannel, error) => {\n      if (error) {\n        reject(new Error(error));\n        return;\n      }\n\n      openChannel.enter((response, enterError) => {\n        if (error) {\n          reject(new Error(enterError));\n          return;\n        }\n        resolve(response);\n      });\n    });\n  });\n};\n\nexport const exitOpenChannel = (store) => (channelUrl) => {\n  const sdk = getSdk(store);\n  return new Promise((resolve, reject) => {\n    if (!sdk) {\n      reject(new Error('Sdk not found'));\n    }\n    sdk.OpenChannel.getChannel(channelUrl, (openChannel, error) => {\n      if (error) {\n        reject(new Error(error));\n        return;\n      }\n\n      openChannel.exit((response, exitError) => {\n        if (error) {\n          reject(new Error(exitError));\n          return;\n        }\n        resolve(response);\n      });\n    });\n  });\n};\n\nexport const getOpenChannelSendUserMessage = (store) => (channelUrl, userMessageParams) => {\n  const sdk = getSdk(store);\n  const pubsub = getPubSub(store);\n  return new Promise((resolve, reject) => {\n    if (!sdk) {\n      reject(new Error('Sdk not found'));\n    }\n    sdk.OpenChannel.getChannel(channelUrl)\n      .then((channel) => {\n        const promisify = () => {\n          let pendingMsg = null;\n          const pendingPromise = new Promise((resolve_, reject_) => {\n            pendingMsg = channel.sendUserMessage(userMessageParams, (res, err) => {\n              const swapParams = sdk.getErrorFirstCallback();\n              let message = res;\n              let error = err;\n              if (swapParams) {\n                message = err;\n                error = res;\n              }\n              if (error) {\n                reject_(error);\n                return;\n              }\n              resolve_(message);\n              pubsub.publish(\n                topics.SEND_USER_MESSAGE,\n                {\n                  message,\n                  channel,\n                },\n              );\n            });\n            pubsub.publish(\n              topics.SEND_MESSAGE_START,\n              {\n                message: pendingMsg,\n                channel,\n              },\n            );\n          });\n          pendingPromise.get = () => pendingMsg;\n          return pendingPromise;\n        };\n        resolve(promisify());\n      })\n      .catch(reject);\n  });\n};\n\nexport const getOpenChannelSendFileMessage = (store) => (channelUrl, fileMessageParams) => {\n  const sdk = getSdk(store);\n  const pubsub = getPubSub(store);\n  return new Promise((resolve, reject) => {\n    if (!sdk) {\n      reject(new Error('Sdk not found'));\n    }\n    sdk.OpenChannel.getChannel(channelUrl)\n      .then((channel) => {\n        const promisify = () => {\n          let pendingMsg = null;\n          const pendingPromise = new Promise((resolve_, reject_) => {\n            pendingMsg = channel.sendFileMessage(fileMessageParams, (res, err) => {\n              const swapParams = sdk.getErrorFirstCallback();\n              let message = res;\n              let error = err;\n              if (swapParams) {\n                message = err;\n                error = res;\n              }\n\n              if (error) {\n                reject_(error);\n                return;\n              }\n              resolve_(message);\n              pubsub.publish(\n                topics.SEND_FILE_MESSAGE,\n                {\n                  message,\n                  channel,\n                },\n              );\n            });\n          });\n          if (fileMessageParams.file) {\n            // keep the file's local version in pendingMsg.localUrl\n            // because promise doesnt allow overriding of pendingMsg.url\n            // eslint-disable-next-line no-param-reassign\n            pendingMsg.localUrl = URL.createObjectURL(fileMessageParams.file);\n          }\n          if (fileMessageParams.fileUrl) {\n            // eslint-disable-next-line no-param-reassign\n            pendingMsg.localUrl = fileMessageParams.fileUrl;\n          }\n          // eslint-disable-next-line no-param-reassign\n          pendingMsg.requestState = 'pending';\n          pubsub.publish(\n            topics.SEND_MESSAGE_START,\n            {\n              message: pendingMsg,\n              channel,\n            },\n          );\n          pendingPromise.get = () => pendingMsg;\n          return pendingPromise;\n        };\n        resolve(promisify());\n      })\n      .catch(reject);\n  });\n};\n\nexport const getOpenChannelUpdateUserMessage = (store) => (channelUrl, messageId, params) => {\n  const sdk = getSdk(store);\n  const pubsub = getPubSub(store);\n  return new Promise((resolve, reject) => {\n    if (!sdk) {\n      reject(new Error('Sdk not found'));\n    }\n    sdk.OpenChannel.getChannel(channelUrl)\n      .then((channel) => {\n        channel.updateUserMessage(messageId, params, (res, err) => {\n          const swapParams = sdk.getErrorFirstCallback();\n          let message = res;\n          let error = err;\n          if (swapParams) {\n            message = err;\n            error = res;\n          }\n\n          if (error) {\n            reject(error);\n            return;\n          }\n          resolve(message);\n          pubsub.publish(\n            topics.UPDATE_USER_MESSAGE,\n            {\n              message,\n              channel,\n              // workaround for updating channelPreview on message-edit\n              // https://sendbird.atlassian.net/browse/UIKIT-268\n              fromSelector: true,\n            },\n          );\n        });\n      })\n      .catch(reject);\n  });\n};\n\nexport const getOpenChannelDeleteMessage = (store) => (channelUrl, message) => {\n  const sdk = getSdk(store);\n  const pubsub = getPubSub(store);\n  return new Promise((resolve, reject) => {\n    if (!sdk) {\n      reject(new Error('Sdk not found'));\n    }\n    sdk.OpenChannel.getChannel(channelUrl)\n      .then((channel) => {\n        const { messageId } = message;\n        channel.deleteMessage(message, (res, err) => {\n          const swapParams = sdk.getErrorFirstCallback();\n          let error = err;\n          if (swapParams) {\n            error = res;\n          }\n\n          if (error) {\n            reject(error);\n            return;\n          }\n          resolve(message);\n          pubsub.publish(\n            topics.DELETE_MESSAGE,\n            {\n              messageId,\n              channel,\n            },\n          );\n        });\n      })\n      .catch(reject);\n  });\n};\n\nexport const getOpenChannelResendUserMessage = (store) => (channelUrl, failedMessage) => {\n  const sdk = getSdk(store);\n  const pubsub = getPubSub(store);\n  return new Promise((resolve, reject) => {\n    if (!sdk) {\n      reject(new Error('Sdk not found'));\n    }\n    sdk.OpenChannel.getChannel(channelUrl)\n      .then((channel) => {\n        channel.resendUserMessage(failedMessage)\n          .then((message) => {\n            resolve(message);\n            pubsub.publish(\n              topics.SEND_USER_MESSAGE,\n              {\n                message,\n                channel,\n              },\n            );\n          })\n          .catch(reject);\n      })\n      .catch(reject);\n  });\n};\n\nexport const getOpenChannelResendFileMessage = (store) => (channelUrl, failedMessage) => {\n  const sdk = getSdk(store);\n  const pubsub = getPubSub(store);\n  return new Promise((resolve, reject) => {\n    if (!sdk) {\n      reject(new Error('Sdk not found'));\n    }\n    sdk.OpenChannel.getChannel(channelUrl)\n      .then((channel) => {\n        channel.resendFileMessage(failedMessage)\n          .then((message) => {\n            resolve(message);\n            pubsub.publish(\n              topics.SEND_FILE_MESSAGE,\n              {\n                message,\n                channel,\n              },\n            );\n          })\n          .catch(reject);\n      })\n      .catch(reject);\n  });\n};\n\nexport default {\n  getSdk,\n  getConnect,\n  getDisconnect,\n  getUpdateUserInfo,\n  getSendUserMessage,\n  getSendFileMessage,\n  getUpdateUserMessage,\n  getDeleteMessage,\n  getResendUserMessage,\n  getResendFileMessage,\n  getFreezeChannel,\n  getUnFreezeChannel,\n  getCreateChannel,\n  getLeaveChannel,\n  getCreateOpenChannel,\n  getEnterOpenChannel: enterOpenChannel,\n  getExitOpenChannel: exitOpenChannel,\n  getOpenChannelSendUserMessage,\n  getOpenChannelSendFileMessage,\n  getOpenChannelUpdateUserMessage,\n  getOpenChannelDeleteMessage,\n  getOpenChannelResendUserMessage,\n  getOpenChannelResendFileMessage,\n};\n","import React, { ReactElement, useContext } from 'react';\nimport { SendbirdTypes } from '../../types';\nimport './index.scss';\n\nimport { LocalizationContext } from '../../lib/LocalizationContext';\nimport withSendbirdContext from '../../lib/SendbirdSdkContext';\nimport { getSdk, getCreateChannel } from '../../lib/selectors';\nimport Avatar from '../Avatar/index';\nimport Label, { LabelColors, LabelTypography } from '../Label';\nimport Button, { ButtonTypes } from '../Button';\n\ninterface Logger {\n  info?(message: string, channel: SendbirdTypes['GroupChannel']): void;\n}\n\ninterface Props {\n  user: SendbirdTypes['User'];\n  currentUserId?: string;\n  sdk?: SendbirdTypes['SendBirdInstance'];\n  logger?: Logger;\n  disableMessaging?: boolean;\n  createChannel?(params: SendbirdTypes['GroupChannelParams']): Promise<SendbirdTypes['GroupChannel']>;\n  onSuccess?(): void;\n}\n\nfunction UserProfile({\n  user,\n  currentUserId,\n  sdk,\n  logger,\n  disableMessaging = false,\n  createChannel,\n  onSuccess,\n}: Props): ReactElement {\n  const { stringSet } = useContext(LocalizationContext);\n  return (\n    <div className=\"sendbird__user-profile\">\n      <section className=\"sendbird__user-profile-avatar\">\n        <Avatar\n          height=\"80px\"\n          width=\"80px\"\n          src={user.profileUrl}\n        />\n      </section>\n      <section className=\"sendbird__user-profile-name\">\n        <Label\n          type={LabelTypography.H_2}\n          color={LabelColors.ONBACKGROUND_1}\n        >\n          {user.nickname || stringSet.NO_NAME}\n        </Label>\n      </section>\n      {\n        (user.userId !== currentUserId) && !disableMessaging && (\n          <section className=\"sendbird__user-profile-message\">\n            <Button\n              type={ButtonTypes.SECONDARY}\n              onClick={() => {\n                const params = new sdk.GroupChannelParams();\n                params.isDistinct = true;\n                params.addUserIds([user.userId]);\n                onSuccess();\n                createChannel(params)\n                  .then((groupChannel) => {\n                    logger.info('UserProfile, channel create', groupChannel);\n                  });\n              }}\n            >\n              {stringSet.USER_PROFILE__MESSAGE}\n            </Button>\n          </section>\n        )\n      }\n      <div className=\"sendbird__user-profile-separator\" />\n      <section className=\"sendbird__user-profile-userId\">\n        <Label\n          className=\"sendbird__user-profile-userId--label\"\n          type={LabelTypography.CAPTION_2}\n          color={LabelColors.ONBACKGROUND_2}\n        >\n          {stringSet.USER_PROFILE__USER_ID}\n        </Label>\n        <Label\n          className=\"sendbird__user-profile-userId--value\"\n          type={LabelTypography.BODY_1}\n          color={LabelColors.ONBACKGROUND_1}\n        >\n          {user.userId}\n        </Label>\n      </section>\n    </div>\n  );\n}\n\nconst mapStoreToProps = (store) => ({\n  sdk: getSdk(store),\n  createChannel: getCreateChannel(store),\n  logger: store.config.logger,\n  pubsub: store.config.pubSub,\n});\n\nconst ConnectedUserProfile = withSendbirdContext(UserProfile, mapStoreToProps);\n\nexport default ConnectedUserProfile;\n","import React, { Component } from 'react';\nimport { createPortal } from 'react-dom';\nimport PropTypes from 'prop-types';\n\nexport default class MenuItems extends Component {\n  constructor(props) {\n    super(props);\n    this.menuRef = React.createRef();\n    this.state = {\n      menuStyle: {},\n      handleClickOutside: () => { },\n    };\n  }\n\n  componentDidMount() {\n    this.setupEvents();\n    this.getMenuPosition();\n    this.showParent();\n  }\n\n  componentWillUnmount() {\n    this.cleanUpEvents();\n    this.hideParent();\n  }\n\n  showParent = () => {\n    const { parentContainRef = {} } = this.props;\n    const { current } = parentContainRef;\n    if (parentContainRef && current) {\n      current.classList.add('sendbird-icon--pressed');\n    }\n  }\n\n  hideParent = () => {\n    const { parentContainRef = {} } = this.props;\n    const { current } = parentContainRef;\n    if (parentContainRef && current) {\n      current.classList.remove('sendbird-icon--pressed');\n    }\n  }\n\n  setupEvents = () => {\n    const { closeDropdown } = this.props;\n    const { menuRef } = this;\n    const handleClickOutside = (event) => {\n      if (menuRef.current && !menuRef.current.contains(event.target)) {\n        closeDropdown();\n      }\n    };\n    this.setState({\n      handleClickOutside,\n    });\n\n    document.addEventListener('mousedown', handleClickOutside);\n  }\n\n  cleanUpEvents = () => {\n    const {\n      handleClickOutside,\n    } = this.state;\n    document.removeEventListener('mousedown', handleClickOutside);\n  }\n\n  getMenuPosition = () => {\n    const { parentRef, openLeft } = this.props;\n    const parentRect = parentRef.current.getBoundingClientRect();\n    const x = parentRect.x || parentRect.left;\n    const y = parentRect.y || parentRect.top;\n    const menuStyle = {\n      top: y,\n      left: x,\n    };\n\n    if (!this.menuRef.current) return menuStyle;\n\n    const { innerWidth, innerHeight } = window;\n    const rect = this.menuRef.current.getBoundingClientRect();\n    if (y + rect.height > innerHeight) {\n      menuStyle.top -= rect.height;\n    }\n\n    if (x + rect.width > innerWidth && !openLeft) {\n      menuStyle.left -= rect.width;\n    }\n\n    if (menuStyle.top < 0) {\n      menuStyle.top = rect.height < innerHeight ? (innerHeight - rect.height) / 2 : 0;\n    }\n\n    if (menuStyle.left < 0) {\n      menuStyle.left = rect.width < innerWidth ? (innerWidth - rect.width) / 2 : 0;\n    }\n\n    menuStyle.top += 32;\n    if (openLeft) {\n      const padding = Number.isNaN(rect.width - 30)\n        ? 108 // default\n        : rect.width - 30;\n      menuStyle.left -= padding;\n    }\n\n    return this.setState({ menuStyle });\n  }\n\n  render() {\n    const { menuStyle } = this.state;\n    const { children, style } = this.props;\n    return (\n      createPortal(\n        (\n          <>\n            <div className=\"sendbird-dropdown__menu-backdrop\" />\n            <ul\n              className=\"sendbird-dropdown__menu\"\n              ref={this.menuRef}\n              style={{\n                display: 'inline-block',\n                position: 'fixed',\n                left: `${Math.round(menuStyle.left)}px`,\n                top: `${Math.round(menuStyle.top)}px`,\n                ...style,\n              }}\n            >\n              {children}\n            </ul>\n          </>\n        ),\n        document.getElementById('sendbird-dropdown-portal'),\n      )\n    );\n  }\n}\nMenuItems.propTypes = {\n  closeDropdown: PropTypes.func.isRequired,\n  children: PropTypes.oneOfType([\n    PropTypes.element,\n    PropTypes.arrayOf(PropTypes.element),\n  ]).isRequired,\n  style: PropTypes.shape({}),\n  // https://stackoverflow.com/a/51127130\n  parentRef: PropTypes.oneOfType([\n    PropTypes.func,\n    PropTypes.shape({ current: PropTypes.instanceOf(Element) }),\n  ]).isRequired,\n  parentContainRef: PropTypes.oneOfType([\n    PropTypes.func,\n    PropTypes.shape({ current: PropTypes.instanceOf(Element) }),\n  ]).isRequired,\n  openLeft: PropTypes.bool,\n};\nMenuItems.defaultProps = {\n  style: {},\n  openLeft: false,\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport './index.scss';\n\nconst componentClassName = 'sendbird-sort-by-row';\nexport default function SortByRow({\n  className,\n  maxItemCount,\n  itemWidth,\n  itemHeight,\n  children,\n}) {\n  if (children.length > maxItemCount) {\n    const result = [];\n\n    for (let i = 0; i < children.length; i += maxItemCount) {\n      result.push(\n        <div\n          className={[\n            ...(Array.isArray(className) ? className : [className]),\n            componentClassName,\n          ].join(' ')}\n          key={className + i}\n          style={{\n            width: itemWidth * maxItemCount,\n            height: itemHeight,\n          }}\n        >\n          {\n            children.slice(i, i + maxItemCount)\n          }\n        </div>,\n      );\n    }\n    return result;\n  }\n\n  return (\n    <div\n      className={[\n        ...(Array.isArray(className) ? className : [className]),\n        componentClassName,\n      ].join(' ')}\n      style={{\n        width: itemWidth * children.length,\n        height: itemHeight,\n      }}\n    >\n      {children}\n    </div>\n  );\n}\n\nSortByRow.propTypes = {\n  className: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.arrayOf(PropTypes.string),\n  ]),\n  maxItemCount: PropTypes.number.isRequired,\n  itemWidth: PropTypes.number.isRequired,\n  itemHeight: PropTypes.number.isRequired,\n  children: PropTypes.oneOfType([\n    PropTypes.element,\n    PropTypes.arrayOf(PropTypes.element),\n    PropTypes.string,\n    PropTypes.arrayOf(PropTypes.string),\n  ]).isRequired,\n};\n\nSortByRow.defaultProps = {\n  className: '',\n};\n","import React, { Component } from 'react';\nimport { createPortal } from 'react-dom';\nimport PropTypes from 'prop-types';\n\nimport SortByRow from '../../SortByRow';\n\nexport default class EmojiListItems extends Component {\n  constructor(props) {\n    super(props);\n    this.reactionRef = React.createRef();\n    this.state = {\n      reactionStyle: {},\n      handleClickOutside: () => { },\n    };\n  }\n\n  componentDidMount() {\n    this.setupEvents();\n    this.getBarPosition();\n    this.showParent();\n  }\n\n  componentWillUnmount() {\n    this.cleanUpEvents();\n    this.hideParent();\n  }\n\n  showParent = () => {\n    const { parentContainRef = {} } = this.props;\n    const { current } = parentContainRef;\n    if (parentContainRef && current) {\n      current.classList.add('sendbird-reactions--pressed');\n    }\n  }\n\n  hideParent = () => {\n    const { parentContainRef = {} } = this.props;\n    const { current } = parentContainRef;\n    if (parentContainRef && current) {\n      current.classList.remove('sendbird-reactions--pressed');\n    }\n  }\n\n  setupEvents = () => {\n    const { closeDropdown } = this.props;\n    const { reactionRef } = this;\n    const handleClickOutside = (event) => {\n      if (reactionRef.current && !reactionRef.current.contains(event.target)) {\n        closeDropdown();\n      }\n    };\n    this.setState({\n      handleClickOutside,\n    });\n    document.addEventListener('mousedown', handleClickOutside);\n  }\n\n  cleanUpEvents = () => {\n    const {\n      handleClickOutside,\n    } = this.state;\n    document.removeEventListener('mousedown', handleClickOutside);\n  }\n\n  getBarPosition = () => {\n    // calculate the location that the context menu should be\n    const {\n      parentRef,\n      spaceFromTrigger,\n    } = this.props;\n    const spaceFromTriggerX = spaceFromTrigger.x || 0;\n    const spaceFromTriggerY = spaceFromTrigger.y || 0;\n\n    const parentRect = parentRef.current.getBoundingClientRect();\n\n    const x = parentRect.x || parentRect.left;\n    const y = parentRect.y || parentRect.top;\n\n    const reactionStyle = {\n      top: y,\n      left: x,\n    };\n\n    if (!this.reactionRef.current) return reactionStyle;\n    const rect = this.reactionRef.current.getBoundingClientRect();\n\n    if (reactionStyle.top < rect.height) {\n      reactionStyle.top += parentRect.height;\n      reactionStyle.top += spaceFromTriggerY;\n    } else {\n      reactionStyle.top -= rect.height;\n      reactionStyle.top -= spaceFromTriggerY;\n    }\n\n    reactionStyle.left -= (rect.width / 2);\n    reactionStyle.left += (parentRect.height / 2) - 2;\n    reactionStyle.left += spaceFromTriggerX;\n\n    const maximumLeft = (window.innerWidth - rect.width);\n    if (maximumLeft < reactionStyle.left) {\n      reactionStyle.left = maximumLeft;\n    }\n    if (reactionStyle.left < 0) {\n      reactionStyle.left = 0;\n    }\n\n    return this.setState({ reactionStyle });\n  }\n\n  render() {\n    const { reactionStyle } = this.state;\n    const { children } = this.props;\n    return (\n      createPortal(\n        <>\n          <div className=\"sendbird-dropdown__menu-backdrop\" />\n          <ul\n            className=\"sendbird-dropdown__reaction-bar\"\n            ref={this.reactionRef}\n            style={{\n              display: 'inline-block',\n              position: 'fixed',\n              left: `${Math.round(reactionStyle.left)}px`,\n              top: `${Math.round(reactionStyle.top)}px`,\n            }}\n          >\n            <SortByRow\n              className=\"sendbird-dropdown__reaction-bar__row\"\n              maxItemCount={8}\n              itemWidth={44}\n              itemHeight={40}\n            >\n              {children}\n            </SortByRow>\n          </ul>\n        </>,\n        document.getElementById('sendbird-emoji-list-portal'),\n      )\n    );\n  }\n}\nEmojiListItems.propTypes = {\n  closeDropdown: PropTypes.func.isRequired,\n  children: PropTypes.oneOfType([\n    PropTypes.element,\n    PropTypes.arrayOf(PropTypes.element),\n  ]).isRequired,\n  parentRef: PropTypes.oneOfType([\n    PropTypes.func,\n    PropTypes.shape({ current: PropTypes.instanceOf(Element) }),\n  ]).isRequired,\n  parentContainRef: PropTypes.oneOfType([\n    PropTypes.func,\n    PropTypes.shape({ current: PropTypes.instanceOf(Element) }),\n  ]).isRequired,\n  spaceFromTrigger: PropTypes.shape({\n    x: PropTypes.number,\n    y: PropTypes.number,\n  }),\n};\nEmojiListItems.defaultProps = {\n  spaceFromTrigger: {},\n};\n","import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\n\nimport './index.scss';\n\nimport Label, { LabelTypography, LabelColors } from '../Label';\nimport { getClassName } from '../../utils';\n\nimport MenuItems_ from './items/MenuItems';\nimport EmojiListItems_ from './items/EmojiListItems';\n\nconst ENTER = 13;\n\nexport const MenuItems = MenuItems_;\nexport const EmojiListItems = EmojiListItems_;\n\nexport const MenuItem = ({\n  className,\n  children,\n  onClick,\n  disable,\n}) => {\n  const handleClickEvent = (e) => { if (!disable) onClick(e); };\n  return (\n    <li\n      className={getClassName([className, 'sendbird-dropdown__menu-item', disable ? 'disable' : ''])}\n      role=\"menuitem\"\n      onClick={handleClickEvent}\n      onKeyPress={(e) => { if (e.keyCode === ENTER) handleClickEvent(e); }}\n      tabIndex={0}\n    >\n      <Label\n        className=\"sendbird-dropdown__menu-item__text\"\n        type={LabelTypography.SUBTITLE_2}\n        color={disable ? LabelColors.ONBACKGROUND_4 : LabelColors.ONBACKGROUND_1}\n      >\n        {children}\n      </Label>\n    </li>\n  );\n};\n\nMenuItem.propTypes = {\n  className: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.arrayOf(PropTypes.string),\n  ]),\n  children: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.element,\n  ]).isRequired,\n  onClick: PropTypes.func.isRequired,\n  disable: PropTypes.bool,\n};\n\nMenuItem.defaultProps = {\n  className: '',\n  disable: false,\n};\n\n// Root components should be appended before ContextMenu is rendered\nexport const MenuRoot = () => (\n  <div id=\"sendbird-dropdown-portal\" />\n);\nexport const EmojiReactionListRoot = () => (\n  <div id=\"sendbird-emoji-list-portal\" />\n);\n\nexport default function ContextMenu({ menuTrigger, menuItems }) {\n  const [showMenu, setShowMenu] = useState(false);\n\n  return (\n    <div className=\"sendbird-context-menu\" style={{ display: 'inline' }}>\n      {menuTrigger(() => setShowMenu(!showMenu))}\n      {showMenu && menuItems(() => setShowMenu(false))}\n    </div>\n  );\n}\n\nContextMenu.propTypes = {\n  menuTrigger: PropTypes.func.isRequired,\n  menuItems: PropTypes.func.isRequired,\n};\n"],"names":["UserProfileContext","React","createContext","disableUserProfile","isOpenChannel","renderUserProfile","UserProfileProvider","props","children","className","propTypes","PropTypes","oneOfType","element","arrayOf","any","isRequired","bool","func","string","defaultProps","SUPPORTED_MIMES","IMAGE","VIDEO","AUDIO","UIKitMessageTypes","ADMIN","TEXT","FILE","THUMBNAIL","OG","UNKNOWN","UIKitFileTypes","GIF","OTHERS","SendingMessageStatus","NONE","SUCCEEDED","FAILED","PENDING","OutgoingMessageStates","SENT","DELIVERED","READ","isImage","type","indexOf","isVideo","isGif","isSupportedFileView","isAudio","getUIKitFileTypes","getUIKitFileType","getOutgoingMessageStates","getOutgoingMessageState","channel","message","sendingStatus","isGroupChannel","getUnreadMemberCount","getUndeliveredMemberCount","isSentMessage","isFailedMessage","isPendingMessage","isSentStatus","state","isAdminMessage","messageType","isUserMessage","isFileMessage","isOGMessage","ogMetaData","url","isTextMessage","isThumbnailMessage","isImageMessage","isVideoMessage","isGifMessage","isAudioMessage","isEditedMessage","updatedAt","getUIKitMessageTypes","getUIKitMessageType","getSendingMessageStatus","reducer","accumulator","currentValue","Array","isArray","push","getClassName","classNames","reduce","join","isReactedBy","userId","reaction","userIds","some","reactorUserId","getEmojiTooltipString","memberNicknamesMap","stringSet","you","length","TOOLTIP__YOU","TOOLTIP__AND_YOU","filter","map","get","TOOLTIP__UNKNOWN_USER","URL_REG","isUrl","text","test","truncateString","fullStr","strLen","undefined","separator","sepLen","charsToShow","frontChars","Math","ceil","backChars","floor","substr","copyToClipboard","window","clipboardData","setData","document","queryCommandSupported","textarea","createElement","textContent","style","position","body","appendChild","select","execCommand","ex","removeChild","getEmojiListAll","emojiContainer","emojiCategories","emojiCategory","emojis","prevArr","currArr","concat","getEmojiMapAll","emojiMap","Map","forEach","category","emoji","key","set","getUserName","user","friendName","nickname","getSenderName","sender","getMessageCreatedAt","format","createdAt","hasSameMembers","a","b","sortedA","__spreadArray","sort","sortedB","i","isFriend","friendDiscoveryKey","filterMessageListParams","params","customTypes","item","includes","customType","senderUserIds","messageSender","includeParentMessageInfo","parentMessageId","parentMessage","filterChannelListParams","currentUserId","includeEmpty","lastMessage","_searchFilter","search_query","search_fields","searchFilter","searchQuery_1","searchFields","searchField","name","toLowerCase","members","member","_userIdsFilter","userIdsFilter","includeMode","queryType","memberIds_1","every","includeFrozen","isFrozen","customTypesFilter","customTypeStartsWithFilter","RegExp","channelNameContainsFilter","nicknameContainsFilter","lowerCasedSubString_1","channelUrlsFilter","memberStateFilter","myMemberState","inviter","hiddenChannelFilter","isHidden","hiddenState","unreadChannelFilter","unreadMessageCount","publicChannelFilter","isPublic","superChannelFilter","isSuper","binarySearch","list","number","pivot","leftList","slice","rightList","getChannelsWithUpsertedChannel","channels","ch","targetIndex","IconButton","forwardRef","ref","disabled","width","height","onClick","onBlur","useState","pressed","setPressed","e","shape","MODAL_ROOT","Type","PRIMARY","SECONDARY","DANGER","DISABLED","Size","BIG","SMALL","changeTypeToClassName","changeSizeToClassName","size","Button","injectingClassNames","Label","LabelTypography","BUTTON_1","LabelColors","ONCONTENT_1","ButtonTypes","ButtonSizes","oneOf","Object","keys","ModalHeader","titleText","H_1","ONBACKGROUND_1","ModalBody","ModalFooter","onSubmit","onCancel","submitText","useContext","LocalizationContext","BUTTON__CANCEL","Modal","hideFooter","createPortal","Icon","IconTypes","CLOSE","IconColors","DEFAULT","getElementById","Colors","ONBACKGROUND_2","ONBACKGROUND_3","ONBACKGROUND_4","ERROR","changeColorToClassName","color","TextButton","notUnderline","SEND_MESSAGE_START","SEND_USER_MESSAGE","SEND_FILE_MESSAGE","UPDATE_USER_MESSAGE","DELETE_MESSAGE","LEAVE_CHANNEL","CREATE_CHANNEL","getSdk","store","stores","sdkStore","sdk","getPubSub","config","pubSub","getConnect","accessToken","Promise","resolve","reject","Error","connect","then","res","catch","err","getDisconnect","disconnect","getUpdateUserInfo","nickName","profileUrl","updateCurrentUserInfo","getSendUserMessage","channelUrl","userMessageParams","pubsub","GroupChannel","getChannel","promisify","pendingMsg","pendingPromise","resolve_","reject_","sendUserMessage","swapParams","getErrorFirstCallback","error","publish","topics","getSendFileMessage","fileMessageParams","sendFileMessage","file","localUrl","URL","createObjectURL","fileUrl","requestState","getUpdateUserMessage","messageId","updateUserMessage","fromSelector","getDeleteMessage","deleteMessage","getResendUserMessage","failedMessage","resendUserMessage","getResendFileMessage","resendFileMessage","getCreateChannel","createChannel","getLeaveChannel","leave","getFreezeChannel","freeze","getUnFreezeChannel","unfreeze","getCreateOpenChannel","OpenChannel","enterOpenChannel","openChannel","enter","response","enterError","exitOpenChannel","exit","exitError","getOpenChannelSendUserMessage","getOpenChannelSendFileMessage","getOpenChannelUpdateUserMessage","getOpenChannelDeleteMessage","getOpenChannelResendUserMessage","getOpenChannelResendFileMessage","getEnterOpenChannel","getExitOpenChannel","UserProfile","_a","logger","_b","disableMessaging","onSuccess","Avatar","H_2","NO_NAME","GroupChannelParams","isDistinct","addUserIds","groupChannel","info","USER_PROFILE__MESSAGE","CAPTION_2","USER_PROFILE__USER_ID","BODY_1","mapStoreToProps","ConnectedUserProfile","withSendbirdContext","MenuItems","parentContainRef","current","classList","add","remove","closeDropdown","menuRef","handleClickOutside","event","contains","target","setState","addEventListener","removeEventListener","parentRef","openLeft","parentRect","getBoundingClientRect","x","left","y","top","menuStyle","innerWidth","innerHeight","rect","padding","Number","isNaN","createRef","setupEvents","getMenuPosition","showParent","cleanUpEvents","hideParent","display","round","Component","instanceOf","Element","componentClassName","SortByRow","maxItemCount","itemWidth","itemHeight","result","EmojiListItems","reactionRef","spaceFromTrigger","spaceFromTriggerX","spaceFromTriggerY","reactionStyle","maximumLeft","getBarPosition","ENTER","MenuItems_","EmojiListItems_","MenuItem","disable","handleClickEvent","keyCode","SUBTITLE_2","ContextMenu","menuTrigger","menuItems","showMenu","setShowMenu"],"mappings":";;;;;;;;;;;;;AAGA;AACA;AACA;AACA;;IACMA,kBAAkB,gBAAGC,yBAAK,CAACC,aAAN,CAAoB;AAC7CC,EAAAA,kBAAkB,EAAE,IADyB;AAE7CC,EAAAA,aAAa,EAAE,KAF8B;AAG7CC,EAAAA,iBAAiB,EAAE;AAH0B,CAApB;;IAMrBC,mBAAmB,GAAG,SAAtBA,mBAAsB,CAACC,KAAD,EAAW;AACrC,MAAQC,QAAR,GAAgCD,KAAhC,CAAQC,QAAR;AAAA,MAAkBC,SAAlB,GAAgCF,KAAhC,CAAkBE,SAAlB;AACA,sBACER,wCAAC,kBAAD,CAAoB,QAApB;AAA6B,IAAA,KAAK,EAAEM;AAApC,kBACEN;AAAK,IAAA,SAAS,EAAEQ;AAAhB,KACGD,QADH,CADF,CADF;AAOD;;AAEDF,mBAAmB,CAACI,SAApB,GAAgC;AAC9BF,EAAAA,QAAQ,EAAEG,6BAAS,CAACC,SAAV,CAAoB,CAC5BD,6BAAS,CAACE,OADkB,EAE5BF,6BAAS,CAACG,OAAV,CAAkBH,6BAAS,CAACE,OAA5B,CAF4B,EAG5BF,6BAAS,CAACI,GAHkB,CAApB,EAIPC,UAL2B;AAM9B;AACAZ,EAAAA,aAAa,EAAEO,6BAAS,CAACM,IAPK;AAQ9B;AACAd,EAAAA,kBAAkB,EAAEQ,6BAAS,CAACM,IATA;AAU9B;AACAZ,EAAAA,iBAAiB,EAAEM,6BAAS,CAACO,IAXC;AAY9BT,EAAAA,SAAS,EAAEE,6BAAS,CAACQ;AAZS,CAAhC;AAeAb,mBAAmB,CAACc,YAApB,GAAmC;AACjCX,EAAAA,SAAS,EAAE,IADsB;AAEjCL,EAAAA,aAAa,EAAE,KAFkB;AAGjCD,EAAAA,kBAAkB,EAAE,KAHa;AAIjCE,EAAAA,iBAAiB,EAAE;AAJc,CAAnC;;ACnCA,IAAMgB,eAAe,GAAG;AACtBC,EAAAA,KAAK,EAAE,CACL,YADK,EAEL,WAFK,EAGL,WAHK,EAIL,WAJK,EAKL,eALK,EAML,YANK;AAAA,GADe;AAStBC,EAAAA,KAAK,EAAE,CACL,YADK,EAEL,WAFK,EAGL,YAHK,EAIL,WAJK,CATe;AAetBC,EAAAA,KAAK,EAAE,CACL,WADK,EAEL,YAFK,EAGL,cAHK,EAIL,YAJK,EAKL,WALK,EAML,YANK,EAOL,WAPK,EAQL,YARK,EASL,YATK,EAUL,aAVK,EAWL,WAXK;AAfe,CAAxB;AAsCA,IAAMC,iBAAiB,GAAsB;AAC3CC,EAAAA,KAAK,EAAE,OADoC;AAE3CC,EAAAA,IAAI,EAAE,MAFqC;AAG3CC,EAAAA,IAAI,EAAE,MAHqC;AAI3CC,EAAAA,SAAS,EAAE,WAJgC;AAK3CC,EAAAA,EAAE,EAAE,IALuC;AAM3CC,EAAAA,OAAO,EAAE;AANkC,CAA7C;AAeO,IAAMC,cAAc,GAAmB;AAC5CV,EAAAA,KAAK,EAAE,OADqC;AAE5CE,EAAAA,KAAK,EAAE,OAFqC;AAG5CD,EAAAA,KAAK,EAAE,OAHqC;AAI5CU,EAAAA,GAAG,EAAE,KAJuC;AAK5CC,EAAAA,MAAM,EAAE;AALoC,CAAvC;AAcP,IAAMC,oBAAoB,GAAyB;AACjDC,EAAAA,IAAI,EAAE,MAD2C;AAEjDC,EAAAA,SAAS,EAAE,WAFsC;AAGjDC,EAAAA,MAAM,EAAE,QAHyC;AAIjDC,EAAAA,OAAO,EAAE;AAJwC,CAAnD;AAgBA,IAAMC,qBAAqB,GAA0B;AACnDJ,EAAAA,IAAI,EAAE,MAD6C;AAEnDG,EAAAA,OAAO,EAAE,SAF0C;AAGnDE,EAAAA,IAAI,EAAE,MAH6C;AAInDH,EAAAA,MAAM,EAAE,QAJ2C;AAKnDI,EAAAA,SAAS,EAAE,WALwC;AAMnDC,EAAAA,IAAI,EAAE;AAN6C,CAArD;IAWaC,OAAO,GAAG,SAAVA,OAAU,CAACC,IAAD;AAA2B,SAAAxB,eAAe,CAACC,KAAhB,CAAsBwB,OAAtB,CAA8BD,IAA9B,KAAuC,CAAvC;AAAwC;IAC7EE,OAAO,GAAG,SAAVA,OAAU,CAACF,IAAD;AAA2B,SAAAxB,eAAe,CAACE,KAAhB,CAAsBuB,OAAtB,CAA8BD,IAA9B,KAAuC,CAAvC;AAAwC;IAC7EG,KAAK,GAAG,SAARA,KAAQ,CAACH,IAAD;AAA2B,SAAAA,IAAI,KAAK,WAAT;AAAoB;IACvDI,mBAAmB,GAAG,SAAtBA,mBAAsB,CAACJ,IAAD;AAA2B,SAAAD,OAAO,CAACC,IAAD,CAAP,IAAiBE,OAAO,CAACF,IAAD,CAAxB;AAA8B;AACrF,IAAMK,OAAO,GAAG,SAAVA,OAAU,CAACL,IAAD;AAA2B,SAAAxB,eAAe,CAACG,KAAhB,CAAsBsB,OAAtB,CAA8BD,IAA9B,KAAuC,CAAvC;AAAwC,CAAnF;IAEMM,iBAAiB,GAAG,SAApBA,iBAAoB;AAAsB,0CAAMnB,eAAN;AAAuB;IACjEoB,gBAAgB,GAAG,SAAnBA,gBAAmB,CAACP,IAAD;AAC9B,MAAIG,KAAK,CAACH,IAAD,CAAT,EAAiB,OAAOb,cAAc,CAACC,GAAtB;AACjB,MAAIW,OAAO,CAACC,IAAD,CAAX,EAAmB,OAAOb,cAAc,CAACV,KAAtB;AACnB,MAAIyB,OAAO,CAACF,IAAD,CAAX,EAAmB,OAAOb,cAAc,CAACT,KAAtB;AACnB,MAAI2B,OAAO,CAACL,IAAD,CAAX,EAAmB,OAAOb,cAAc,CAACR,KAAtB;AACnB,SAAOQ,cAAc,CAACE,MAAtB;AACD;IACYmB,wBAAwB,GAAG,SAA3BA,wBAA2B;AAA6B,0CAAMb,sBAAN;AAA8B;IACtFc,uBAAuB,GAAG,SAA1BA,uBAA0B,CAACC,OAAD,EAAsCC,OAAtC;;;AACrC,MAAIA,OAAO,CAACC,aAAR,KAA0B,SAA9B,EAAyC,OAAOjB,qBAAqB,CAACD,OAA7B;AACzC,MAAIiB,OAAO,CAACC,aAAR,KAA0B,QAA9B,EAAwC,OAAOjB,qBAAqB,CAACF,MAA7B;;AACxC,MAAI,MAAAiB,OAAO,SAAP,IAAAA,OAAO,WAAP,SAAA,GAAAA,OAAO,CAAEG,cAAT,UAAA,iBAAA,SAAA,WAAAH,QAAJ,EAAiC;AAC/B;AACA,QAAKA,OAAwB,CAACI,oBAAzB,CAA8CH,OAA9C,MAA2D,CAAhE,EAAmE;AACjE,aAAOhB,qBAAqB,CAACG,IAA7B;AACD,KAFD,MAEO,IAAKY,OAAwB,CAACK,yBAAzB,CAAmDJ,OAAnD,MAAgE,CAArE,EAAwE;AAC7E,aAAOhB,qBAAqB,CAACE,SAA7B;AACD;AACF;;AACD,MAAIc,OAAO,CAACC,aAAR,KAA0B,WAA9B,EAA2C,OAAOjB,qBAAqB,CAACC,IAA7B;AAC3C,SAAOD,qBAAqB,CAACJ,IAA7B;AACD;IACYyB,aAAa,GAAG,SAAhBA,aAAgB,CAACN,OAAD,EAAsCC,OAAtC;AAAsF,SACjHF,uBAAuB,CAACC,OAAD,EAAUC,OAAV,CAAvB,KAA8ChB,qBAAqB,CAACC,IAApE,IACGa,uBAAuB,CAACC,OAAD,EAAUC,OAAV,CAAvB,KAA8ChB,qBAAqB,CAACE,SADvE,IAEGY,uBAAuB,CAACC,OAAD,EAAUC,OAAV,CAAvB,KAA8ChB,qBAAqB,CAACG,IAH0C;AAIlH;;IASYmB,eAAe,GAAG,SAAlBA,eAAkB,CAACP,OAAD,EAAsCC,OAAtC;AAAsF,SACnHF,uBAAuB,CAACC,OAAD,EAAUC,OAAV,CAAvB,KAA8ChB,qBAAqB,CAACF,MAD+C;AAEpH;IACYyB,gBAAgB,GAAG,SAAnBA,gBAAmB,CAACR,OAAD,EAAsCC,OAAtC;AAAsF,SACpHF,uBAAuB,CAACC,OAAD,EAAUC,OAAV,CAAvB,KAA8ChB,qBAAqB,CAACD,OADgD;AAErH;IACYyB,YAAY,GAAG,SAAfA,YAAe,CAACC,KAAD;AAA4B,SACtDA,KAAK,KAAKzB,qBAAqB,CAACC,IAAhC,IACGwB,KAAK,KAAKzB,qBAAqB,CAACE,SADnC,IAEGuB,KAAK,KAAKzB,qBAAqB,CAACG,IAHmB;AAIvD;AAEM,IAAMuB,cAAc,GAAG,SAAjBA,cAAiB,CAACV,OAAD;;;AAAoC,SAChEA,OAAO,KAAK,CAAA,MAAAA,OAAO,CAACU,cAAR,UAAA,iBAAA,SAAA,WAAAV,QAAA,KAA+BA,OAAO,CAAC,aAAD,CAAP,IAA0BA,OAAO,CAACW,WAAR,KAAwB,OAAtF,CADyD;AAEjE,CAFM;IAGMC,aAAa,GAAG,SAAhBA,aAAgB,CAACZ,OAAD;;;AAAmC,SAC9DA,OAAO,KAAK,CAAA,MAAAA,OAAO,CAACY,aAAR,UAAA,iBAAA,SAAA,WAAAZ,QAAA,KAA8BA,OAAO,CAAC,aAAD,CAAP,IAA0BA,OAAO,CAACW,WAAR,KAAwB,MAArF,CADuD;AAE/D;IACYE,aAAa,GAAG,SAAhBA,aAAgB,CAACb,OAAD;;;AAAmC,SAC9DA,OAAO,KAAK,CAAA,MAAAA,OAAO,CAACa,aAAR,UAAA,iBAAA,SAAA,WAAAb,QAAA,KAA8BA,OAAO,CAAC,aAAD,CAAP,IAA0BA,OAAO,CAACW,WAAR,KAAwB,MAArF,CADuD;AAE/D;IAEYG,WAAW,GAAG,SAAdA,WAAc,CAACd,OAAD;;;AAAmC,SAAA,CAAC,EAC7DA,OAAO,IAAIY,aAAa,CAACZ,OAAD,CAAxB,KAAqCA,OAAO,SAAP,IAAAA,OAAO,WAAP,SAAA,GAAAA,OAAO,CAAEe,UAA9C,MAA4D,MAAAf,OAAO,SAAP,IAAAA,OAAO,WAAP,SAAA,GAAAA,OAAO,CAAEe,UAAT,UAAA,iBAAA,SAAA,MAAqBC,GAAjF,CAD6D,CAAD;AAE7D;IACYC,aAAa,GAAG,SAAhBA,aAAgB,CAACjB,OAAD;AAAmC,SAAAY,aAAa,CAACZ,OAAD,CAAb,IAA0B,CAACc,WAAW,CAACd,OAAD,CAAtC;AAA+C;IAClGkB,kBAAkB,GAAG,SAArBA,kBAAqB,CAAClB,OAAD;AAAmC,SAAAA,OAAO,IAAIa,aAAa,CAACb,OAAD,CAAxB,IAAqCP,mBAAmB,CAACO,OAAO,CAACX,IAAT,CAAxD;AAAsE;IAC9H8B,cAAc,GAAG,SAAjBA,cAAiB,CAACnB,OAAD;AAAmC,SAAAA,OAAO,IAAIkB,kBAAkB,CAAClB,OAAD,CAA7B,IAA0CZ,OAAO,CAACY,OAAO,CAACX,IAAT,CAAjD;AAA+D;IACnH+B,cAAc,GAAG,SAAjBA,cAAiB,CAACpB,OAAD;AAAmC,SAAAA,OAAO,IAAIkB,kBAAkB,CAAClB,OAAD,CAA7B,IAA0CT,OAAO,CAACS,OAAO,CAACX,IAAT,CAAjD;AAA+D;IACnHgC,YAAY,GAAG,SAAfA,YAAe,CAACrB,OAAD;AAAmC,SAAAA,OAAO,IAAIkB,kBAAkB,CAAClB,OAAD,CAA7B,IAA0CR,KAAK,CAACQ,OAAO,CAACX,IAAT,CAA/C;AAA6D;IAC/GiC,cAAc,GAAG,SAAjBA,cAAiB,CAACtB,OAAD;AAAmC,SAAAA,OAAO,IAAIa,aAAa,CAACb,OAAD,CAAxB,IAAqCN,OAAO,CAACM,OAAO,CAACX,IAAT,CAA5C;AAA0D;IAE9GkC,eAAe,GAAG,SAAlBA,eAAkB,CAACvB,OAAD;AAAmC,SAAAY,aAAa,CAACZ,OAAD,CAAb,IAA2B,CAAAA,OAAO,SAAP,IAAAA,OAAO,WAAP,SAAA,GAAAA,OAAO,CAAEwB,SAAT,IAAqB,CAAhD;AAAkD;IAKvGC,oBAAoB,GAAG,SAAvBA,oBAAuB;AAAyB,0CAAMxD,kBAAN;AAA0B;IAC1EyD,mBAAmB,GAAG,SAAtBA,mBAAsB,CAAC1B,OAAD;AACjC,MAAIU,cAAc,CAACV,OAAD,CAAlB,EAA6C,OAAO/B,iBAAiB,CAACC,KAAzB;;AAC7C,MAAI0C,aAAa,CAACZ,OAAD,CAAjB,EAA2C;AACzC,WAAOc,WAAW,CAACd,OAAD,CAAX,GAAsC/B,iBAAiB,CAACK,EAAxD,GAA6DL,iBAAiB,CAACE,IAAtF;AACD;;AACD,MAAI0C,aAAa,CAACb,OAAD,CAAjB,EAA2C;AACzC,WAAOkB,kBAAkB,CAAClB,OAAD,CAAlB,GAA6C/B,iBAAiB,CAACI,SAA/D,GAA2EJ,iBAAiB,CAACG,IAApG;AACD;;AACD,SAAOH,iBAAiB,CAACM,OAAzB;AACD;IACYoD,uBAAuB,GAAG,SAA1BA,uBAA0B;AAA4B,0CAAMhD,qBAAN;AAA6B;;AAEhG,IAAMiD,OAAO,GAAG,SAAVA,OAAU,CAACC,WAAD,EAA6BC,YAA7B;AACd,MAAIC,KAAK,CAACC,OAAN,CAAcF,YAAd,CAAJ,EAAiC;AAC/B,mFAAWD,oBAAgBC,mBAA3B;AACD,GAFD,MAEO;AACLD,IAAAA,WAAW,CAACI,IAAZ,CAAiBH,YAAjB;AACA,WAAOD,WAAP;AACD;AACF,CAPD;;IAQaK,YAAY,GAAG,SAAfA,YAAe,CAACC,UAAD;AAAgE,SAC1FJ,KAAK,CAACC,OAAN,CAAcG,UAAd,IACIA,UAAU,CAACC,MAAX,CAAkBR,OAAlB,EAA2B,EAA3B,EAA+BS,IAA/B,CAAoC,GAApC,CADJ,GAEIF,UAHsF;AAI3F;IACYG,WAAW,GAAG,SAAdA,WAAc,CAACC,MAAD,EAAiBC,QAAjB;AAAiD,SAC1EA,QAAQ,CAACC,OAAT,CAAiBC,IAAjB,CAAsB,UAACC,aAAD;AAAoC,WAAAA,aAAa,KAAKJ,MAAlB;AAAwB,GAAlF,CAD0E;AAE3E;IAMYK,qBAAqB,GAAG,SAAxBA,qBAAwB,CAACJ,QAAD,EAAqBD,MAArB,EAAqCM,kBAArC,EAA8EC,SAA9E;AACnC,MAAIC,GAAG,GAAG,EAAV;;AACA,MAAIT,WAAW,CAACC,MAAD,EAASC,QAAT,CAAf,EAAmC;AACjCO,IAAAA,GAAG,GAAGP,QAAQ,CAACC,OAAT,CAAiBO,MAAjB,KAA4B,CAA5B,GAAgCF,SAAS,CAACG,YAA1C,GAAyDH,SAAS,CAACI,gBAAzE;AACD;;AACD,SAAQ,KAAGV,QAAQ,CAACC,OAAT,CACRU,MADQ,CACD,UAACR,aAAD;AAA2B,WAAAA,aAAa,KAAKJ,MAAlB;AAAwB,GADlD,EAERa,GAFQ,CAEJ,UAACT,aAAD;AAA2B,WAACE,kBAAkB,CAACQ,GAAnB,CAAuBV,aAAvB,KAAyCG,SAAS,CAACQ,qBAApD;AAA0E,GAFjG,EAGRjB,IAHQ,CAGH,IAHG,CAAH,GAGQU,GAHhB;AAID;AA+BD,IAAMQ,OAAO,GAAG,kFAAhB;IACaC,KAAK,GAAG,SAARA,KAAQ,CAACC,IAAD;AAA2B,SAAAF,OAAO,CAACG,IAAR,CAAaD,IAAb,CAAA;AAAkB;IAErDE,cAAc,GAAG,SAAjBA,cAAiB,CAACC,OAAD,EAAkBC,MAAlB;AAC5B,MAAI,CAACA,MAAL,EAAaA,MAAM,GAAG,EAAT;AACb,MAAID,OAAO,KAAK,IAAZ,IAAoBA,OAAO,KAAKE,SAApC,EAA+C,OAAO,EAAP;AAC/C,MAAIF,OAAO,CAACZ,MAAR,IAAkBa,MAAtB,EAA8B,OAAOD,OAAP;AAC9B,MAAMG,SAAS,GAAG,KAAlB;AACA,MAAMC,MAAM,GAAGD,SAAS,CAACf,MAAzB;AACA,MAAMiB,WAAW,GAAGJ,MAAM,GAAGG,MAA7B;AACA,MAAME,UAAU,GAAGC,IAAI,CAACC,IAAL,CAAUH,WAAW,GAAG,CAAxB,CAAnB;AACA,MAAMI,SAAS,GAAGF,IAAI,CAACG,KAAL,CAAWL,WAAW,GAAG,CAAzB,CAAlB;AACA,SAAOL,OAAO,CAACW,MAAR,CAAe,CAAf,EAAkBL,UAAlB,IAAgCH,SAAhC,GAA4CH,OAAO,CAACW,MAAR,CAAeX,OAAO,CAACZ,MAAR,GAAiBqB,SAAhC,CAAnD;AACD;IAEYG,eAAe,GAAG,SAAlBA,eAAkB,CAACf,IAAD;AAC7B;AACA,MAAIgB,MAAM,CAACC,aAAP,IAAwBD,MAAM,CAACC,aAAP,CAAqBC,OAAjD,EAA0D;AACxD;AACA;AACA,WAAOF,MAAM,CAACC,aAAP,CAAqBC,OAArB,CAA6B,MAA7B,EAAqClB,IAArC,CAAP;AACD;;AACD,MAAImB,QAAQ,CAACC,qBAAT,IAAkCD,QAAQ,CAACC,qBAAT,CAA+B,MAA/B,CAAtC,EAA8E;AAC5E,QAAMC,QAAQ,GAAGF,QAAQ,CAACG,aAAT,CAAuB,UAAvB,CAAjB;AACAD,IAAAA,QAAQ,CAACE,WAAT,GAAuBvB,IAAvB;AACAqB,IAAAA,QAAQ,CAACG,KAAT,CAAeC,QAAf,GAA0B,OAA1B,CAH4E;;AAI5EN,IAAAA,QAAQ,CAACO,IAAT,CAAcC,WAAd,CAA0BN,QAA1B;AACAA,IAAAA,QAAQ,CAACO,MAAT;;AACA,QAAI;AACF,aAAOT,QAAQ,CAACU,WAAT,CAAqB,MAArB,CAAP,CADE;AAEH,KAFD,CAEE,OAAOC,EAAP,EAAW;AACX,aAAO,KAAP;AACD,KAJD,SAIU;AACRX,MAAAA,QAAQ,CAACO,IAAT,CAAcK,WAAd,CAA0BV,QAA1B;AACD;AACF;;AACD,SAAO,KAAP;AACD;IAEYW,eAAe,GAAG,SAAlBA,eAAkB,CAACC,cAAD;;;AAAkD,SAC/E,MAAAA,cAAc,SAAd,IAAAA,cAAc,WAAd,SAAA,GAAAA,cAAc,CAAEC,eAAhB,UAAA,iBAAA,SAAA,MAAiCvC,IAAI,UAACwC,aAAD;AAAkC,WAAAA,aAAa,CAACC,MAAd;AAAoB,KACxFzD,OAAO,UAAC0D,OAAD,EAAwBC,OAAxB;AAAkD,WAAAD,OAAO,CAACE,MAAR,CAAeD,OAAf,CAAA;AAAuB,KAAE,GAFN;AAGhF;IACYE,cAAc,GAAG,SAAjBA,cAAiB,CAACP,cAAD;;;AAC5B,MAAMQ,QAAQ,GAAG,IAAIC,GAAJ,EAAjB;AACA,QAAAT,cAAc,SAAd,IAAAA,cAAc,WAAd,SAAA,GAAAA,cAAc,CAAEC,eAAhB,UAAA,iBAAA,SAAA,MAAiCS,QAAQ,UAACC,QAAD;;;AACvC,UAAAA,QAAQ,SAAR,IAAAA,QAAQ,WAAR,SAAA,GAAAA,QAAQ,CAAER,MAAV,UAAA,iBAAA,SAAA,MAAkBO,QAAQ,UAACE,KAAD;AACxB,UAAIA,KAAK,IAAIA,KAAK,CAACC,GAAnB,EAAwB;AACtBL,QAAAA,QAAQ,CAACM,GAAT,CAAaF,KAAK,CAACC,GAAnB,EAAwBD,KAAxB;AACD;AACF,MAJD;AAKD,IAND;AAOA,SAAOJ,QAAP;AACD;AAEM,IAAMO,WAAW,GAAG,SAAdA,WAAc,CAACC,IAAD;AAAwB,SAAC,CAAAA,IAAI,SAAJ,IAAAA,IAAI,WAAJ,SAAA,GAAAA,IAAI,CAAEC,UAAN,MAAoBD,IAAI,SAAJ,IAAAA,IAAI,WAAJ,SAAA,GAAAA,IAAI,CAAEE,QAA1B,MAAsCF,IAAI,SAAJ,IAAAA,IAAI,WAAJ,SAAA,GAAAA,IAAI,CAAEnE,MAA5C,CAAD;AAAoD,CAAhG;IACMsE,aAAa,GAAG,SAAhBA,aAAgB,CAAC7G,OAAD;AAAgD,SAACA,OAAO,CAAC8G,MAAR,IAAkBL,WAAW,CAACzG,OAAO,CAAC8G,MAAT,CAA9B;AAA+C;IAC/GC,mBAAmB,GAAG,SAAtBA,mBAAsB,CAAC/G,OAAD;AAAgD,SAAAgH,YAAM,CAAChH,OAAO,CAACiH,SAAR,IAAqB,CAAtB,EAAyB,GAAzB,CAAN;AAAmC;AAE/G,IAAMC,cAAc,GAAG,SAAjBA,cAAiB,CAAIC,CAAJ,EAAYC,CAAZ;AAC5B,MAAID,CAAC,KAAKC,CAAV,EAAa;AACX,WAAO,IAAP;AACD;;AACD,MAAID,CAAC,IAAI,IAAL,IAAaC,CAAC,IAAI,IAAtB,EAA4B;AAC1B,WAAO,KAAP;AACD;;AACD,MAAID,CAAC,CAACnE,MAAF,KAAaoE,CAAC,CAACpE,MAAnB,EAA2B;AACzB,WAAO,KAAP;AACD;;AAED,MAAMqE,OAAO,GAAGC,sCAAIH,QAAJ,CAAOI,IAAP,EAAhB;;AACA,MAAMC,OAAO,GAAGF,sCAAIF,QAAJ,CAAOG,IAAP,EAAhB;;AAEA,OAAK,IAAIE,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGJ,OAAO,CAACrE,MAA5B,EAAoC,EAAEyE,CAAtC,EAAyC;AACvC,QAAIJ,OAAO,CAACI,CAAD,CAAP,KAAeD,OAAO,CAACC,CAAD,CAA1B,EAA+B;AAC7B,aAAO,KAAP;AACD;AACF;;AACD,SAAO,IAAP;AACD,CApBM;AAqBA,IAAMC,QAAQ,GAAG,SAAXA,QAAW,CAAChB,IAAD;AAAyB,SAAA,CAAC,EAAEA,IAAI,CAACiB,kBAAL,IAA2BjB,IAAI,CAACC,UAAlC,CAAD;AAA8C,CAAxF;IAEMiB,uBAAuB,GAAG,SAA1BA,uBAA0B,CAACC,MAAD,EAA4B7H,OAA5B;;;AACrC,MAAI,CAAA6H,MAAM,SAAN,IAAAA,MAAM,WAAN,SAAA,GAAAA,MAAM,CAAElH,WAAR,KAAuBkH,MAAM,CAAClH,WAAP,KAAuBX,OAAO,CAACW,WAA1D,EAAuE;AACrE,WAAO,KAAP;AACD;;AACD,MAAI,CAAA,MAAAkH,MAAM,SAAN,IAAAA,MAAM,WAAN,SAAA,GAAAA,MAAM,CAAEC,WAAR,UAAA,iBAAA,SAAA,MAAqB9E,MAArB,IAA8B,CAAlC,EAAqC;AACnC,QAAM8E,WAAW,GAAGD,MAAM,CAACC,WAAP,CAAmB3E,MAAnB,CAA0B,UAAC4E,IAAD;AAAU,aAAAA,IAAI,KAAK,GAAT;AAAY,KAAhD,CAApB,CADmC;;AAGnC,QAAID,WAAW,CAAC9E,MAAZ,GAAqB,CAArB,IAA0B,CAAC8E,WAAW,CAACE,QAAZ,CAAqBhI,OAAO,CAACiI,UAA7B,CAA/B,EAAyE;AACvE,aAAO,KAAP;AACD;AACF;;AACD,MAAI,CAAAJ,MAAM,SAAN,IAAAA,MAAM,WAAN,SAAA,GAAAA,MAAM,CAAEK,aAAR,KAAyB,CAAA,MAAAL,MAAM,SAAN,IAAAA,MAAM,WAAN,SAAA,GAAAA,MAAM,CAAEK,aAAR,UAAA,iBAAA,SAAA,MAAuBlF,MAAvB,IAAgC,CAA7D,EAAgE;AAC9D,QAAI,CAAAhD,OAAO,SAAP,IAAAA,OAAO,WAAP,SAAA,GAAAA,OAAO,CAAEY,aAAT,EAAA,KAA4BZ,OAAO,CAACa,aAAR,EAAhC,EAAyD;AACvD,UAAMsH,aAAa,GAAInI,OAAqC,CAAC8G,MAAtC,IAAgD9G,OAAO,CAAC,SAAD,CAA9E;;AACA,UAAI,EAAC,MAAA6H,MAAM,SAAN,IAAAA,MAAM,WAAN,SAAA,GAAAA,MAAM,CAAEK,aAAR,UAAA,iBAAA,SAAA,MAAuBF,SAASG,aAAa,SAAb,IAAAA,aAAa,WAAb,SAAA,GAAAA,aAAa,CAAE5F,OAAhD,CAAJ,EAA6D;AAC3D,eAAO,KAAP;AACD;AACF,KALD,MAKO;AACL,aAAO,KAAP;AACD;AACF;;AACD,MAAI,EAACsF,MAAM,SAAN,IAAAA,MAAM,WAAN,SAAA,GAAAA,MAAM,CAAEO,wBAAT,MAAsC,CAAApI,OAAO,SAAP,IAAAA,OAAO,WAAP,SAAA,GAAAA,OAAO,CAAEqI,eAAT,MAA4BrI,OAAO,SAAP,IAAAA,OAAO,WAAP,SAAA,GAAAA,OAAO,CAAEsI,aAArC,CAAtC,CAAJ,EAA+F;AAC7F,WAAO,KAAP;AACD;;AACD,SAAO,IAAP;AACD;IAaYC,uBAAuB,GAAG,SAA1BA,uBAA0B,CAACV,MAAD,EAA2C9H,OAA3C,EAAkEyI,aAAlE;;;AACrC,MAAI,EAACX,MAAM,SAAN,IAAAA,MAAM,WAAN,SAAA,GAAAA,MAAM,CAAEY,YAAT,MAAyB1I,OAAO,SAAP,IAAAA,OAAO,WAAP,SAAA,GAAAA,OAAO,CAAE2I,WAAlC,KAAiD3I,OAAO,CAAC2I,WAAR,KAAwB,IAA7E,EAAmF;AACjF,WAAO,KAAP;AACD;;AACD,MAAI,CAAA,MAAAb,MAAM,SAAN,IAAAA,MAAM,WAAN,SAAA,GAAAA,MAAM,CAAEc,aAAR,UAAA,iBAAA,SAAA,MAAuBC,YAAvB,KAAuC,CAAA,MAAAf,MAAM,CAACc,aAAP,CAAqBE,aAArB,UAAA,iBAAA,SAAA,MAAoC7F,MAApC,IAA6C,CAAxF,EAA2F;AACzF,QAAM8F,YAAY,GAAGjB,MAAM,CAACc,aAA5B;AACA,QAAMI,aAAW,GAAGD,YAAY,CAACF,YAAjC;AACA,QAAMI,YAAY,GAAGF,YAAY,CAACD,aAAlC;;AACA,QAAIE,aAAW,IAAIC,YAAf,IAA+BA,YAAY,CAAChG,MAAb,GAAsB,CAAzD,EAA4D;AAC1D,UAAI,CAACgG,YAAY,CAACtG,IAAb,CAAkB,UAACuG,WAAD;AACrB,gBAAQA,WAAR;AACE,eAAK,cAAL;AAAqB;AACnB,qBAAOlJ,OAAO,CAACmJ,IAAR,CAAaC,WAAb,GAA2BnB,QAA3B,CAAoCe,aAAW,CAACI,WAAZ,EAApC,CAAP;AACD;;AACD,eAAK,iBAAL;AAAwB;AACtB,qBAAOpJ,OAAO,CAACqJ,OAAR,CAAgB1G,IAAhB,CAAqB,UAAC2G,MAAD;AAAoB,uBAAAA,MAAM,CAACzC,QAAP,CAAgBuC,WAAhB,GAA8BnB,QAA9B,CAAuCe,aAAW,CAACI,WAAZ,EAAvC,CAAA;AAAiE,eAA1G,CAAP;AACD;;AACD;AAAS;AACP,qBAAO,IAAP;AACD;AATH;AAWD,OAZI,CAAL,EAYI;AACF,eAAO,KAAP;AACD;AACF;AACF;;AACD,MAAI,CAAA,MAAA,MAAAtB,MAAM,SAAN,IAAAA,MAAM,WAAN,SAAA,GAAAA,MAAM,CAAEyB,cAAR,UAAA,iBAAA,SAAA,MAAwB7G,OAAxB,UAAA,iBAAA,SAAA,MAAiCO,MAAjC,IAA0C,CAA9C,EAAiD;AAC/C,QAAMuG,aAAa,GAAG1B,MAAM,CAACyB,cAA7B;AACQ,QAAAE,WAAW,GAAgBD,aAAa,YAAxC;AAAA,QAAaE,SAAS,GAAKF,aAAa,UAAxC;AACR,QAAM9G,OAAO,GAAa8G,aAAa,CAAC9G,OAAxC;AACA,QAAMiH,WAAS,GAAG3J,OAAO,CAACqJ,OAAR,CAAgBhG,GAAhB,CAAoB,UAACiG,MAAD;AAAoB,aAAAA,MAAM,CAAC9G,MAAP;AAAa,KAArD,CAAlB;;AACA,QAAI,CAACiH,WAAL,EAAkB;AAAE;AAClB,UAAI,CAAC/G,OAAO,CAACuF,QAAR,CAAiBQ,aAAjB,CAAL,EAAsC;AACpC/F,QAAAA,OAAO,CAACR,IAAR,CAAauG,aAAb,EADoC;AAErC;;AACD,UAAIzI,OAAO,CAACqJ,OAAR,CAAgBpG,MAAhB,GAAyBP,OAAO,CAACO,MAArC,EAA6C;AAC3C,eAAO,KAAP,CAD2C;AAE5C;;AACD,UAAI,CAACkE,cAAc,CAACzE,OAAD,EAAUiH,WAAV,CAAnB,EAAyC;AACvC,eAAO,KAAP;AACD;AACF,KAVD,MAUO,IAAIjH,OAAO,CAACO,MAAR,GAAiB,CAArB,EAAwB;AAAE;AAC/B,cAAQyG,SAAR;AACE,aAAK,KAAL;AAAY;AACV,gBAAIhH,OAAO,CAACC,IAAR,CAAa,UAACH,MAAD;AAAoB,qBAAA,CAACmH,WAAS,CAAC1B,QAAV,CAAmBzF,MAAnB,CAAD;AAA2B,aAA5D,CAAJ,EAAmE;AACjE,qBAAO,KAAP;AACD;;AACD;AACD;;AACD,aAAK,IAAL;AAAW;AACT,gBAAIE,OAAO,CAACkH,KAAR,CAAc,UAACpH,MAAD;AAAoB,qBAAA,CAACmH,WAAS,CAAC1B,QAAV,CAAmBzF,MAAnB,CAAD;AAA2B,aAA7D,CAAJ,EAAoE;AAClE,qBAAO,KAAP;AACD;;AACD;AACD;AAZH;AAiBD;AACF;;AACD,MAAI,CAAAsF,MAAM,SAAN,IAAAA,MAAM,WAAN,SAAA,GAAAA,MAAM,CAAEY,YAAR,MAAyB,KAAzB,IAAkC,CAAA1I,OAAO,SAAP,IAAAA,OAAO,WAAP,SAAA,GAAAA,OAAO,CAAE2I,WAAT,MAAyB,IAA/D,EAAqE;AACnE,WAAO,KAAP;AACD;;AACD,MAAI,CAAAb,MAAM,SAAN,IAAAA,MAAM,WAAN,SAAA,GAAAA,MAAM,CAAE+B,aAAR,MAA0B,KAA1B,IAAmC,CAAA7J,OAAO,SAAP,IAAAA,OAAO,WAAP,SAAA,GAAAA,OAAO,CAAE8J,QAAT,MAAsB,IAA7D,EAAmE;AACjE,WAAO,KAAP;AACD;;AACD,MAAI,CAAA,MAAAhC,MAAM,SAAN,IAAAA,MAAM,WAAN,SAAA,GAAAA,MAAM,CAAEiC,iBAAR,UAAA,iBAAA,SAAA,MAA2B9G,MAA3B,IAAoC,CAApC,IAAyC,CAAC6E,MAAM,CAACiC,iBAAP,CAAyB9B,QAAzB,CAAkCjI,OAAO,SAAP,IAAAA,OAAO,WAAP,SAAA,GAAAA,OAAO,CAAEkI,UAA3C,CAA9C,EAAsG;AACpG,WAAO,KAAP;AACD;;AACD,MAAI,CAAAJ,MAAM,SAAN,IAAAA,MAAM,WAAN,SAAA,GAAAA,MAAM,CAAEkC,0BAAR,KAAsC,CAAC,IAAIC,MAAJ,CAAW,MAAInC,MAAM,CAACkC,0BAAtB,EAAoDrG,IAApD,CAAyD3D,OAAO,SAAP,IAAAA,OAAO,WAAP,SAAA,GAAAA,OAAO,CAAEkI,UAAlE,CAA3C,EAA0H;AACxH,WAAO,KAAP;AACD;;AACD,MAAI,CAAAJ,MAAM,SAAN,IAAAA,MAAM,WAAN,SAAA,GAAAA,MAAM,CAAEoC,yBAAR,KAAqC,EAAC,MAAAlK,OAAO,SAAP,IAAAA,OAAO,WAAP,SAAA,GAAAA,OAAO,CAAEmJ,IAAT,UAAA,iBAAA,SAAA,MAAeC,cAAcnB,SAASH,MAAM,CAACoC,yBAAP,CAAiCd,WAAjC,GAAvC,CAAzC,EAAiI;AAC/H,WAAO,KAAP;AACD;;AACD,MAAItB,MAAM,SAAN,IAAAA,MAAM,WAAN,SAAA,GAAAA,MAAM,CAAEqC,sBAAZ,EAAoC;AAClC,QAAMC,qBAAmB,GAAGtC,MAAM,CAACqC,sBAAP,CAA8Bf,WAA9B,EAA5B;;AACA,QAAI,MAAApJ,OAAO,SAAP,IAAAA,OAAO,WAAP,SAAA,GAAAA,OAAO,CAAEqJ,OAAT,UAAA,iBAAA,SAAA,MAAkBO,MAAM,UAACN,MAAD;AAAoB,aAAA,CAACA,MAAM,CAACzC,QAAP,CAAgBuC,WAAhB,GAA8BnB,QAA9B,CAAuCmC,qBAAvC,CAAD;AAA4D,MAA5G,EAA+G;AAC7G,aAAO,KAAP;AACD;AACF;;AACD,MAAI,CAAA,MAAAtC,MAAM,SAAN,IAAAA,MAAM,WAAN,SAAA,GAAAA,MAAM,CAAEuC,iBAAR,UAAA,iBAAA,SAAA,MAA2BpH,MAA3B,IAAoC,CAApC,IAAyC,CAAC6E,MAAM,CAACuC,iBAAP,CAAyBpC,QAAzB,CAAkCjI,OAAO,SAAP,IAAAA,OAAO,WAAP,SAAA,GAAAA,OAAO,CAAEiB,GAA3C,CAA9C,EAA+F;AAC7F,WAAO,KAAP;AACD;;AACD,MAAI6G,MAAM,SAAN,IAAAA,MAAM,WAAN,SAAA,GAAAA,MAAM,CAAEwC,iBAAZ,EAA+B;AAC7B,YAAQxC,MAAM,CAACwC,iBAAf;AACE,WAAK,aAAL;AACE,YAAI,CAAAtK,OAAO,SAAP,IAAAA,OAAO,WAAP,SAAA,GAAAA,OAAO,CAAEuK,aAAT,MAA2B,QAA/B,EAAyC;AACvC,iBAAO,KAAP;AACD;;AACD;;AACF,WAAK,cAAL;AACE,YAAI,CAAAvK,OAAO,SAAP,IAAAA,OAAO,WAAP,SAAA,GAAAA,OAAO,CAAEuK,aAAT,MAA2B,SAA/B,EAA0C;AACxC,iBAAO,KAAP;AACD;;AACD;;AACF,WAAK,mBAAL;AACE,YAAI,CAAAvK,OAAO,SAAP,IAAAA,OAAO,WAAP,SAAA,GAAAA,OAAO,CAAEuK,aAAT,MAA2B,SAA3B,IAAwC,CAAC5C,QAAQ,CAAC3H,OAAO,CAACwK,OAAT,CAArD,EAAwE;AACtE,iBAAO,KAAP;AACD;;AACD;;AACF,WAAK,uBAAL;AACE,YAAI,CAAAxK,OAAO,SAAP,IAAAA,OAAO,WAAP,SAAA,GAAAA,OAAO,CAAEuK,aAAT,MAA2B,SAA3B,IAAwC5C,QAAQ,CAAC3H,OAAO,CAACwK,OAAT,CAApD,EAAuE;AACrE,iBAAO,KAAP;AACD;;AACD;AApBJ;AAsBD;;AACD,MAAI1C,MAAM,SAAN,IAAAA,MAAM,WAAN,SAAA,GAAAA,MAAM,CAAE2C,mBAAZ,EAAiC;AAC/B,YAAQ3C,MAAM,CAAC2C,mBAAf;AACE,WAAK,eAAL;AACE,YAAI,CAAAzK,OAAO,SAAP,IAAAA,OAAO,WAAP,SAAA,GAAAA,OAAO,CAAE0K,QAAT,KAAqB,CAAA1K,OAAO,SAAP,IAAAA,OAAO,WAAP,SAAA,GAAAA,OAAO,CAAE2K,WAAT,MAAyB,UAAlD,EAA8D;AAC5D,iBAAO,KAAP;AACD;;AACD;;AACF,WAAK,aAAL;AACE,YAAI,EAAC3K,OAAO,SAAP,IAAAA,OAAO,WAAP,SAAA,GAAAA,OAAO,CAAE0K,QAAV,CAAJ,EAAwB;AACtB,iBAAO,KAAP;AACD;;AACD;;AACF,WAAK,0BAAL;AACE,YAAI,EAAC1K,OAAO,SAAP,IAAAA,OAAO,WAAP,SAAA,GAAAA,OAAO,CAAE0K,QAAV,KAAsB,CAAA1K,OAAO,SAAP,IAAAA,OAAO,WAAP,SAAA,GAAAA,OAAO,CAAE2K,WAAT,MAAyB,0BAAnD,EAA+E;AAC7E,iBAAO,KAAP;AACD;;AACD;;AACF,WAAK,4BAAL;AACE,YAAI,EAAC3K,OAAO,SAAP,IAAAA,OAAO,WAAP,SAAA,GAAAA,OAAO,CAAE0K,QAAV,KAAsB,CAAA1K,OAAO,SAAP,IAAAA,OAAO,WAAP,SAAA,GAAAA,OAAO,CAAE2K,WAAT,MAAyB,4BAAnD,EAAiF;AAC/E,iBAAO,KAAP;AACD;;AACD;AApBJ;AAsBD;;AACD,MAAI7C,MAAM,SAAN,IAAAA,MAAM,WAAN,SAAA,GAAAA,MAAM,CAAE8C,mBAAZ,EAAiC;AAC/B,YAAQ9C,MAAM,CAAC8C,mBAAf;AACE,WAAK,gBAAL;AACE,YAAI,CAAA5K,OAAO,SAAP,IAAAA,OAAO,WAAP,SAAA,GAAAA,OAAO,CAAE6K,kBAAT,MAAgC,CAApC,EAAuC;AACrC,iBAAO,KAAP;AACD;;AACD;AALJ;AAOD;;AACD,MAAI/C,MAAM,SAAN,IAAAA,MAAM,WAAN,SAAA,GAAAA,MAAM,CAAEgD,mBAAZ,EAAiC;AAC/B,YAAQhD,MAAM,CAACgD,mBAAf;AACE,WAAK,QAAL;AACE,YAAI,EAAC9K,OAAO,SAAP,IAAAA,OAAO,WAAP,SAAA,GAAAA,OAAO,CAAE+K,QAAV,CAAJ,EAAwB;AACtB,iBAAO,KAAP;AACD;;AACD;;AACF,WAAK,SAAL;AACE,YAAI/K,OAAO,SAAP,IAAAA,OAAO,WAAP,SAAA,GAAAA,OAAO,CAAE+K,QAAb,EAAuB;AACrB,iBAAO,KAAP;AACD;;AACD;AAVJ;AAYD;;AACD,MAAIjD,MAAM,SAAN,IAAAA,MAAM,WAAN,SAAA,GAAAA,MAAM,CAAEkD,kBAAZ,EAAgC;AAC9B,YAAQlD,MAAM,CAACkD,kBAAf;AACE,WAAK,OAAL;AACE,YAAI,EAAChL,OAAO,SAAP,IAAAA,OAAO,WAAP,SAAA,GAAAA,OAAO,CAAEiL,OAAV,CAAJ,EAAuB;AACrB,iBAAO,KAAP;AACD;;AACD;;AACF,WAAK,UAAL;AACE,YAAIjL,OAAO,SAAP,IAAAA,OAAO,WAAP,SAAA,GAAAA,OAAO,CAAEiL,OAAb,EAAsB;AACpB,iBAAO,KAAP;AACD;;AACD;AAVJ;AAYD;;AACD,SAAO,IAAP;AACD;AAEM,IAAMC,YAAY,GAAG,SAAfA,YAAe,CAACC,IAAD,EAAsBC,MAAtB;AAC1B,MAAMC,KAAK,GAAGjH,IAAI,CAACG,KAAL,CAAW4G,IAAI,CAAClI,MAAL,GAAc,CAAzB,CAAd;;AACA,MAAIkI,IAAI,CAACE,KAAD,CAAJ,KAAgBD,MAApB,EAA4B;AAC1B,WAAOC,KAAP;AACD;;AACD,MAAMC,QAAQ,GAAGH,IAAI,CAACI,KAAL,CAAW,CAAX,EAAcF,KAAd,CAAjB;AACA,MAAMG,SAAS,GAAGL,IAAI,CAACI,KAAL,CAAWF,KAAK,GAAG,CAAnB,EAAsBF,IAAI,CAAClI,MAA3B,CAAlB;;AACA,MAAIkI,IAAI,CAACE,KAAD,CAAJ,GAAcD,MAAlB,EAA0B;AACxB,WAAOC,KAAK,GAAG,CAAR,IAAaG,SAAS,CAACvI,MAAV,KAAqB,CAArB,GAAyB,CAAzB,GAA6BiI,YAAY,CAACM,SAAD,EAAYJ,MAAZ,CAAtD,CAAP;AACD,GAFD,MAEO;AACL,WAAQE,QAAQ,CAACrI,MAAT,KAAoB,CAArB,GAA0BoI,KAA1B,GAAkCH,YAAY,CAACI,QAAD,EAAWF,MAAX,CAArD;AACD;AACF,CAZM;;IAcMK,8BAA8B,GAAG,SAAjCA,8BAAiC,CAACC,QAAD,EAAgC1L,OAAhC;;;AAC5C,MAAI0L,QAAQ,CAAC/I,IAAT,CAAc,UAACgJ,EAAD;AAAsB,WAAAA,EAAE,CAAC1K,GAAH,KAAWjB,OAAO,CAACiB,GAAnB;AAAsB,GAA1D,CAAJ,EAAiE;AAC/D,WAAOyK,QAAQ,CAACrI,GAAT,CAAa,UAACsI,EAAD;AAAsB,aAACA,EAAE,CAAC1K,GAAH,KAAWjB,OAAO,CAACiB,GAAnB,GAAyBjB,OAAzB,GAAmC2L,EAApC;AAAuC,KAA1E,CAAP;AACD;;AACD,MAAMC,WAAW,GAAGV,YAAY,CAC9BQ,QAAQ,CAACrI,GAAT,CAAa,UAACrD,OAAD;;;AAA2B,WAAA,CAAA,MAAAA,OAAO,SAAP,IAAAA,OAAO,WAAP,SAAA,GAAAA,OAAO,CAAE2I,WAAT,UAAA,iBAAA,SAAA,MAAsBzB,SAAtB,MAAmClH,OAAO,SAAP,IAAAA,OAAO,WAAP,SAAA,GAAAA,OAAO,CAAEkH,SAA5C,CAAA;AAAqD,GAA7F,CAD8B,EAE9B,CAAA,MAAAlH,OAAO,SAAP,IAAAA,OAAO,WAAP,SAAA,GAAAA,OAAO,CAAE2I,WAAT,UAAA,iBAAA,SAAA,MAAsBzB,SAAtB,MAAmClH,OAAO,SAAP,IAAAA,OAAO,WAAP,SAAA,GAAAA,OAAO,CAAEkH,SAA5C,CAF8B,CAAhC;AAIA,mHAAWwE,QAAQ,CAACH,KAAT,CAAe,CAAf,EAAkBK,WAAlB,WAAgC5L,kBAAY0L,QAAQ,CAACH,KAAT,CAAeK,WAAf,EAA4BF,QAAQ,CAACzI,MAArC,QAAvD;AACD;;ICljBK4I,UAAU,gBAAGnP,yBAAK,CAACoP,UAAN,CAAiB,UAAC9O,KAAD,EAAQ+O,GAAR,EAAgB;AAClD,MACE7O,SADF,GAUIF,KAVJ,CACEE,SADF;AAAA,MAEED,QAFF,GAUID,KAVJ,CAEEC,QAFF;AAAA,MAGE+O,QAHF,GAUIhP,KAVJ,CAGEgP,QAHF;AAAA,MAIEC,KAJF,GAUIjP,KAVJ,CAIEiP,KAJF;AAAA,MAKEC,MALF,GAUIlP,KAVJ,CAKEkP,MALF;AAAA,MAME5M,IANF,GAUItC,KAVJ,CAMEsC,IANF;AAAA,MAOE6M,QAPF,GAUInP,KAVJ,CAOEmP,OAPF;AAAA,MAQEC,OARF,GAUIpP,KAVJ,CAQEoP,MARF;AAAA,MASElH,KATF,GAUIlI,KAVJ,CASEkI,KATF;;AAYA,kBAA8BmH,cAAQ,CAAC,EAAD,CAAtC;AAAA;AAAA,MAAOC,OAAP;AAAA,MAAgBC,UAAhB;;AAEA;AAAA;AACE;AACA;AACE,MAAA,SAAS,EAAE,iDACLvK,KAAK,CAACC,OAAN,CAAc/E,SAAd,IAA2BA,SAA3B,GAAuC,CAACA,SAAD,CADlC,IAET,qBAFS,EAGToP,OAHS,GAIThK,IAJS,CAIJ,GAJI,CADb;AAME,MAAA,QAAQ,EAAE0J,QANZ;AAOE,MAAA,GAAG,EAAED,GAPP;AAQE,MAAA,IAAI,EAAEzM,IARR;AAAA;AASE,MAAA,KAAK,4EACA4F,KADA;AAEHgH,QAAAA,MAAM,EAANA,MAFG;AAGHD,QAAAA,KAAK,EAALA;AAHG,QATP;AAcE,MAAA,OAAO,EAAE,iBAACO,CAAD,EAAO;AACd,YAAIR,QAAJ,EAAc;AAAE;AAAS;;AACzBO,QAAAA,UAAU,CAAC,8BAAD,CAAV;;AACAJ,QAAAA,QAAO,CAACK,CAAD,CAAP;AACD,OAlBH;AAmBE,MAAA,MAAM,EAAE,gBAACA,CAAD,EAAO;AACbD,QAAAA,UAAU,CAAC,EAAD,CAAV;;AACAH,QAAAA,OAAM,CAACI,CAAD,CAAN;AACD;AAtBH,oBAwBE9P;AAAM,MAAA,SAAS,EAAC;AAAhB,OACGO,QADH,CAxBF;AAFF;AA+BD,CA9CkB;AAgDnB4O,UAAU,CAAC1O,SAAX,GAAuB;AACrBD,EAAAA,SAAS,EAAEE,6BAAS,CAACC,SAAV,CAAoB,CAC7BD,6BAAS,CAACQ,MADmB,EAE7BR,6BAAS,CAACG,OAAV,CAAkBH,6BAAS,CAACQ,MAA5B,CAF6B,CAApB,CADU;AAKrBX,EAAAA,QAAQ,EAAEG,6BAAS,CAACC,SAAV,CAAoB,CAC5BD,6BAAS,CAACE,OADkB,EAE5BF,6BAAS,CAACG,OAAV,CAAkBH,6BAAS,CAACE,OAA5B,CAF4B,EAG5BF,6BAAS,CAACI,GAHkB,CAApB,EAIPC,UATkB;AAUrBuO,EAAAA,QAAQ,EAAE5O,6BAAS,CAACM,IAVC;AAWrBuO,EAAAA,KAAK,EAAE7O,6BAAS,CAACQ,MAXI;AAYrBsO,EAAAA,MAAM,EAAE9O,6BAAS,CAACQ,MAZG;AAarB0B,EAAAA,IAAI,EAAElC,6BAAS,CAACQ,MAbK;AAcrBuO,EAAAA,OAAO,EAAE/O,6BAAS,CAACO,IAdE;AAerByO,EAAAA,MAAM,EAAEhP,6BAAS,CAACO,IAfG;AAgBrBuH,EAAAA,KAAK,EAAE9H,6BAAS,CAACqP,KAAV,CAAgB,EAAhB;AAhBc,CAAvB;AAmBAZ,UAAU,CAAChO,YAAX,GAA0B;AACxBX,EAAAA,SAAS,EAAE,EADa;AAExB8O,EAAAA,QAAQ,EAAE,KAFc;AAGxBC,EAAAA,KAAK,EAAE,MAHiB;AAIxBC,EAAAA,MAAM,EAAE,MAJgB;AAKxB5M,EAAAA,IAAI,EAAE,QALkB;AAMxB6M,EAAAA,OAAO,EAAE,mBAAM,EANS;AAOxBC,EAAAA,MAAM,EAAE,kBAAM,EAPU;AAQxBlH,EAAAA,KAAK,EAAE;AARiB,CAA1B;;ACxEA;IAGawH,UAAU,GAAG;;ICHbC,IAAI,GAAG;AAClBC,EAAAA,OAAO,EAAE,SADS;AAElBC,EAAAA,SAAS,EAAE,WAFO;AAGlBC,EAAAA,MAAM,EAAE,QAHU;AAIlBC,EAAAA,QAAQ,EAAE;AAJQ;AAOb,IAAMC,IAAI,GAAG;AAClBC,EAAAA,GAAG,EAAE,KADa;AAElBC,EAAAA,KAAK,EAAE;AAFW,CAAb;;ACLA,SAASC,qBAAT,CAA+B7N,IAA/B,EAAqC;AAC1C,UAAQA,IAAR;AACE,SAAKqN,IAAI,CAACC,OAAV;AAAmB,aAAO,0BAAP;;AACnB,SAAKD,IAAI,CAACE,SAAV;AAAqB,aAAO,4BAAP;;AACrB,SAAKF,IAAI,CAACG,MAAV;AAAkB,aAAO,yBAAP;;AAClB,SAAKH,IAAI,CAACI,QAAV;AAAoB,aAAO,2BAAP;;AACpB;AAAS,aAAO,IAAP;AALX;AAOD;AAEM,SAASK,qBAAT,CAA+BC,IAA/B,EAAqC;AAC1C,UAAQA,IAAR;AACE,SAAKL,IAAI,CAACC,GAAV;AAAe,aAAO,sBAAP;;AACf,SAAKD,IAAI,CAACE,KAAV;AAAiB,aAAO,wBAAP;;AACjB;AAAS,aAAO,IAAP;AAHX;AAKD;;ACVc,SAASI,MAAT,OAOZ;AAAA,MANDpQ,SAMC,QANDA,SAMC;AAAA,MALDoC,IAKC,QALDA,IAKC;AAAA,MAJD+N,IAIC,QAJDA,IAIC;AAAA,MAHDpQ,QAGC,QAHDA,QAGC;AAAA,MAFD+O,QAEC,QAFDA,QAEC;AAAA,MADDG,OACC,QADDA,OACC;AACD,MAAMoB,mBAAmB,GAAG,iDACrBvL,KAAK,CAACC,OAAN,CAAc/E,SAAd,CAAD,GAA6BA,SAA7B,GAAyC,CAACA,SAAD,CADnB,IAE1B,iBAF0B,EAGzB8O,QAAQ,GAAG,2BAAH,GAAiC,EAHhB,EAI1BmB,qBAAqB,CAAC7N,IAAD,CAJK,EAK1B8N,qBAAqB,CAACC,IAAD,CALK,GAM1B/K,IAN0B,CAMrB,GANqB,CAA5B;AAQA,sBACE5F;AACE,IAAA,SAAS,EAAE6Q,mBADb;AAEE,IAAA,IAAI,EAAC,QAFP;AAGE,IAAA,OAAO,EAAEpB,OAHX;AAIE,IAAA,QAAQ,EAAEH;AAJZ,kBAMEtP,wCAAC8Q,WAAD;AACE,IAAA,SAAS,EAAC,uBADZ;AAEE,IAAA,IAAI,EAAEC,qBAAe,CAACC,QAFxB;AAGE,IAAA,KAAK,EAAEC,iBAAW,CAACC;AAHrB,KAKG3Q,QALH,CANF,CADF;AAgBD;IAEY4Q,WAAW,GAAGlB;IACdmB,WAAW,GAAGd;AAE3BM,MAAM,CAACnQ,SAAP,GAAmB;AACjBD,EAAAA,SAAS,EAAEE,6BAAS,CAACC,SAAV,CAAoB,CAC7BD,6BAAS,CAACQ,MADmB,EAE7BR,6BAAS,CAACG,OAAV,CAAkBH,6BAAS,CAACQ,MAA5B,CAF6B,CAApB,CADM;AAKjB0B,EAAAA,IAAI,EAAElC,6BAAS,CAAC2Q,KAAV,CAAgBC,MAAM,CAACC,IAAP,CAAYtB,IAAZ,CAAhB,CALW;AAMjBU,EAAAA,IAAI,EAAEjQ,6BAAS,CAAC2Q,KAAV,CAAgBC,MAAM,CAACC,IAAP,CAAYjB,IAAZ,CAAhB,CANW;AAOjB/P,EAAAA,QAAQ,EAAEG,6BAAS,CAACC,SAAV,CAAoB,CAC5BD,6BAAS,CAACQ,MADkB,EAE5BR,6BAAS,CAACE,OAFkB,EAG5BF,6BAAS,CAACG,OAAV,CAAkBH,6BAAS,CAACE,OAA5B,CAH4B,CAApB,CAPO;AAYjB0O,EAAAA,QAAQ,EAAE5O,6BAAS,CAACM,IAZH;AAajByO,EAAAA,OAAO,EAAE/O,6BAAS,CAACO;AAbF,CAAnB;AAgBA2P,MAAM,CAACzP,YAAP,GAAsB;AACpBX,EAAAA,SAAS,EAAE,EADS;AAEpBoC,EAAAA,IAAI,EAAEqN,IAAI,CAACC,OAFS;AAGpBS,EAAAA,IAAI,EAAEL,IAAI,CAACC,GAHS;AAIpBhQ,EAAAA,QAAQ,EAAE,QAJU;AAKpB+O,EAAAA,QAAQ,EAAE,KALU;AAMpBG,EAAAA,OAAO,EAAE,mBAAM;AANK,CAAtB;;AChDO,IAAM+B,WAAW,GAAG,SAAdA,WAAc;AAAA,MAAGC,SAAH,QAAGA,SAAH;AAAA,sBACzBzR;AAAK,IAAA,SAAS,EAAC;AAAf,kBACEA,wCAAC8Q,WAAD;AAAO,IAAA,IAAI,EAAEC,qBAAe,CAACW,GAA7B;AAAkC,IAAA,KAAK,EAAET,iBAAW,CAACU;AAArD,KACGF,SADH,CADF,CADyB;AAAA,CAApB;AAOPD,WAAW,CAAC/Q,SAAZ,GAAwB;AACtBgR,EAAAA,SAAS,EAAE/Q,6BAAS,CAACQ,MAAV,CAAiBH;AADN,CAAxB;AAIO,IAAM6Q,SAAS,GAAG,SAAZA,SAAY;AAAA,MAAGrR,QAAH,SAAGA,QAAH;AAAA,sBACvBP;AAAK,IAAA,SAAS,EAAC;AAAf,KAAuCO,QAAvC,CADuB;AAAA,CAAlB;AAGPqR,SAAS,CAACnR,SAAV,GAAsB;AACpBF,EAAAA,QAAQ,EAAEG,6BAAS,CAACC,SAAV,CAAoB,CAC5BD,6BAAS,CAACE,OAAV,CAAkBG,UADU,EAE5BL,6BAAS,CAACG,OAAV,CAAkBH,6BAAS,CAACE,OAAV,CAAkBG,UAApC,CAF4B,CAApB;AADU,CAAtB;AAMA6Q,SAAS,CAACzQ,YAAV,GAAyB;AACvBZ,EAAAA,QAAQ,EAAE;AADa,CAAzB;AAIO,IAAMsR,WAAW,GAAG,SAAdA,WAAc,QAMrB;AAAA,MALJC,QAKI,SALJA,QAKI;AAAA,MAJJC,QAII,SAJJA,QAII;AAAA,6BAHJzC,QAGI;AAAA,MAHJA,QAGI,+BAHO,KAGP;AAAA,MAFJ0C,UAEI,SAFJA,UAEI;AAAA,MADJpP,IACI,SADJA,IACI;;AACJ,oBAAsBqP,gBAAU,CAACC,uCAAD,CAAhC;AAAA,MAAQ7L,SAAR,eAAQA,SAAR;;AACA,sBACErG;AAAK,IAAA,SAAS,EAAC;AAAf,kBACEA,wCAAC,MAAD;AAAQ,IAAA,IAAI,EAAEmR,WAAW,CAAChB,SAA1B;AAAqC,IAAA,OAAO,EAAE4B;AAA9C,kBACE/R,wCAAC8Q,WAAD;AAAO,IAAA,IAAI,EAAEC,qBAAe,CAACC,QAA7B;AAAuC,IAAA,KAAK,EAAEC,iBAAW,CAACU;AAA1D,KACGtL,SAAS,CAAC8L,cADb,CADF,CADF,eAMEnS,wCAAC,MAAD;AAAQ,IAAA,IAAI,EAAE4C,IAAd;AAAoB,IAAA,QAAQ,EAAE0M,QAA9B;AAAwC,IAAA,OAAO,EAAEwC;AAAjD,KACGE,UADH,CANF,CADF;AAYD,CApBM;AAsBPH,WAAW,CAACpR,SAAZ,GAAwB;AACtBsR,EAAAA,QAAQ,EAAErR,6BAAS,CAACO,IAAV,CAAeF,UADH;AAEtB+Q,EAAAA,QAAQ,EAAEpR,6BAAS,CAACO,IAAV,CAAeF,UAFH;AAGtBiR,EAAAA,UAAU,EAAEtR,6BAAS,CAACQ,MAAV,CAAiBH,UAHP;AAItBuO,EAAAA,QAAQ,EAAE5O,6BAAS,CAACM,IAJE;AAKtB4B,EAAAA,IAAI,EAAElC,6BAAS,CAACQ;AALM,CAAxB;AAOA2Q,WAAW,CAAC1Q,YAAZ,GAA2B;AACzBmO,EAAAA,QAAQ,EAAE,KADe;AAEzB1M,EAAAA,IAAI,EAAEuO,WAAW,CAACf;AAFO,CAA3B;AAKe,SAASgC,KAAT,CAAe9R,KAAf,EAAsB;AACnC,MACEC,QADF,GASID,KATJ,CACEC,QADF;AAAA,MAEEwR,QAFF,GASIzR,KATJ,CAEEyR,QAFF;AAAA,MAGED,QAHF,GASIxR,KATJ,CAGEwR,QAHF;AAAA,MAIExC,QAJF,GASIhP,KATJ,CAIEgP,QAJF;AAAA,MAKE0C,UALF,GASI1R,KATJ,CAKE0R,UALF;AAAA,MAMEP,SANF,GASInR,KATJ,CAMEmR,SANF;AAAA,MAOEY,UAPF,GASI/R,KATJ,CAOE+R,UAPF;AAAA,MAQEzP,IARF,GASItC,KATJ,CAQEsC,IARF;AAUA,sBAAO0P,qBAAY,eACjBtS;AAAK,IAAA,SAAS,EAAC;AAAf,kBACEA;AAAK,IAAA,SAAS,EAAC;AAAf,kBACEA,wCAAC,WAAD;AAAa,IAAA,SAAS,EAAEyR;AAAxB,IADF,eAEEzR,wCAAC,SAAD,QAAYO,QAAZ,CAFF,EAII,CAAC8R,UAAD,iBACErS,wCAAC,WAAD;AACE,IAAA,QAAQ,EAAEsP,QADZ;AAEE,IAAA,QAAQ,EAAEyC,QAFZ;AAGE,IAAA,QAAQ,EAAED,QAHZ;AAIE,IAAA,UAAU,EAAEE,UAJd;AAKE,IAAA,IAAI,EAAEpP;AALR,IALN,eAcE5C;AAAK,IAAA,SAAS,EAAC;AAAf,kBACEA,wCAAC,UAAD;AACE,IAAA,KAAK,EAAC,MADR;AAEE,IAAA,MAAM,EAAC,MAFT;AAGE,IAAA,OAAO,EAAE+R;AAHX,kBAKE/R,wCAACuS,UAAD;AACE,IAAA,IAAI,EAAEC,eAAS,CAACC,KADlB;AAEE,IAAA,SAAS,EAAEC,gBAAU,CAACC,OAFxB;AAGE,IAAA,KAAK,EAAC,MAHR;AAIE,IAAA,MAAM,EAAC;AAJT,IALF,CADF,CAdF,CADF,eA8BE3S;AAAK,IAAA,SAAS,EAAC;AAAf,IA9BF,CADiB,EAiChBmI,QAAQ,CAACyK,cAAT,CAAwB5C,UAAxB,CAjCgB,CAAnB;AAkCD;AAEDoC,KAAK,CAAC3R,SAAN,GAAkB;AAChBF,EAAAA,QAAQ,EAAEG,6BAAS,CAACC,SAAV,CAAoB,CAC5BD,6BAAS,CAACE,OADkB,EAE5BF,6BAAS,CAACG,OAAV,CAAkBH,6BAAS,CAACE,OAA5B,CAF4B,CAApB,CADM;AAKhBmR,EAAAA,QAAQ,EAAErR,6BAAS,CAACO,IAAV,CAAeF,UALT;AAMhB+Q,EAAAA,QAAQ,EAAEpR,6BAAS,CAACO,IAAV,CAAeF,UANT;AAOhBsR,EAAAA,UAAU,EAAE3R,6BAAS,CAACM,IAPN;AAQhBsO,EAAAA,QAAQ,EAAE5O,6BAAS,CAACM,IARJ;AAShB4B,EAAAA,IAAI,EAAElC,6BAAS,CAACQ;AATA,CAAlB;AAWAkR,KAAK,CAACjR,YAAN,GAAqB;AACnBZ,EAAAA,QAAQ,EAAE,IADS;AAEnB8R,EAAAA,UAAU,EAAE,KAFO;AAGnB/C,EAAAA,QAAQ,EAAE,KAHS;AAInB1M,EAAAA,IAAI,EAAEuO,WAAW,CAACf;AAJC,CAArB;;IC/HayC,MAAM,GAAG;AACpBlB,EAAAA,cAAc,EAAE,gBADI;AAEpBmB,EAAAA,cAAc,EAAE,gBAFI;AAGpBC,EAAAA,cAAc,EAAE,gBAHI;AAIpBC,EAAAA,cAAc,EAAE,gBAJI;AAKpB9B,EAAAA,WAAW,EAAE,aALO;AAMpBhB,EAAAA,OAAO,EAAE,SANW;AAOpB+C,EAAAA,KAAK,EAAE;AAPa;AAUf,SAASC,sBAAT,CAAgCC,KAAhC,EAAuC;AAC5C,UAAQA,KAAR;AACE,SAAKN,MAAM,CAAClB,cAAZ;AAA4B,aAAO,gCAAP;;AAC5B,SAAKkB,MAAM,CAACC,cAAZ;AAA4B,aAAO,gCAAP;;AAC5B,SAAKD,MAAM,CAACE,cAAZ;AAA4B,aAAO,gCAAP;;AAC5B,SAAKF,MAAM,CAACG,cAAZ;AAA4B,aAAO,gCAAP;;AAC5B,SAAKH,MAAM,CAAC3B,WAAZ;AAAyB,aAAO,6BAAP;;AACzB,SAAK2B,MAAM,CAAC3C,OAAZ;AAAqB,aAAO,yBAAP;;AACrB,SAAK2C,MAAM,CAACI,KAAZ;AAAmB,aAAO,uBAAP;;AACnB;AAAS,aAAO,IAAP;AARX;AAUD;;ACjBc,SAASG,UAAT,OAOZ;AAAA,MAND5S,SAMC,QANDA,SAMC;AAAA,MALD2S,KAKC,QALDA,KAKC;AAAA,MAJD7D,QAIC,QAJDA,QAIC;AAAA,MAHD+D,YAGC,QAHDA,YAGC;AAAA,MAFD5D,OAEC,QAFDA,OAEC;AAAA,MADDlP,QACC,QADDA,QACC;AACD,sBACEP;AACE,IAAA,SAAS,EAAE,iDACLsF,KAAK,CAACC,OAAN,CAAc/E,SAAd,IAA2BA,SAA3B,GAAuC,CAACA,SAAD,CADlC,IAET0S,sBAAsB,CAACC,KAAD,CAFb,EAGTE,YAAY,GAAG,oCAAH,GAA0C,qBAH7C,EAIT/D,QAAQ,GAAG,+BAAH,GAAqC,EAJpC,GAKT1J,IALS,CAKJ,GALI,CADb;AAOE,IAAA,IAAI,EAAC,QAPP;AAQE,IAAA,QAAQ,EAAE,CARZ;AASE,IAAA,OAAO,EAAE6J,OATX;AAUE,IAAA,UAAU,EAAEA;AAVd,KAYGlP,QAZH,CADF;AAgBD;AAED6S,UAAU,CAAC3S,SAAX,GAAuB;AACrBD,EAAAA,SAAS,EAAEE,6BAAS,CAACC,SAAV,CAAoB,CAC7BD,6BAAS,CAACQ,MADmB,EAE7BR,6BAAS,CAACG,OAAV,CAAkBH,6BAAS,CAACQ,MAA5B,CAF6B,CAApB,CADU;AAKrBiS,EAAAA,KAAK,EAAEzS,6BAAS,CAACQ,MALI;AAMrBoO,EAAAA,QAAQ,EAAE5O,6BAAS,CAACM,IANC;AAOrBqS,EAAAA,YAAY,EAAE3S,6BAAS,CAACM,IAPH;AAQrByO,EAAAA,OAAO,EAAE/O,6BAAS,CAACO,IARE;AASrBV,EAAAA,QAAQ,EAAEG,6BAAS,CAACC,SAAV,CAAoB,CAC5BD,6BAAS,CAACQ,MADkB,EAE5BR,6BAAS,CAACE,OAFkB,CAApB,EAGPG;AAZkB,CAAvB;AAeAqS,UAAU,CAACjS,YAAX,GAA0B;AACxBX,EAAAA,SAAS,EAAE,EADa;AAExB2S,EAAAA,KAAK,EAAEN,MAAM,CAAClB,cAFU;AAGxBrC,EAAAA,QAAQ,EAAE,KAHc;AAIxB+D,EAAAA,YAAY,EAAE,KAJU;AAKxB5D,EAAAA,OAAO,EAAE,mBAAM;AALS,CAA1B;;IC9Ca6D,kBAAkB,GAAG;IACrBC,iBAAiB,GAAG;IACpBC,iBAAiB,GAAG;IACpBC,mBAAmB,GAAG;IACtBC,cAAc,GAAG;IACjBC,aAAa,GAAG;IAChBC,cAAc,GAAG;;ICLjBC,MAAM,GAAG,SAATA,MAAS,CAACC,KAAD,EAAW;AAC/B,sBAAwBA,KAAxB,CAAQC,MAAR;AAAA,MAAQA,MAAR,8BAAiB,EAAjB;AACA,yBAA0BA,MAA1B,CAAQC,QAAR;AAAA,MAAQA,QAAR,iCAAmB,EAAnB;AACA,MAAQC,GAAR,GAAgBD,QAAhB,CAAQC,GAAR;AACA,SAAOA,GAAP;AACD;AAEM,IAAMC,SAAS,GAAG,SAAZA,SAAY,CAACJ,KAAD,EAAW;AAClC,sBAAwBA,KAAxB,CAAQK,MAAR;AAAA,MAAQA,MAAR,8BAAiB,EAAjB;AACA,MAAQC,MAAR,GAAmBD,MAAnB,CAAQC,MAAR;AACA,SAAOA,MAAP;AACD,CAJM;AAOP;;AACO,IAAMC,UAAU,GAAG,SAAbA,UAAa,CAACP,KAAD;AAAA,SAAW,UAAChO,MAAD,EAASwO,WAAT;AAAA,WAAyB,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AAC7F,UAAMR,GAAG,GAAGJ,MAAM,CAACC,KAAD,CAAlB;;AACA,UAAI,CAACG,GAAL,EAAU;AACRQ,QAAAA,MAAM,CAAC,IAAIC,KAAJ,CAAU,eAAV,CAAD,CAAN;AACD;;AACD,UAAI,CAACJ,WAAL,EAAkB;AAChBL,QAAAA,GAAG,CAACU,OAAJ,CAAY7O,MAAZ,EACG8O,IADH,CACQ,UAACC,GAAD;AAAA,iBAASL,OAAO,CAACK,GAAD,CAAhB;AAAA,SADR,EAEGC,KAFH,CAES,UAACC,GAAD;AAAA,iBAASN,MAAM,CAACM,GAAD,CAAf;AAAA,SAFT;AAGD,OAJD,MAIO;AACLd,QAAAA,GAAG,CAACU,OAAJ,CAAY7O,MAAZ,EAAoBwO,WAApB,EACGM,IADH,CACQ,UAACC,GAAD;AAAA,iBAASL,OAAO,CAACK,GAAD,CAAhB;AAAA,SADR,EAEGC,KAFH,CAES,UAACC,GAAD;AAAA,iBAASN,MAAM,CAACM,GAAD,CAAf;AAAA,SAFT;AAGD;AACF,KAd6D,CAAzB;AAAA,GAAX;AAAA,CAAnB;;AAiBA,IAAMC,aAAa,GAAG,SAAhBA,aAAgB,CAAClB,KAAD;AAAA,SAAW;AAAA,WAAM,IAAIS,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AAC7E,UAAMR,GAAG,GAAGJ,MAAM,CAACC,KAAD,CAAlB;;AACA,UAAI,CAACG,GAAL,EAAU;AACRQ,QAAAA,MAAM,CAAC,IAAIC,KAAJ,CAAU,eAAV,CAAD,CAAN;AACD;;AACDT,MAAAA,GAAG,CAACgB,UAAJ,GACGL,IADH,CACQ,UAACC,GAAD;AAAA,eAASL,OAAO,CAACK,GAAD,CAAhB;AAAA,OADR,EAEGC,KAFH,CAES,UAACC,GAAD;AAAA,eAASN,MAAM,CAACM,GAAD,CAAf;AAAA,OAFT;AAGD,KAR6C,CAAN;AAAA,GAAX;AAAA,CAAtB;AAWP;AACA;;AACO,IAAMG,iBAAiB,GAAG,SAApBA,iBAAoB,CAACpB,KAAD;AAAA,SAAW,UAACqB,QAAD,EAAWC,UAAX;AAAA,WAA0B,IAAIb,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACrG,UAAMR,GAAG,GAAGJ,MAAM,CAACC,KAAD,CAAlB;;AACA,UAAI,CAACG,GAAL,EAAU;AACRQ,QAAAA,MAAM,CAAC,IAAIC,KAAJ,CAAU,eAAV,CAAD,CAAN;AACD;;AACDT,MAAAA,GAAG,CAACoB,qBAAJ,CAA0BF,QAA1B,EAAoCC,UAApC,EACGR,IADH,CACQ,UAACC,GAAD;AAAA,eAASL,OAAO,CAACK,GAAD,CAAhB;AAAA,OADR,EAEGC,KAFH,CAES,UAACC,GAAD;AAAA,eAASN,MAAM,CAACM,GAAD,CAAf;AAAA,OAFT;AAGD,KARqE,CAA1B;AAAA,GAAX;AAAA,CAA1B;AAUA,IAAMO,kBAAkB,GAAG,SAArBA,kBAAqB,CAACxB,KAAD;AAAA,SAAW,UAACyB,UAAD,EAAaC,iBAAb,EAAmC;AAC9E,QAAMvB,GAAG,GAAGJ,MAAM,CAACC,KAAD,CAAlB;AACA,QAAM2B,MAAM,GAAGvB,SAAS,CAACJ,KAAD,CAAxB;AACA,WAAO,IAAIS,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACtC,UAAI,CAACR,GAAL,EAAU;AACRQ,QAAAA,MAAM,CAAC,IAAIC,KAAJ,CAAU,eAAV,CAAD,CAAN;AACD;;AACDT,MAAAA,GAAG,CAACyB,YAAJ,CAAiBC,UAAjB,CAA4BJ,UAA5B,EACGX,IADH,CACQ,UAACtR,OAAD,EAAa;AACjB,YAAMsS,SAAS,GAAG,SAAZA,SAAY,GAAM;AACtB,cAAIC,UAAU,GAAG,IAAjB;AACA,cAAMC,cAAc,GAAG,IAAIvB,OAAJ,CAAY,UAACwB,QAAD,EAAWC,OAAX,EAAuB;AACxDH,YAAAA,UAAU,GAAGvS,OAAO,CAAC2S,eAAR,CAAwBT,iBAAxB,EAA2C,UAACX,GAAD,EAAME,GAAN,EAAc;AACpE,kBAAMmB,UAAU,GAAGjC,GAAG,CAACkC,qBAAJ,EAAnB;AACA,kBAAI5S,OAAO,GAAGsR,GAAd;AACA,kBAAIuB,KAAK,GAAGrB,GAAZ;;AACA,kBAAImB,UAAJ,EAAgB;AACd3S,gBAAAA,OAAO,GAAGwR,GAAV;AACAqB,gBAAAA,KAAK,GAAGvB,GAAR;AACD;;AACD,kBAAIuB,KAAJ,EAAW;AACTJ,gBAAAA,OAAO,CAACI,KAAD,CAAP;AACA;AACD;;AACDL,cAAAA,QAAQ,CAACxS,OAAD,CAAR;AACAkS,cAAAA,MAAM,CAACY,OAAP,CACEC,iBADF,EAEE;AACE/S,gBAAAA,OAAO,EAAPA,OADF;AAEED,gBAAAA,OAAO,EAAPA;AAFF,eAFF;AAOD,aApBY,CAAb;AAqBAmS,YAAAA,MAAM,CAACY,OAAP,CACEC,kBADF,EAEE;AACE/S,cAAAA,OAAO,EAAEsS,UADX;AAEEvS,cAAAA,OAAO,EAAPA;AAFF,aAFF;AAOD,WA7BsB,CAAvB;;AA8BAwS,UAAAA,cAAc,CAAClP,GAAf,GAAqB;AAAA,mBAAMiP,UAAN;AAAA,WAArB;;AACA,iBAAOC,cAAP;AACD,SAlCD;;AAmCAtB,QAAAA,OAAO,CAACoB,SAAS,EAAV,CAAP;AACD,OAtCH,EAuCGd,KAvCH,CAuCSL,MAvCT;AAwCD,KA5CM,CAAP;AA6CD,GAhDiC;AAAA,CAA3B;AAiDA,IAAM8B,kBAAkB,GAAG,SAArBA,kBAAqB,CAACzC,KAAD;AAAA,SAAW,UAACyB,UAAD,EAAaiB,iBAAb,EAAmC;AAC9E,QAAMvC,GAAG,GAAGJ,MAAM,CAACC,KAAD,CAAlB;AACA,QAAM2B,MAAM,GAAGvB,SAAS,CAACJ,KAAD,CAAxB;AACA,WAAO,IAAIS,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACtC,UAAI,CAACR,GAAL,EAAU;AACRQ,QAAAA,MAAM,CAAC,IAAIC,KAAJ,CAAU,eAAV,CAAD,CAAN;AACD;;AACDT,MAAAA,GAAG,CAACyB,YAAJ,CAAiBC,UAAjB,CAA4BJ,UAA5B,EACGX,IADH,CACQ,UAACtR,OAAD,EAAa;AACjB,YAAMsS,SAAS,GAAG,SAAZA,SAAY,GAAM;AACtB,cAAIC,UAAU,GAAG,IAAjB;AACA,cAAMC,cAAc,GAAG,IAAIvB,OAAJ,CAAY,UAACwB,QAAD,EAAWC,OAAX,EAAuB;AACxDH,YAAAA,UAAU,GAAGvS,OAAO,CAACmT,eAAR,CAAwBD,iBAAxB,EAA2C,UAAC3B,GAAD,EAAME,GAAN,EAAc;AACpE,kBAAMmB,UAAU,GAAGjC,GAAG,CAACkC,qBAAJ,EAAnB;AACA,kBAAI5S,OAAO,GAAGsR,GAAd;AACA,kBAAIuB,KAAK,GAAGrB,GAAZ;;AACA,kBAAImB,UAAJ,EAAgB;AACd3S,gBAAAA,OAAO,GAAGwR,GAAV;AACAqB,gBAAAA,KAAK,GAAGvB,GAAR;AACD;;AAED,kBAAIuB,KAAJ,EAAW;AACTJ,gBAAAA,OAAO,CAACI,KAAD,CAAP;AACA;AACD;;AACDL,cAAAA,QAAQ,CAACxS,OAAD,CAAR;AACAkS,cAAAA,MAAM,CAACY,OAAP,CACEC,iBADF,EAEE;AACE/S,gBAAAA,OAAO,EAAPA,OADF;AAEED,gBAAAA,OAAO,EAAPA;AAFF,eAFF;AAOD,aArBY,CAAb;AAsBD,WAvBsB,CAAvB;;AAwBA,cAAIkT,iBAAiB,CAACE,IAAtB,EAA4B;AAC1B;AACA;AACA;AACAb,YAAAA,UAAU,CAACc,QAAX,GAAsBC,GAAG,CAACC,eAAJ,CAAoBL,iBAAiB,CAACE,IAAtC,CAAtB;AACD;;AACD,cAAIF,iBAAiB,CAACM,OAAtB,EAA+B;AAC7B;AACAjB,YAAAA,UAAU,CAACc,QAAX,GAAsBH,iBAAiB,CAACM,OAAxC;AACD,WAnCqB;;;AAqCtBjB,UAAAA,UAAU,CAACkB,YAAX,GAA0B,SAA1B;AACAtB,UAAAA,MAAM,CAACY,OAAP,CACEC,kBADF,EAEE;AACE/S,YAAAA,OAAO,EAAEsS,UADX;AAEEvS,YAAAA,OAAO,EAAPA;AAFF,WAFF;;AAOAwS,UAAAA,cAAc,CAAClP,GAAf,GAAqB;AAAA,mBAAMiP,UAAN;AAAA,WAArB;;AACA,iBAAOC,cAAP;AACD,SA/CD;;AAgDAtB,QAAAA,OAAO,CAACoB,SAAS,EAAV,CAAP;AACD,OAnDH,EAoDGd,KApDH,CAoDSL,MApDT;AAqDD,KAzDM,CAAP;AA0DD,GA7DiC;AAAA,CAA3B;AA8DA,IAAMuC,oBAAoB,GAAG,SAAvBA,oBAAuB,CAAClD,KAAD;AAAA,SAAW,UAACyB,UAAD,EAAa0B,SAAb,EAAwB7L,MAAxB,EAAmC;AAChF,QAAM6I,GAAG,GAAGJ,MAAM,CAACC,KAAD,CAAlB;AACA,QAAM2B,MAAM,GAAGvB,SAAS,CAACJ,KAAD,CAAxB;AACA,WAAO,IAAIS,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACtC,UAAI,CAACR,GAAL,EAAU;AACRQ,QAAAA,MAAM,CAAC,IAAIC,KAAJ,CAAU,eAAV,CAAD,CAAN;AACD;;AACDT,MAAAA,GAAG,CAACyB,YAAJ,CAAiBC,UAAjB,CAA4BJ,UAA5B,EACGX,IADH,CACQ,UAACtR,OAAD,EAAa;AACjBA,QAAAA,OAAO,CAAC4T,iBAAR,CAA0BD,SAA1B,EAAqC7L,MAArC,EAA6C,UAACyJ,GAAD,EAAME,GAAN,EAAc;AACzD,cAAMmB,UAAU,GAAGjC,GAAG,CAACkC,qBAAJ,EAAnB;AACA,cAAI5S,OAAO,GAAGsR,GAAd;AACA,cAAIuB,KAAK,GAAGrB,GAAZ;;AACA,cAAImB,UAAJ,EAAgB;AACd3S,YAAAA,OAAO,GAAGwR,GAAV;AACAqB,YAAAA,KAAK,GAAGvB,GAAR;AACD;;AAED,cAAIuB,KAAJ,EAAW;AACT3B,YAAAA,MAAM,CAAC2B,KAAD,CAAN;AACA;AACD;;AACD5B,UAAAA,OAAO,CAACjR,OAAD,CAAP;AACAkS,UAAAA,MAAM,CAACY,OAAP,CACEC,mBADF,EAEE;AACE/S,YAAAA,OAAO,EAAPA,OADF;AAEED,YAAAA,OAAO,EAAPA,OAFF;AAGE;AACA;AACA6T,YAAAA,YAAY,EAAE;AALhB,WAFF;AAUD,SAxBD;AAyBD,OA3BH,EA4BGrC,KA5BH,CA4BSL,MA5BT;AA6BD,KAjCM,CAAP;AAkCD,GArCmC;AAAA,CAA7B;AAsCA,IAAM2C,gBAAgB,GAAG,SAAnBA,gBAAmB,CAACtD,KAAD;AAAA,SAAW,UAACyB,UAAD,EAAahS,OAAb,EAAyB;AAClE,QAAM0Q,GAAG,GAAGJ,MAAM,CAACC,KAAD,CAAlB;AACA,QAAM2B,MAAM,GAAGvB,SAAS,CAACJ,KAAD,CAAxB;AACA,WAAO,IAAIS,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACtC,UAAI,CAACR,GAAL,EAAU;AACRQ,QAAAA,MAAM,CAAC,IAAIC,KAAJ,CAAU,eAAV,CAAD,CAAN;AACD;;AACDT,MAAAA,GAAG,CAACyB,YAAJ,CAAiBC,UAAjB,CAA4BJ,UAA5B,EACGX,IADH,CACQ,UAACtR,OAAD,EAAa;AACjB,YAAQ2T,SAAR,GAAsB1T,OAAtB,CAAQ0T,SAAR;AACA3T,QAAAA,OAAO,CAAC+T,aAAR,CAAsB9T,OAAtB,EAA+B,UAACsR,GAAD,EAAME,GAAN,EAAc;AAC3C,cAAMmB,UAAU,GAAGjC,GAAG,CAACkC,qBAAJ,EAAnB;AACA,cAAIC,KAAK,GAAGrB,GAAZ;;AACA,cAAImB,UAAJ,EAAgB;AACdE,YAAAA,KAAK,GAAGvB,GAAR;AACD;;AAED,cAAIuB,KAAJ,EAAW;AACT3B,YAAAA,MAAM,CAAC2B,KAAD,CAAN;AACA;AACD;;AACD5B,UAAAA,OAAO,CAACjR,OAAD,CAAP;AACAkS,UAAAA,MAAM,CAACY,OAAP,CACEC,cADF,EAEE;AACEW,YAAAA,SAAS,EAATA,SADF;AAEE3T,YAAAA,OAAO,EAAPA;AAFF,WAFF;AAOD,SAnBD;AAoBD,OAvBH,EAwBGwR,KAxBH,CAwBSL,MAxBT;AAyBD,KA7BM,CAAP;AA8BD,GAjC+B;AAAA,CAAzB;AAmCA,IAAM6C,oBAAoB,GAAG,SAAvBA,oBAAuB,CAACxD,KAAD;AAAA,SAAW,UAACyB,UAAD,EAAagC,aAAb,EAA+B;AAC5E,QAAMtD,GAAG,GAAGJ,MAAM,CAACC,KAAD,CAAlB;AACA,QAAM2B,MAAM,GAAGvB,SAAS,CAACJ,KAAD,CAAxB;AACA,WAAO,IAAIS,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACtC,UAAI,CAACR,GAAL,EAAU;AACRQ,QAAAA,MAAM,CAAC,IAAIC,KAAJ,CAAU,eAAV,CAAD,CAAN;AACD;;AACDT,MAAAA,GAAG,CAACyB,YAAJ,CAAiBC,UAAjB,CAA4BJ,UAA5B,EACGX,IADH,CACQ,UAACtR,OAAD,EAAa;AACjBA,QAAAA,OAAO,CAACkU,iBAAR,CAA0BD,aAA1B,EACG3C,IADH,CACQ,UAACrR,OAAD,EAAa;AACjBiR,UAAAA,OAAO,CAACjR,OAAD,CAAP;AACAkS,UAAAA,MAAM,CAACY,OAAP,CACEC,iBADF,EAEE;AACE/S,YAAAA,OAAO,EAAPA,OADF;AAEED,YAAAA,OAAO,EAAPA;AAFF,WAFF;AAOD,SAVH,EAWGwR,KAXH,CAWSL,MAXT;AAYD,OAdH,EAeGK,KAfH,CAeSL,MAfT;AAgBD,KApBM,CAAP;AAqBD,GAxBmC;AAAA,CAA7B;AA0BA,IAAMgD,oBAAoB,GAAG,SAAvBA,oBAAuB,CAAC3D,KAAD;AAAA,SAAW,UAACyB,UAAD,EAAagC,aAAb,EAA+B;AAC5E,QAAMtD,GAAG,GAAGJ,MAAM,CAACC,KAAD,CAAlB;AACA,QAAM2B,MAAM,GAAGvB,SAAS,CAACJ,KAAD,CAAxB;AACA,WAAO,IAAIS,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACtC,UAAI,CAACR,GAAL,EAAU;AACRQ,QAAAA,MAAM,CAAC,IAAIC,KAAJ,CAAU,eAAV,CAAD,CAAN;AACD;;AACDT,MAAAA,GAAG,CAACyB,YAAJ,CAAiBC,UAAjB,CAA4BJ,UAA5B,EACGX,IADH,CACQ,UAACtR,OAAD,EAAa;AACjBA,QAAAA,OAAO,CAACoU,iBAAR,CAA0BH,aAA1B,EACG3C,IADH,CACQ,UAACrR,OAAD,EAAa;AACjBiR,UAAAA,OAAO,CAACjR,OAAD,CAAP;AACAkS,UAAAA,MAAM,CAACY,OAAP,CACEC,iBADF,EAEE;AACE/S,YAAAA,OAAO,EAAPA,OADF;AAEED,YAAAA,OAAO,EAAPA;AAFF,WAFF;AAOD,SAVH,EAWGwR,KAXH,CAWSL,MAXT;AAYD,OAdH,EAeGK,KAfH,CAeSL,MAfT;AAgBD,KApBM,CAAP;AAqBD,GAxBmC;AAAA,CAA7B;AA0BA,IAAMkD,gBAAgB,GAAG,SAAnBA,gBAAmB,CAAC7D,KAAD;AAAA,SAAW,UAAC1I,MAAD,EAAY;AACrD,QAAM6I,GAAG,GAAGJ,MAAM,CAACC,KAAD,CAAlB;AACA,QAAM2B,MAAM,GAAGvB,SAAS,CAACJ,KAAD,CAAxB;AACA,WAAO,IAAIS,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACtC,UAAI,CAACR,GAAL,EAAU;AACRQ,QAAAA,MAAM,CAAC,IAAIC,KAAJ,CAAU,eAAV,CAAD,CAAN;AACD;;AACDT,MAAAA,GAAG,CAACyB,YAAJ,CAAiBkC,aAAjB,CAA+BxM,MAA/B,EACGwJ,IADH,CACQ,UAACtR,OAAD,EAAa;AACjBkR,QAAAA,OAAO,CAAClR,OAAD,CAAP;AACAmS,QAAAA,MAAM,CAACY,OAAP,CACEC,cADF,EAEE;AACEhT,UAAAA,OAAO,EAAPA;AADF,SAFF;AAMD,OATH,EAUGwR,KAVH,CAUSL,MAVT;AAWD,KAfM,CAAP;AAgBD,GAnB+B;AAAA,CAAzB;AAqBA,IAAMoD,eAAe,GAAG,SAAlBA,eAAkB,CAAC/D,KAAD;AAAA,SAAW,UAACyB,UAAD,EAAgB;AACxD,QAAMtB,GAAG,GAAGJ,MAAM,CAACC,KAAD,CAAlB;AACA,QAAM2B,MAAM,GAAGvB,SAAS,CAACJ,KAAD,CAAxB;AACA,WAAO,IAAIS,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACtC,UAAI,CAACR,GAAL,EAAU;AACRQ,QAAAA,MAAM,CAAC,IAAIC,KAAJ,CAAU,eAAV,CAAD,CAAN;AACD;;AACDT,MAAAA,GAAG,CAACyB,YAAJ,CAAiBC,UAAjB,CAA4BJ,UAA5B,EACGX,IADH,CACQ,UAACtR,OAAD,EAAa;AACjBA,QAAAA,OAAO,CAACwU,KAAR,GACGlD,IADH,CACQ,YAAM;AACVJ,UAAAA,OAAO,CAAClR,OAAD,CAAP;AACAmS,UAAAA,MAAM,CAACY,OAAP,CACEC,aADF,EAEE;AACEhT,YAAAA,OAAO,EAAPA;AADF,WAFF;AAMD,SATH,EAUGwR,KAVH,CAUSL,MAVT;AAWD,OAbH,EAcGK,KAdH,CAcSL,MAdT;AAeD,KAnBM,CAAP;AAoBD,GAvB8B;AAAA,CAAxB;AAyBA,IAAMsD,gBAAgB,GAAG,SAAnBA,gBAAmB,CAACjE,KAAD;AAAA,SAAW,UAACyB,UAAD,EAAgB;AACzD,QAAMtB,GAAG,GAAGJ,MAAM,CAACC,KAAD,CAAlB;AACA,WAAO,IAAIS,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACtC,UAAI,CAACR,GAAL,EAAU;AACRQ,QAAAA,MAAM,CAAC,IAAIC,KAAJ,CAAU,eAAV,CAAD,CAAN;AACD;;AACDT,MAAAA,GAAG,CAACyB,YAAJ,CAAiBC,UAAjB,CAA4BJ,UAA5B,EACGX,IADH,CACQ,UAACtR,OAAD,EAAa;AACjBA,QAAAA,OAAO,CAAC0U,MAAR,GACGpD,IADH,CACQ,YAAM;AACV;AACAJ,UAAAA,OAAO,CAAClR,OAAD,CAAP;AACD,SAJH,EAKGwR,KALH,CAKSL,MALT;AAMD,OARH,EASGK,KATH,CASSL,MATT;AAUD,KAdM,CAAP;AAeD,GAjB+B;AAAA,CAAzB;AAmBA,IAAMwD,kBAAkB,GAAG,SAArBA,kBAAqB,CAACnE,KAAD;AAAA,SAAW,UAACyB,UAAD,EAAgB;AAC3D,QAAMtB,GAAG,GAAGJ,MAAM,CAACC,KAAD,CAAlB;AACA,WAAO,IAAIS,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACtC,UAAI,CAACR,GAAL,EAAU;AACRQ,QAAAA,MAAM,CAAC,IAAIC,KAAJ,CAAU,eAAV,CAAD,CAAN;AACD;;AACDT,MAAAA,GAAG,CAACyB,YAAJ,CAAiBC,UAAjB,CAA4BJ,UAA5B,EACGX,IADH,CACQ,UAACtR,OAAD,EAAa;AACjBA,QAAAA,OAAO,CAAC4U,QAAR,GACGtD,IADH,CACQ,YAAM;AACV;AACAJ,UAAAA,OAAO,CAAClR,OAAD,CAAP;AACD,SAJH,EAKGwR,KALH,CAKSL,MALT;AAMD,OARH,EASGK,KATH,CASSL,MATT;AAUD,KAdM,CAAP;AAeD,GAjBiC;AAAA,CAA3B;AAmBA,IAAM0D,oBAAoB,GAAG,SAAvBA,oBAAuB,CAACrE,KAAD;AAAA,SAAW,UAAC1I,MAAD,EAAY;AACzD,QAAM6I,GAAG,GAAGJ,MAAM,CAACC,KAAD,CAAlB;AACA,WAAO,IAAIS,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACtC,UAAI,CAACR,GAAL,EAAU;AACRQ,QAAAA,MAAM,CAAC,IAAIC,KAAJ,CAAU,eAAV,CAAD,CAAN;AACD;;AACDT,MAAAA,GAAG,CAACmE,WAAJ,CAAgBR,aAAhB,CAA8BxM,MAA9B,EACGwJ,IADH,CACQ,UAACtR,OAAD,EAAa;AACjBkR,QAAAA,OAAO,CAAClR,OAAD,CAAP;AACD,OAHH,EAIGwR,KAJH,CAISL,MAJT;AAKD,KATM,CAAP;AAUD,GAZmC;AAAA,CAA7B;AAaA,IAAM4D,gBAAgB,GAAG,SAAnBA,gBAAmB,CAACvE,KAAD;AAAA,SAAW,UAACyB,UAAD,EAAgB;AACzD,QAAMtB,GAAG,GAAGJ,MAAM,CAACC,KAAD,CAAlB;AACA,WAAO,IAAIS,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACtC,UAAI,CAACR,GAAL,EAAU;AACRQ,QAAAA,MAAM,CAAC,IAAIC,KAAJ,CAAU,eAAV,CAAD,CAAN;AACD;;AACDT,MAAAA,GAAG,CAACmE,WAAJ,CAAgBzC,UAAhB,CAA2BJ,UAA3B,EAAuC,UAAC+C,WAAD,EAAclC,KAAd,EAAwB;AAC7D,YAAIA,KAAJ,EAAW;AACT3B,UAAAA,MAAM,CAAC,IAAIC,KAAJ,CAAU0B,KAAV,CAAD,CAAN;AACA;AACD;;AAEDkC,QAAAA,WAAW,CAACC,KAAZ,CAAkB,UAACC,QAAD,EAAWC,UAAX,EAA0B;AAC1C,cAAIrC,KAAJ,EAAW;AACT3B,YAAAA,MAAM,CAAC,IAAIC,KAAJ,CAAU+D,UAAV,CAAD,CAAN;AACA;AACD;;AACDjE,UAAAA,OAAO,CAACgE,QAAD,CAAP;AACD,SAND;AAOD,OAbD;AAcD,KAlBM,CAAP;AAmBD,GArB+B;AAAA,CAAzB;AAuBA,IAAME,eAAe,GAAG,SAAlBA,eAAkB,CAAC5E,KAAD;AAAA,SAAW,UAACyB,UAAD,EAAgB;AACxD,QAAMtB,GAAG,GAAGJ,MAAM,CAACC,KAAD,CAAlB;AACA,WAAO,IAAIS,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACtC,UAAI,CAACR,GAAL,EAAU;AACRQ,QAAAA,MAAM,CAAC,IAAIC,KAAJ,CAAU,eAAV,CAAD,CAAN;AACD;;AACDT,MAAAA,GAAG,CAACmE,WAAJ,CAAgBzC,UAAhB,CAA2BJ,UAA3B,EAAuC,UAAC+C,WAAD,EAAclC,KAAd,EAAwB;AAC7D,YAAIA,KAAJ,EAAW;AACT3B,UAAAA,MAAM,CAAC,IAAIC,KAAJ,CAAU0B,KAAV,CAAD,CAAN;AACA;AACD;;AAEDkC,QAAAA,WAAW,CAACK,IAAZ,CAAiB,UAACH,QAAD,EAAWI,SAAX,EAAyB;AACxC,cAAIxC,KAAJ,EAAW;AACT3B,YAAAA,MAAM,CAAC,IAAIC,KAAJ,CAAUkE,SAAV,CAAD,CAAN;AACA;AACD;;AACDpE,UAAAA,OAAO,CAACgE,QAAD,CAAP;AACD,SAND;AAOD,OAbD;AAcD,KAlBM,CAAP;AAmBD,GArB8B;AAAA,CAAxB;AAuBA,IAAMK,6BAA6B,GAAG,SAAhCA,6BAAgC,CAAC/E,KAAD;AAAA,SAAW,UAACyB,UAAD,EAAaC,iBAAb,EAAmC;AACzF,QAAMvB,GAAG,GAAGJ,MAAM,CAACC,KAAD,CAAlB;AACA,QAAM2B,MAAM,GAAGvB,SAAS,CAACJ,KAAD,CAAxB;AACA,WAAO,IAAIS,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACtC,UAAI,CAACR,GAAL,EAAU;AACRQ,QAAAA,MAAM,CAAC,IAAIC,KAAJ,CAAU,eAAV,CAAD,CAAN;AACD;;AACDT,MAAAA,GAAG,CAACmE,WAAJ,CAAgBzC,UAAhB,CAA2BJ,UAA3B,EACGX,IADH,CACQ,UAACtR,OAAD,EAAa;AACjB,YAAMsS,SAAS,GAAG,SAAZA,SAAY,GAAM;AACtB,cAAIC,UAAU,GAAG,IAAjB;AACA,cAAMC,cAAc,GAAG,IAAIvB,OAAJ,CAAY,UAACwB,QAAD,EAAWC,OAAX,EAAuB;AACxDH,YAAAA,UAAU,GAAGvS,OAAO,CAAC2S,eAAR,CAAwBT,iBAAxB,EAA2C,UAACX,GAAD,EAAME,GAAN,EAAc;AACpE,kBAAMmB,UAAU,GAAGjC,GAAG,CAACkC,qBAAJ,EAAnB;AACA,kBAAI5S,OAAO,GAAGsR,GAAd;AACA,kBAAIuB,KAAK,GAAGrB,GAAZ;;AACA,kBAAImB,UAAJ,EAAgB;AACd3S,gBAAAA,OAAO,GAAGwR,GAAV;AACAqB,gBAAAA,KAAK,GAAGvB,GAAR;AACD;;AACD,kBAAIuB,KAAJ,EAAW;AACTJ,gBAAAA,OAAO,CAACI,KAAD,CAAP;AACA;AACD;;AACDL,cAAAA,QAAQ,CAACxS,OAAD,CAAR;AACAkS,cAAAA,MAAM,CAACY,OAAP,CACEC,iBADF,EAEE;AACE/S,gBAAAA,OAAO,EAAPA,OADF;AAEED,gBAAAA,OAAO,EAAPA;AAFF,eAFF;AAOD,aApBY,CAAb;AAqBAmS,YAAAA,MAAM,CAACY,OAAP,CACEC,kBADF,EAEE;AACE/S,cAAAA,OAAO,EAAEsS,UADX;AAEEvS,cAAAA,OAAO,EAAPA;AAFF,aAFF;AAOD,WA7BsB,CAAvB;;AA8BAwS,UAAAA,cAAc,CAAClP,GAAf,GAAqB;AAAA,mBAAMiP,UAAN;AAAA,WAArB;;AACA,iBAAOC,cAAP;AACD,SAlCD;;AAmCAtB,QAAAA,OAAO,CAACoB,SAAS,EAAV,CAAP;AACD,OAtCH,EAuCGd,KAvCH,CAuCSL,MAvCT;AAwCD,KA5CM,CAAP;AA6CD,GAhD4C;AAAA,CAAtC;AAkDA,IAAMqE,6BAA6B,GAAG,SAAhCA,6BAAgC,CAAChF,KAAD;AAAA,SAAW,UAACyB,UAAD,EAAaiB,iBAAb,EAAmC;AACzF,QAAMvC,GAAG,GAAGJ,MAAM,CAACC,KAAD,CAAlB;AACA,QAAM2B,MAAM,GAAGvB,SAAS,CAACJ,KAAD,CAAxB;AACA,WAAO,IAAIS,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACtC,UAAI,CAACR,GAAL,EAAU;AACRQ,QAAAA,MAAM,CAAC,IAAIC,KAAJ,CAAU,eAAV,CAAD,CAAN;AACD;;AACDT,MAAAA,GAAG,CAACmE,WAAJ,CAAgBzC,UAAhB,CAA2BJ,UAA3B,EACGX,IADH,CACQ,UAACtR,OAAD,EAAa;AACjB,YAAMsS,SAAS,GAAG,SAAZA,SAAY,GAAM;AACtB,cAAIC,UAAU,GAAG,IAAjB;AACA,cAAMC,cAAc,GAAG,IAAIvB,OAAJ,CAAY,UAACwB,QAAD,EAAWC,OAAX,EAAuB;AACxDH,YAAAA,UAAU,GAAGvS,OAAO,CAACmT,eAAR,CAAwBD,iBAAxB,EAA2C,UAAC3B,GAAD,EAAME,GAAN,EAAc;AACpE,kBAAMmB,UAAU,GAAGjC,GAAG,CAACkC,qBAAJ,EAAnB;AACA,kBAAI5S,OAAO,GAAGsR,GAAd;AACA,kBAAIuB,KAAK,GAAGrB,GAAZ;;AACA,kBAAImB,UAAJ,EAAgB;AACd3S,gBAAAA,OAAO,GAAGwR,GAAV;AACAqB,gBAAAA,KAAK,GAAGvB,GAAR;AACD;;AAED,kBAAIuB,KAAJ,EAAW;AACTJ,gBAAAA,OAAO,CAACI,KAAD,CAAP;AACA;AACD;;AACDL,cAAAA,QAAQ,CAACxS,OAAD,CAAR;AACAkS,cAAAA,MAAM,CAACY,OAAP,CACEC,iBADF,EAEE;AACE/S,gBAAAA,OAAO,EAAPA,OADF;AAEED,gBAAAA,OAAO,EAAPA;AAFF,eAFF;AAOD,aArBY,CAAb;AAsBD,WAvBsB,CAAvB;;AAwBA,cAAIkT,iBAAiB,CAACE,IAAtB,EAA4B;AAC1B;AACA;AACA;AACAb,YAAAA,UAAU,CAACc,QAAX,GAAsBC,GAAG,CAACC,eAAJ,CAAoBL,iBAAiB,CAACE,IAAtC,CAAtB;AACD;;AACD,cAAIF,iBAAiB,CAACM,OAAtB,EAA+B;AAC7B;AACAjB,YAAAA,UAAU,CAACc,QAAX,GAAsBH,iBAAiB,CAACM,OAAxC;AACD,WAnCqB;;;AAqCtBjB,UAAAA,UAAU,CAACkB,YAAX,GAA0B,SAA1B;AACAtB,UAAAA,MAAM,CAACY,OAAP,CACEC,kBADF,EAEE;AACE/S,YAAAA,OAAO,EAAEsS,UADX;AAEEvS,YAAAA,OAAO,EAAPA;AAFF,WAFF;;AAOAwS,UAAAA,cAAc,CAAClP,GAAf,GAAqB;AAAA,mBAAMiP,UAAN;AAAA,WAArB;;AACA,iBAAOC,cAAP;AACD,SA/CD;;AAgDAtB,QAAAA,OAAO,CAACoB,SAAS,EAAV,CAAP;AACD,OAnDH,EAoDGd,KApDH,CAoDSL,MApDT;AAqDD,KAzDM,CAAP;AA0DD,GA7D4C;AAAA,CAAtC;AA+DA,IAAMsE,+BAA+B,GAAG,SAAlCA,+BAAkC,CAACjF,KAAD;AAAA,SAAW,UAACyB,UAAD,EAAa0B,SAAb,EAAwB7L,MAAxB,EAAmC;AAC3F,QAAM6I,GAAG,GAAGJ,MAAM,CAACC,KAAD,CAAlB;AACA,QAAM2B,MAAM,GAAGvB,SAAS,CAACJ,KAAD,CAAxB;AACA,WAAO,IAAIS,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACtC,UAAI,CAACR,GAAL,EAAU;AACRQ,QAAAA,MAAM,CAAC,IAAIC,KAAJ,CAAU,eAAV,CAAD,CAAN;AACD;;AACDT,MAAAA,GAAG,CAACmE,WAAJ,CAAgBzC,UAAhB,CAA2BJ,UAA3B,EACGX,IADH,CACQ,UAACtR,OAAD,EAAa;AACjBA,QAAAA,OAAO,CAAC4T,iBAAR,CAA0BD,SAA1B,EAAqC7L,MAArC,EAA6C,UAACyJ,GAAD,EAAME,GAAN,EAAc;AACzD,cAAMmB,UAAU,GAAGjC,GAAG,CAACkC,qBAAJ,EAAnB;AACA,cAAI5S,OAAO,GAAGsR,GAAd;AACA,cAAIuB,KAAK,GAAGrB,GAAZ;;AACA,cAAImB,UAAJ,EAAgB;AACd3S,YAAAA,OAAO,GAAGwR,GAAV;AACAqB,YAAAA,KAAK,GAAGvB,GAAR;AACD;;AAED,cAAIuB,KAAJ,EAAW;AACT3B,YAAAA,MAAM,CAAC2B,KAAD,CAAN;AACA;AACD;;AACD5B,UAAAA,OAAO,CAACjR,OAAD,CAAP;AACAkS,UAAAA,MAAM,CAACY,OAAP,CACEC,mBADF,EAEE;AACE/S,YAAAA,OAAO,EAAPA,OADF;AAEED,YAAAA,OAAO,EAAPA,OAFF;AAGE;AACA;AACA6T,YAAAA,YAAY,EAAE;AALhB,WAFF;AAUD,SAxBD;AAyBD,OA3BH,EA4BGrC,KA5BH,CA4BSL,MA5BT;AA6BD,KAjCM,CAAP;AAkCD,GArC8C;AAAA,CAAxC;AAuCA,IAAMuE,2BAA2B,GAAG,SAA9BA,2BAA8B,CAAClF,KAAD;AAAA,SAAW,UAACyB,UAAD,EAAahS,OAAb,EAAyB;AAC7E,QAAM0Q,GAAG,GAAGJ,MAAM,CAACC,KAAD,CAAlB;AACA,QAAM2B,MAAM,GAAGvB,SAAS,CAACJ,KAAD,CAAxB;AACA,WAAO,IAAIS,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACtC,UAAI,CAACR,GAAL,EAAU;AACRQ,QAAAA,MAAM,CAAC,IAAIC,KAAJ,CAAU,eAAV,CAAD,CAAN;AACD;;AACDT,MAAAA,GAAG,CAACmE,WAAJ,CAAgBzC,UAAhB,CAA2BJ,UAA3B,EACGX,IADH,CACQ,UAACtR,OAAD,EAAa;AACjB,YAAQ2T,SAAR,GAAsB1T,OAAtB,CAAQ0T,SAAR;AACA3T,QAAAA,OAAO,CAAC+T,aAAR,CAAsB9T,OAAtB,EAA+B,UAACsR,GAAD,EAAME,GAAN,EAAc;AAC3C,cAAMmB,UAAU,GAAGjC,GAAG,CAACkC,qBAAJ,EAAnB;AACA,cAAIC,KAAK,GAAGrB,GAAZ;;AACA,cAAImB,UAAJ,EAAgB;AACdE,YAAAA,KAAK,GAAGvB,GAAR;AACD;;AAED,cAAIuB,KAAJ,EAAW;AACT3B,YAAAA,MAAM,CAAC2B,KAAD,CAAN;AACA;AACD;;AACD5B,UAAAA,OAAO,CAACjR,OAAD,CAAP;AACAkS,UAAAA,MAAM,CAACY,OAAP,CACEC,cADF,EAEE;AACEW,YAAAA,SAAS,EAATA,SADF;AAEE3T,YAAAA,OAAO,EAAPA;AAFF,WAFF;AAOD,SAnBD;AAoBD,OAvBH,EAwBGwR,KAxBH,CAwBSL,MAxBT;AAyBD,KA7BM,CAAP;AA8BD,GAjC0C;AAAA,CAApC;AAmCA,IAAMwE,+BAA+B,GAAG,SAAlCA,+BAAkC,CAACnF,KAAD;AAAA,SAAW,UAACyB,UAAD,EAAagC,aAAb,EAA+B;AACvF,QAAMtD,GAAG,GAAGJ,MAAM,CAACC,KAAD,CAAlB;AACA,QAAM2B,MAAM,GAAGvB,SAAS,CAACJ,KAAD,CAAxB;AACA,WAAO,IAAIS,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACtC,UAAI,CAACR,GAAL,EAAU;AACRQ,QAAAA,MAAM,CAAC,IAAIC,KAAJ,CAAU,eAAV,CAAD,CAAN;AACD;;AACDT,MAAAA,GAAG,CAACmE,WAAJ,CAAgBzC,UAAhB,CAA2BJ,UAA3B,EACGX,IADH,CACQ,UAACtR,OAAD,EAAa;AACjBA,QAAAA,OAAO,CAACkU,iBAAR,CAA0BD,aAA1B,EACG3C,IADH,CACQ,UAACrR,OAAD,EAAa;AACjBiR,UAAAA,OAAO,CAACjR,OAAD,CAAP;AACAkS,UAAAA,MAAM,CAACY,OAAP,CACEC,iBADF,EAEE;AACE/S,YAAAA,OAAO,EAAPA,OADF;AAEED,YAAAA,OAAO,EAAPA;AAFF,WAFF;AAOD,SAVH,EAWGwR,KAXH,CAWSL,MAXT;AAYD,OAdH,EAeGK,KAfH,CAeSL,MAfT;AAgBD,KApBM,CAAP;AAqBD,GAxB8C;AAAA,CAAxC;AA0BA,IAAMyE,+BAA+B,GAAG,SAAlCA,+BAAkC,CAACpF,KAAD;AAAA,SAAW,UAACyB,UAAD,EAAagC,aAAb,EAA+B;AACvF,QAAMtD,GAAG,GAAGJ,MAAM,CAACC,KAAD,CAAlB;AACA,QAAM2B,MAAM,GAAGvB,SAAS,CAACJ,KAAD,CAAxB;AACA,WAAO,IAAIS,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACtC,UAAI,CAACR,GAAL,EAAU;AACRQ,QAAAA,MAAM,CAAC,IAAIC,KAAJ,CAAU,eAAV,CAAD,CAAN;AACD;;AACDT,MAAAA,GAAG,CAACmE,WAAJ,CAAgBzC,UAAhB,CAA2BJ,UAA3B,EACGX,IADH,CACQ,UAACtR,OAAD,EAAa;AACjBA,QAAAA,OAAO,CAACoU,iBAAR,CAA0BH,aAA1B,EACG3C,IADH,CACQ,UAACrR,OAAD,EAAa;AACjBiR,UAAAA,OAAO,CAACjR,OAAD,CAAP;AACAkS,UAAAA,MAAM,CAACY,OAAP,CACEC,iBADF,EAEE;AACE/S,YAAAA,OAAO,EAAPA,OADF;AAEED,YAAAA,OAAO,EAAPA;AAFF,WAFF;AAOD,SAVH,EAWGwR,KAXH,CAWSL,MAXT;AAYD,OAdH,EAeGK,KAfH,CAeSL,MAfT;AAgBD,KApBM,CAAP;AAqBD,GAxB8C;AAAA,CAAxC;AA0BP,gBAAe;AACbZ,EAAAA,MAAM,EAANA,MADa;AAEbQ,EAAAA,UAAU,EAAVA,UAFa;AAGbW,EAAAA,aAAa,EAAbA,aAHa;AAIbE,EAAAA,iBAAiB,EAAjBA,iBAJa;AAKbI,EAAAA,kBAAkB,EAAlBA,kBALa;AAMbiB,EAAAA,kBAAkB,EAAlBA,kBANa;AAObS,EAAAA,oBAAoB,EAApBA,oBAPa;AAQbI,EAAAA,gBAAgB,EAAhBA,gBARa;AASbE,EAAAA,oBAAoB,EAApBA,oBATa;AAUbG,EAAAA,oBAAoB,EAApBA,oBAVa;AAWbM,EAAAA,gBAAgB,EAAhBA,gBAXa;AAYbE,EAAAA,kBAAkB,EAAlBA,kBAZa;AAabN,EAAAA,gBAAgB,EAAhBA,gBAba;AAcbE,EAAAA,eAAe,EAAfA,eAda;AAebM,EAAAA,oBAAoB,EAApBA,oBAfa;AAgBbgB,EAAAA,mBAAmB,EAAEd,gBAhBR;AAiBbe,EAAAA,kBAAkB,EAAEV,eAjBP;AAkBbG,EAAAA,6BAA6B,EAA7BA,6BAlBa;AAmBbC,EAAAA,6BAA6B,EAA7BA,6BAnBa;AAoBbC,EAAAA,+BAA+B,EAA/BA,+BApBa;AAqBbC,EAAAA,2BAA2B,EAA3BA,2BArBa;AAsBbC,EAAAA,+BAA+B,EAA/BA,+BAtBa;AAuBbC,EAAAA,+BAA+B,EAA/BA;AAvBa,CAAf;;AC1oBA,SAASG,WAAT,CAAqBC,EAArB;MACErP,IAAI;MACJ8B,aAAa;MACbkI,GAAG;MACHsF,MAAM;MACNC;MAAAC,gBAAgB,mBAAG;MACnB7B,aAAa;MACb8B,SAAS;AAED,MAAArT,SAAS,GAAK4L,gBAAU,CAACC,uCAAD,CAAV,UAAd;AACR,sBACElS;AAAK,IAAA,SAAS,EAAC;AAAf,kBACEA;AAAS,IAAA,SAAS,EAAC;AAAnB,kBACEA,wCAAC2Z,YAAD;AACE,IAAA,MAAM,EAAC,MADT;AAEE,IAAA,KAAK,EAAC,MAFR;AAGE,IAAA,GAAG,EAAE1P,IAAI,CAACmL;AAHZ,IADF,CADF,eAQEpV;AAAS,IAAA,SAAS,EAAC;AAAnB,kBACEA,wCAAC8Q,WAAD;AACE,IAAA,IAAI,EAAEC,qBAAe,CAAC6I,GADxB;AAEE,IAAA,KAAK,EAAE3I,iBAAW,CAACU;AAFrB,KAIG1H,IAAI,CAACE,QAAL,IAAiB9D,SAAS,CAACwT,OAJ9B,CADF,CARF,EAiBK5P,IAAI,CAACnE,MAAL,KAAgBiG,aAAjB,IAAmC,CAAC0N,gBAApC,iBACEzZ;AAAS,IAAA,SAAS,EAAC;AAAnB,kBACEA,wCAAC,MAAD;AACE,IAAA,IAAI,EAAEmR,WAAW,CAAChB,SADpB;AAEE,IAAA,OAAO,EAAE;AACP,UAAM/E,MAAM,GAAG,IAAI6I,GAAG,CAAC6F,kBAAR,EAAf;AACA1O,MAAAA,MAAM,CAAC2O,UAAP,GAAoB,IAApB;AACA3O,MAAAA,MAAM,CAAC4O,UAAP,CAAkB,CAAC/P,IAAI,CAACnE,MAAN,CAAlB;AACA4T,MAAAA,SAAS;AACT9B,MAAAA,aAAa,CAACxM,MAAD,CAAb,CACGwJ,IADH,CACQ,UAACqF,YAAD;AACJV,QAAAA,MAAM,CAACW,IAAP,CAAY,6BAAZ,EAA2CD,YAA3C;AACD,OAHH;AAID;AAXH,KAaG5T,SAAS,CAAC8T,qBAbb,CADF,CAlBN,eAqCEna;AAAK,IAAA,SAAS,EAAC;AAAf,IArCF,eAsCEA;AAAS,IAAA,SAAS,EAAC;AAAnB,kBACEA,wCAAC8Q,WAAD;AACE,IAAA,SAAS,EAAC,sCADZ;AAEE,IAAA,IAAI,EAAEC,qBAAe,CAACqJ,SAFxB;AAGE,IAAA,KAAK,EAAEnJ,iBAAW,CAAC6B;AAHrB,KAKGzM,SAAS,CAACgU,qBALb,CADF,eAQEra,wCAAC8Q,WAAD;AACE,IAAA,SAAS,EAAC,sCADZ;AAEE,IAAA,IAAI,EAAEC,qBAAe,CAACuJ,MAFxB;AAGE,IAAA,KAAK,EAAErJ,iBAAW,CAACU;AAHrB,KAKG1H,IAAI,CAACnE,MALR,CARF,CAtCF,CADF;AAyDD;;AAED,IAAMyU,eAAe,GAAG,SAAlBA,eAAkB,CAACzG,KAAD;AAAW,SAAC;AAClCG,IAAAA,GAAG,EAAEJ,MAAM,CAACC,KAAD,CADuB;AAElC8D,IAAAA,aAAa,EAAED,gBAAgB,CAAC7D,KAAD,CAFG;AAGlCyF,IAAAA,MAAM,EAAEzF,KAAK,CAACK,MAAN,CAAaoF,MAHa;AAIlC9D,IAAAA,MAAM,EAAE3B,KAAK,CAACK,MAAN,CAAaC;AAJa,GAAD;AAKjC,CALF;;IAOMoG,oBAAoB,GAAGC,uCAAmB,CAACpB,WAAD,EAAckB,eAAd;;ICjG3BG;;;;;AACnB,qBAAYpa,KAAZ,EAAmB;AAAA;;AAAA;;AACjB,8BAAMA,KAAN;;AADiB,yGAoBN,YAAM;AACjB,kCAAkC,MAAKA,KAAvC,CAAQqa,gBAAR;AAAA,UAAQA,gBAAR,sCAA2B,EAA3B;AACA,UAAQC,OAAR,GAAoBD,gBAApB,CAAQC,OAAR;;AACA,UAAID,gBAAgB,IAAIC,OAAxB,EAAiC;AAC/BA,QAAAA,OAAO,CAACC,SAAR,CAAkBC,GAAlB,CAAsB,wBAAtB;AACD;AACF,KA1BkB;;AAAA,yGA4BN,YAAM;AACjB,mCAAkC,MAAKxa,KAAvC,CAAQqa,gBAAR;AAAA,UAAQA,gBAAR,uCAA2B,EAA3B;AACA,UAAQC,OAAR,GAAoBD,gBAApB,CAAQC,OAAR;;AACA,UAAID,gBAAgB,IAAIC,OAAxB,EAAiC;AAC/BA,QAAAA,OAAO,CAACC,SAAR,CAAkBE,MAAlB,CAAyB,wBAAzB;AACD;AACF,KAlCkB;;AAAA,0GAoCL,YAAM;AAClB,UAAQC,aAAR,GAA0B,MAAK1a,KAA/B,CAAQ0a,aAAR;;AACA;AAAA,UAAQC,OAAR,yBAAQA,OAAR;;AACA,UAAMC,kBAAkB,GAAG,SAArBA,kBAAqB,CAACC,KAAD,EAAW;AACpC,YAAIF,OAAO,CAACL,OAAR,IAAmB,CAACK,OAAO,CAACL,OAAR,CAAgBQ,QAAhB,CAAyBD,KAAK,CAACE,MAA/B,CAAxB,EAAgE;AAC9DL,UAAAA,aAAa;AACd;AACF,OAJD;;AAKA,YAAKM,QAAL,CAAc;AACZJ,QAAAA,kBAAkB,EAAlBA;AADY,OAAd;;AAIA/S,MAAAA,QAAQ,CAACoT,gBAAT,CAA0B,WAA1B,EAAuCL,kBAAvC;AACD,KAjDkB;;AAAA,4GAmDH,YAAM;AACpB,UACEA,kBADF,GAEI,MAAKlX,KAFT,CACEkX,kBADF;AAGA/S,MAAAA,QAAQ,CAACqT,mBAAT,CAA6B,WAA7B,EAA0CN,kBAA1C;AACD,KAxDkB;;AAAA,8GA0DD,YAAM;AACtB,wBAAgC,MAAK5a,KAArC;AAAA,UAAQmb,SAAR,eAAQA,SAAR;AAAA,UAAmBC,QAAnB,eAAmBA,QAAnB;AACA,UAAMC,UAAU,GAAGF,SAAS,CAACb,OAAV,CAAkBgB,qBAAlB,EAAnB;AACA,UAAMC,CAAC,GAAGF,UAAU,CAACE,CAAX,IAAgBF,UAAU,CAACG,IAArC;AACA,UAAMC,CAAC,GAAGJ,UAAU,CAACI,CAAX,IAAgBJ,UAAU,CAACK,GAArC;AACA,UAAMC,SAAS,GAAG;AAChBD,QAAAA,GAAG,EAAED,CADW;AAEhBD,QAAAA,IAAI,EAAED;AAFU,OAAlB;AAKA,UAAI,CAAC,MAAKZ,OAAL,CAAaL,OAAlB,EAA2B,OAAOqB,SAAP;AAE3B,oBAAoCjU,MAApC;AAAA,UAAQkU,UAAR,WAAQA,UAAR;AAAA,UAAoBC,WAApB,WAAoBA,WAApB;;AACA,UAAMC,IAAI,GAAG,MAAKnB,OAAL,CAAaL,OAAb,CAAqBgB,qBAArB,EAAb;;AACA,UAAIG,CAAC,GAAGK,IAAI,CAAC5M,MAAT,GAAkB2M,WAAtB,EAAmC;AACjCF,QAAAA,SAAS,CAACD,GAAV,IAAiBI,IAAI,CAAC5M,MAAtB;AACD;;AAED,UAAIqM,CAAC,GAAGO,IAAI,CAAC7M,KAAT,GAAiB2M,UAAjB,IAA+B,CAACR,QAApC,EAA8C;AAC5CO,QAAAA,SAAS,CAACH,IAAV,IAAkBM,IAAI,CAAC7M,KAAvB;AACD;;AAED,UAAI0M,SAAS,CAACD,GAAV,GAAgB,CAApB,EAAuB;AACrBC,QAAAA,SAAS,CAACD,GAAV,GAAgBI,IAAI,CAAC5M,MAAL,GAAc2M,WAAd,GAA4B,CAACA,WAAW,GAAGC,IAAI,CAAC5M,MAApB,IAA8B,CAA1D,GAA8D,CAA9E;AACD;;AAED,UAAIyM,SAAS,CAACH,IAAV,GAAiB,CAArB,EAAwB;AACtBG,QAAAA,SAAS,CAACH,IAAV,GAAiBM,IAAI,CAAC7M,KAAL,GAAa2M,UAAb,GAA0B,CAACA,UAAU,GAAGE,IAAI,CAAC7M,KAAnB,IAA4B,CAAtD,GAA0D,CAA3E;AACD;;AAED0M,MAAAA,SAAS,CAACD,GAAV,IAAiB,EAAjB;;AACA,UAAIN,QAAJ,EAAc;AACZ,YAAMW,OAAO,GAAGC,MAAM,CAACC,KAAP,CAAaH,IAAI,CAAC7M,KAAL,GAAa,EAA1B,IACZ,GADY;AAAA,UAEZ6M,IAAI,CAAC7M,KAAL,GAAa,EAFjB;AAGA0M,QAAAA,SAAS,CAACH,IAAV,IAAkBO,OAAlB;AACD;;AAED,aAAO,MAAKf,QAAL,CAAc;AAAEW,QAAAA,SAAS,EAATA;AAAF,OAAd,CAAP;AACD,KAjGkB;;AAEjB,UAAKhB,OAAL,gBAAejb,yBAAK,CAACwc,SAAN,EAAf;AACA,UAAKxY,KAAL,GAAa;AACXiY,MAAAA,SAAS,EAAE,EADA;AAEXf,MAAAA,kBAAkB,EAAE,8BAAM;AAFf,KAAb;AAHiB;AAOlB;;;;WAED,6BAAoB;AAClB,WAAKuB,WAAL;AACA,WAAKC,eAAL;AACA,WAAKC,UAAL;AACD;;;WAED,gCAAuB;AACrB,WAAKC,aAAL;AACA,WAAKC,UAAL;AACD;;;WAiFD,kBAAS;AACP,UAAQZ,SAAR,GAAsB,KAAKjY,KAA3B,CAAQiY,SAAR;AACA,yBAA4B,KAAK3b,KAAjC;AAAA,UAAQC,QAAR,gBAAQA,QAAR;AAAA,UAAkBiI,KAAlB,gBAAkBA,KAAlB;AACA,0BACE8J,qBAAY,eAERtS,+FACEA;AAAK,QAAA,SAAS,EAAC;AAAf,QADF,eAEEA;AACE,QAAA,SAAS,EAAC,yBADZ;AAEE,QAAA,GAAG,EAAE,KAAKib,OAFZ;AAGE,QAAA,KAAK;AACH6B,UAAAA,OAAO,EAAE,cADN;AAEHrU,UAAAA,QAAQ,EAAE,OAFP;AAGHqT,UAAAA,IAAI,YAAKpU,IAAI,CAACqV,KAAL,CAAWd,SAAS,CAACH,IAArB,CAAL,OAHD;AAIHE,UAAAA,GAAG,YAAKtU,IAAI,CAACqV,KAAL,CAAWd,SAAS,CAACD,GAArB,CAAL;AAJA,WAKAxT,KALA;AAHP,SAWGjI,QAXH,CAFF,CAFQ,EAmBV4H,QAAQ,CAACyK,cAAT,CAAwB,0BAAxB,CAnBU,CADd;AAuBD;;;;EA9HoCoK;AAgIvCtC,WAAS,CAACja,SAAV,GAAsB;AACpBua,EAAAA,aAAa,EAAEta,6BAAS,CAACO,IAAV,CAAeF,UADV;AAEpBR,EAAAA,QAAQ,EAAEG,6BAAS,CAACC,SAAV,CAAoB,CAC5BD,6BAAS,CAACE,OADkB,EAE5BF,6BAAS,CAACG,OAAV,CAAkBH,6BAAS,CAACE,OAA5B,CAF4B,CAApB,EAGPG,UALiB;AAMpByH,EAAAA,KAAK,EAAE9H,6BAAS,CAACqP,KAAV,CAAgB,EAAhB,CANa;AAOpB;AACA0L,EAAAA,SAAS,EAAE/a,6BAAS,CAACC,SAAV,CAAoB,CAC7BD,6BAAS,CAACO,IADmB,EAE7BP,6BAAS,CAACqP,KAAV,CAAgB;AAAE6K,IAAAA,OAAO,EAAEla,6BAAS,CAACuc,UAAV,CAAqBC,OAArB;AAAX,GAAhB,CAF6B,CAApB,EAGRnc,UAXiB;AAYpB4Z,EAAAA,gBAAgB,EAAEja,6BAAS,CAACC,SAAV,CAAoB,CACpCD,6BAAS,CAACO,IAD0B,EAEpCP,6BAAS,CAACqP,KAAV,CAAgB;AAAE6K,IAAAA,OAAO,EAAEla,6BAAS,CAACuc,UAAV,CAAqBC,OAArB;AAAX,GAAhB,CAFoC,CAApB,EAGfnc,UAfiB;AAgBpB2a,EAAAA,QAAQ,EAAEhb,6BAAS,CAACM;AAhBA,CAAtB;AAkBA0Z,WAAS,CAACvZ,YAAV,GAAyB;AACvBqH,EAAAA,KAAK,EAAE,EADgB;AAEvBkT,EAAAA,QAAQ,EAAE;AAFa,CAAzB;;ACjJA,IAAMyB,kBAAkB,GAAG,sBAA3B;AACe,SAASC,SAAT,OAMZ;AAAA,MALD5c,SAKC,QALDA,SAKC;AAAA,MAJD6c,YAIC,QAJDA,YAIC;AAAA,MAHDC,SAGC,QAHDA,SAGC;AAAA,MAFDC,UAEC,QAFDA,UAEC;AAAA,MADDhd,QACC,QADDA,QACC;;AACD,MAAIA,QAAQ,CAACgG,MAAT,GAAkB8W,YAAtB,EAAoC;AAClC,QAAMG,MAAM,GAAG,EAAf;;AAEA,SAAK,IAAIxS,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGzK,QAAQ,CAACgG,MAA7B,EAAqCyE,CAAC,IAAIqS,YAA1C,EAAwD;AACtDG,MAAAA,MAAM,CAAChY,IAAP,eACExF;AACE,QAAA,SAAS,EAAE,iDACLsF,KAAK,CAACC,OAAN,CAAc/E,SAAd,IAA2BA,SAA3B,GAAuC,CAACA,SAAD,CADlC,IAET2c,kBAFS,GAGTvX,IAHS,CAGJ,GAHI,CADb;AAKE,QAAA,GAAG,EAAEpF,SAAS,GAAGwK,CALnB;AAME,QAAA,KAAK,EAAE;AACLuE,UAAAA,KAAK,EAAE+N,SAAS,GAAGD,YADd;AAEL7N,UAAAA,MAAM,EAAE+N;AAFH;AANT,SAYIhd,QAAQ,CAACsO,KAAT,CAAe7D,CAAf,EAAkBA,CAAC,GAAGqS,YAAtB,CAZJ,CADF;AAiBD;;AACD,WAAOG,MAAP;AACD;;AAED,sBACExd;AACE,IAAA,SAAS,EAAE,iDACLsF,KAAK,CAACC,OAAN,CAAc/E,SAAd,IAA2BA,SAA3B,GAAuC,CAACA,SAAD,CADlC,IAET2c,kBAFS,GAGTvX,IAHS,CAGJ,GAHI,CADb;AAKE,IAAA,KAAK,EAAE;AACL2J,MAAAA,KAAK,EAAE+N,SAAS,GAAG/c,QAAQ,CAACgG,MADvB;AAELiJ,MAAAA,MAAM,EAAE+N;AAFH;AALT,KAUGhd,QAVH,CADF;AAcD;AAED6c,SAAS,CAAC3c,SAAV,GAAsB;AACpBD,EAAAA,SAAS,EAAEE,6BAAS,CAACC,SAAV,CAAoB,CAC7BD,6BAAS,CAACQ,MADmB,EAE7BR,6BAAS,CAACG,OAAV,CAAkBH,6BAAS,CAACQ,MAA5B,CAF6B,CAApB,CADS;AAKpBmc,EAAAA,YAAY,EAAE3c,6BAAS,CAACgO,MAAV,CAAiB3N,UALX;AAMpBuc,EAAAA,SAAS,EAAE5c,6BAAS,CAACgO,MAAV,CAAiB3N,UANR;AAOpBwc,EAAAA,UAAU,EAAE7c,6BAAS,CAACgO,MAAV,CAAiB3N,UAPT;AAQpBR,EAAAA,QAAQ,EAAEG,6BAAS,CAACC,SAAV,CAAoB,CAC5BD,6BAAS,CAACE,OADkB,EAE5BF,6BAAS,CAACG,OAAV,CAAkBH,6BAAS,CAACE,OAA5B,CAF4B,EAG5BF,6BAAS,CAACQ,MAHkB,EAI5BR,6BAAS,CAACG,OAAV,CAAkBH,6BAAS,CAACQ,MAA5B,CAJ4B,CAApB,EAKPH;AAbiB,CAAtB;AAgBAqc,SAAS,CAACjc,YAAV,GAAyB;AACvBX,EAAAA,SAAS,EAAE;AADY,CAAzB;;IChEqBid;;;;;AACnB,0BAAYnd,KAAZ,EAAmB;AAAA;;AAAA;;AACjB,8BAAMA,KAAN;;AADiB,yGAoBN,YAAM;AACjB,kCAAkC,MAAKA,KAAvC,CAAQqa,gBAAR;AAAA,UAAQA,gBAAR,sCAA2B,EAA3B;AACA,UAAQC,OAAR,GAAoBD,gBAApB,CAAQC,OAAR;;AACA,UAAID,gBAAgB,IAAIC,OAAxB,EAAiC;AAC/BA,QAAAA,OAAO,CAACC,SAAR,CAAkBC,GAAlB,CAAsB,6BAAtB;AACD;AACF,KA1BkB;;AAAA,yGA4BN,YAAM;AACjB,mCAAkC,MAAKxa,KAAvC,CAAQqa,gBAAR;AAAA,UAAQA,gBAAR,uCAA2B,EAA3B;AACA,UAAQC,OAAR,GAAoBD,gBAApB,CAAQC,OAAR;;AACA,UAAID,gBAAgB,IAAIC,OAAxB,EAAiC;AAC/BA,QAAAA,OAAO,CAACC,SAAR,CAAkBE,MAAlB,CAAyB,6BAAzB;AACD;AACF,KAlCkB;;AAAA,0GAoCL,YAAM;AAClB,UAAQC,aAAR,GAA0B,MAAK1a,KAA/B,CAAQ0a,aAAR;;AACA;AAAA,UAAQ0C,WAAR,yBAAQA,WAAR;;AACA,UAAMxC,kBAAkB,GAAG,SAArBA,kBAAqB,CAACC,KAAD,EAAW;AACpC,YAAIuC,WAAW,CAAC9C,OAAZ,IAAuB,CAAC8C,WAAW,CAAC9C,OAAZ,CAAoBQ,QAApB,CAA6BD,KAAK,CAACE,MAAnC,CAA5B,EAAwE;AACtEL,UAAAA,aAAa;AACd;AACF,OAJD;;AAKA,YAAKM,QAAL,CAAc;AACZJ,QAAAA,kBAAkB,EAAlBA;AADY,OAAd;;AAGA/S,MAAAA,QAAQ,CAACoT,gBAAT,CAA0B,WAA1B,EAAuCL,kBAAvC;AACD,KAhDkB;;AAAA,4GAkDH,YAAM;AACpB,UACEA,kBADF,GAEI,MAAKlX,KAFT,CACEkX,kBADF;AAGA/S,MAAAA,QAAQ,CAACqT,mBAAT,CAA6B,WAA7B,EAA0CN,kBAA1C;AACD,KAvDkB;;AAAA,6GAyDF,YAAM;AACrB;AACA,wBAGI,MAAK5a,KAHT;AAAA,UACEmb,SADF,eACEA,SADF;AAAA,UAEEkC,gBAFF,eAEEA,gBAFF;AAIA,UAAMC,iBAAiB,GAAGD,gBAAgB,CAAC9B,CAAjB,IAAsB,CAAhD;AACA,UAAMgC,iBAAiB,GAAGF,gBAAgB,CAAC5B,CAAjB,IAAsB,CAAhD;AAEA,UAAMJ,UAAU,GAAGF,SAAS,CAACb,OAAV,CAAkBgB,qBAAlB,EAAnB;AAEA,UAAMC,CAAC,GAAGF,UAAU,CAACE,CAAX,IAAgBF,UAAU,CAACG,IAArC;AACA,UAAMC,CAAC,GAAGJ,UAAU,CAACI,CAAX,IAAgBJ,UAAU,CAACK,GAArC;AAEA,UAAM8B,aAAa,GAAG;AACpB9B,QAAAA,GAAG,EAAED,CADe;AAEpBD,QAAAA,IAAI,EAAED;AAFc,OAAtB;AAKA,UAAI,CAAC,MAAK6B,WAAL,CAAiB9C,OAAtB,EAA+B,OAAOkD,aAAP;;AAC/B,UAAM1B,IAAI,GAAG,MAAKsB,WAAL,CAAiB9C,OAAjB,CAAyBgB,qBAAzB,EAAb;;AAEA,UAAIkC,aAAa,CAAC9B,GAAd,GAAoBI,IAAI,CAAC5M,MAA7B,EAAqC;AACnCsO,QAAAA,aAAa,CAAC9B,GAAd,IAAqBL,UAAU,CAACnM,MAAhC;AACAsO,QAAAA,aAAa,CAAC9B,GAAd,IAAqB6B,iBAArB;AACD,OAHD,MAGO;AACLC,QAAAA,aAAa,CAAC9B,GAAd,IAAqBI,IAAI,CAAC5M,MAA1B;AACAsO,QAAAA,aAAa,CAAC9B,GAAd,IAAqB6B,iBAArB;AACD;;AAEDC,MAAAA,aAAa,CAAChC,IAAd,IAAuBM,IAAI,CAAC7M,KAAL,GAAa,CAApC;AACAuO,MAAAA,aAAa,CAAChC,IAAd,IAAuBH,UAAU,CAACnM,MAAX,GAAoB,CAArB,GAA0B,CAAhD;AACAsO,MAAAA,aAAa,CAAChC,IAAd,IAAsB8B,iBAAtB;AAEA,UAAMG,WAAW,GAAI/V,MAAM,CAACkU,UAAP,GAAoBE,IAAI,CAAC7M,KAA9C;;AACA,UAAIwO,WAAW,GAAGD,aAAa,CAAChC,IAAhC,EAAsC;AACpCgC,QAAAA,aAAa,CAAChC,IAAd,GAAqBiC,WAArB;AACD;;AACD,UAAID,aAAa,CAAChC,IAAd,GAAqB,CAAzB,EAA4B;AAC1BgC,QAAAA,aAAa,CAAChC,IAAd,GAAqB,CAArB;AACD;;AAED,aAAO,MAAKR,QAAL,CAAc;AAAEwC,QAAAA,aAAa,EAAbA;AAAF,OAAd,CAAP;AACD,KApGkB;;AAEjB,UAAKJ,WAAL,gBAAmB1d,yBAAK,CAACwc,SAAN,EAAnB;AACA,UAAKxY,KAAL,GAAa;AACX8Z,MAAAA,aAAa,EAAE,EADJ;AAEX5C,MAAAA,kBAAkB,EAAE,8BAAM;AAFf,KAAb;AAHiB;AAOlB;;;;WAED,6BAAoB;AAClB,WAAKuB,WAAL;AACA,WAAKuB,cAAL;AACA,WAAKrB,UAAL;AACD;;;WAED,gCAAuB;AACrB,WAAKC,aAAL;AACA,WAAKC,UAAL;AACD;;;WAoFD,kBAAS;AACP,UAAQiB,aAAR,GAA0B,KAAK9Z,KAA/B,CAAQ8Z,aAAR;AACA,UAAQvd,QAAR,GAAqB,KAAKD,KAA1B,CAAQC,QAAR;AACA,0BACE+R,qBAAY,eACVtS,+FACEA;AAAK,QAAA,SAAS,EAAC;AAAf,QADF,eAEEA;AACE,QAAA,SAAS,EAAC,iCADZ;AAEE,QAAA,GAAG,EAAE,KAAK0d,WAFZ;AAGE,QAAA,KAAK,EAAE;AACLZ,UAAAA,OAAO,EAAE,cADJ;AAELrU,UAAAA,QAAQ,EAAE,OAFL;AAGLqT,UAAAA,IAAI,YAAKpU,IAAI,CAACqV,KAAL,CAAWe,aAAa,CAAChC,IAAzB,CAAL,OAHC;AAILE,UAAAA,GAAG,YAAKtU,IAAI,CAACqV,KAAL,CAAWe,aAAa,CAAC9B,GAAzB,CAAL;AAJE;AAHT,sBAUEhc,wCAAC,SAAD;AACE,QAAA,SAAS,EAAC,sCADZ;AAEE,QAAA,YAAY,EAAE,CAFhB;AAGE,QAAA,SAAS,EAAE,EAHb;AAIE,QAAA,UAAU,EAAE;AAJd,SAMGO,QANH,CAVF,CAFF,CADU,EAuBV4H,QAAQ,CAACyK,cAAT,CAAwB,4BAAxB,CAvBU,CADd;AA2BD;;;;EArIyCoK;AAuI5CS,gBAAc,CAAChd,SAAf,GAA2B;AACzBua,EAAAA,aAAa,EAAEta,6BAAS,CAACO,IAAV,CAAeF,UADL;AAEzBR,EAAAA,QAAQ,EAAEG,6BAAS,CAACC,SAAV,CAAoB,CAC5BD,6BAAS,CAACE,OADkB,EAE5BF,6BAAS,CAACG,OAAV,CAAkBH,6BAAS,CAACE,OAA5B,CAF4B,CAApB,EAGPG,UALsB;AAMzB0a,EAAAA,SAAS,EAAE/a,6BAAS,CAACC,SAAV,CAAoB,CAC7BD,6BAAS,CAACO,IADmB,EAE7BP,6BAAS,CAACqP,KAAV,CAAgB;AAAE6K,IAAAA,OAAO,EAAEla,6BAAS,CAACuc,UAAV,CAAqBC,OAArB;AAAX,GAAhB,CAF6B,CAApB,EAGRnc,UATsB;AAUzB4Z,EAAAA,gBAAgB,EAAEja,6BAAS,CAACC,SAAV,CAAoB,CACpCD,6BAAS,CAACO,IAD0B,EAEpCP,6BAAS,CAACqP,KAAV,CAAgB;AAAE6K,IAAAA,OAAO,EAAEla,6BAAS,CAACuc,UAAV,CAAqBC,OAArB;AAAX,GAAhB,CAFoC,CAApB,EAGfnc,UAbsB;AAczB4c,EAAAA,gBAAgB,EAAEjd,6BAAS,CAACqP,KAAV,CAAgB;AAChC8L,IAAAA,CAAC,EAAEnb,6BAAS,CAACgO,MADmB;AAEhCqN,IAAAA,CAAC,EAAErb,6BAAS,CAACgO;AAFmB,GAAhB;AAdO,CAA3B;AAmBA+O,gBAAc,CAACtc,YAAf,GAA8B;AAC5Bwc,EAAAA,gBAAgB,EAAE;AADU,CAA9B;;ACrJA,IAAMM,KAAK,GAAG,EAAd;IAEavD,SAAS,GAAGwD;IACZT,cAAc,GAAGU;IAEjBC,QAAQ,GAAG,SAAXA,QAAW,OAKlB;AAAA,MAJJ5d,SAII,QAJJA,SAII;AAAA,MAHJD,QAGI,QAHJA,QAGI;AAAA,MAFJkP,OAEI,QAFJA,OAEI;AAAA,MADJ4O,OACI,QADJA,OACI;;AACJ,MAAMC,gBAAgB,GAAG,SAAnBA,gBAAmB,CAACxO,CAAD,EAAO;AAAE,QAAI,CAACuO,OAAL,EAAc5O,OAAO,CAACK,CAAD,CAAP;AAAa,GAA7D;;AACA,sBACE9P;AACE,IAAA,SAAS,EAAEyF,YAAY,CAAC,CAACjF,SAAD,EAAY,8BAAZ,EAA4C6d,OAAO,GAAG,SAAH,GAAe,EAAlE,CAAD,CADzB;AAEE,IAAA,IAAI,EAAC,UAFP;AAGE,IAAA,OAAO,EAAEC,gBAHX;AAIE,IAAA,UAAU,EAAE,oBAACxO,CAAD,EAAO;AAAE,UAAIA,CAAC,CAACyO,OAAF,KAAcN,KAAlB,EAAyBK,gBAAgB,CAACxO,CAAD,CAAhB;AAAsB,KAJtE;AAKE,IAAA,QAAQ,EAAE;AALZ,kBAOE9P,wCAAC8Q,WAAD;AACE,IAAA,SAAS,EAAC,oCADZ;AAEE,IAAA,IAAI,EAAEC,qBAAe,CAACyN,UAFxB;AAGE,IAAA,KAAK,EAAEH,OAAO,GAAGpN,iBAAW,CAAC+B,cAAf,GAAgC/B,iBAAW,CAACU;AAH5D,KAKGpR,QALH,CAPF,CADF;AAiBD;AAED6d,QAAQ,CAAC3d,SAAT,GAAqB;AACnBD,EAAAA,SAAS,EAAEE,6BAAS,CAACC,SAAV,CAAoB,CAC7BD,6BAAS,CAACQ,MADmB,EAE7BR,6BAAS,CAACG,OAAV,CAAkBH,6BAAS,CAACQ,MAA5B,CAF6B,CAApB,CADQ;AAKnBX,EAAAA,QAAQ,EAAEG,6BAAS,CAACC,SAAV,CAAoB,CAC5BD,6BAAS,CAACQ,MADkB,EAE5BR,6BAAS,CAACE,OAFkB,CAApB,EAGPG,UARgB;AASnB0O,EAAAA,OAAO,EAAE/O,6BAAS,CAACO,IAAV,CAAeF,UATL;AAUnBsd,EAAAA,OAAO,EAAE3d,6BAAS,CAACM;AAVA,CAArB;AAaAod,QAAQ,CAACjd,YAAT,GAAwB;AACtBX,EAAAA,SAAS,EAAE,EADW;AAEtB6d,EAAAA,OAAO,EAAE;AAFa,CAAxB;AAae,SAASI,WAAT,QAAiD;AAAA,MAA1BC,WAA0B,SAA1BA,WAA0B;AAAA,MAAbC,SAAa,SAAbA,SAAa;;AAC9D,kBAAgChP,cAAQ,CAAC,KAAD,CAAxC;AAAA;AAAA,MAAOiP,QAAP;AAAA,MAAiBC,WAAjB;;AAEA,sBACE7e;AAAK,IAAA,SAAS,EAAC,uBAAf;AAAuC,IAAA,KAAK,EAAE;AAAE8c,MAAAA,OAAO,EAAE;AAAX;AAA9C,KACG4B,WAAW,CAAC;AAAA,WAAMG,WAAW,CAAC,CAACD,QAAF,CAAjB;AAAA,GAAD,CADd,EAEGA,QAAQ,IAAID,SAAS,CAAC;AAAA,WAAME,WAAW,CAAC,KAAD,CAAjB;AAAA,GAAD,CAFxB,CADF;AAMD;AAEDJ,WAAW,CAAChe,SAAZ,GAAwB;AACtBie,EAAAA,WAAW,EAAEhe,6BAAS,CAACO,IAAV,CAAeF,UADN;AAEtB4d,EAAAA,SAAS,EAAEje,6BAAS,CAACO,IAAV,CAAeF;AAFJ,CAAxB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}