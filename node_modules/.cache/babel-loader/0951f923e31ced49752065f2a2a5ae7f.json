{"ast":null,"code":"import React__default, { useState, useContext, Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { createPortal } from 'react-dom';\nimport { _ as __assign, d as __spreadArray, b as _slicedToArray, e as _toConsumableArray, a as _objectSpread2, c as LocalizationContext, w as withSendbirdContext, h as _inherits, i as _createSuper, k as _classCallCheck, f as _defineProperty, l as _assertThisInitialized, j as _createClass } from './LocalizationContext-dfe8b78b.js';\nimport { g as format, L as Label, a as LabelTypography, b as LabelColors, I as Icon, c as IconTypes, d as IconColors, A as Avatar } from './index-fe1a6d27.js';\n/**\n * user profile goes deep inside the component tree\n * use this context as a short circuit to send in values\n */\n\nvar UserProfileContext = /*#__PURE__*/React__default.createContext({\n  disableUserProfile: true,\n  isOpenChannel: false,\n  renderUserProfile: null\n});\n\nvar UserProfileProvider = function UserProfileProvider(props) {\n  var children = props.children,\n      className = props.className;\n  return /*#__PURE__*/React__default.createElement(UserProfileContext.Provider, {\n    value: props\n  }, /*#__PURE__*/React__default.createElement(\"div\", {\n    className: className\n  }, children));\n};\n\nUserProfileProvider.propTypes = {\n  children: PropTypes.oneOfType([PropTypes.element, PropTypes.arrayOf(PropTypes.element), PropTypes.any]).isRequired,\n  // eslint-disable-next-line react/no-unused-prop-types\n  isOpenChannel: PropTypes.bool,\n  // eslint-disable-next-line react/no-unused-prop-types\n  disableUserProfile: PropTypes.bool,\n  // eslint-disable-next-line react/no-unused-prop-types\n  renderUserProfile: PropTypes.func,\n  className: PropTypes.string\n};\nUserProfileProvider.defaultProps = {\n  className: null,\n  isOpenChannel: false,\n  disableUserProfile: false,\n  renderUserProfile: null\n};\nvar SUPPORTED_MIMES = {\n  IMAGE: ['image/jpeg', 'image/jpg', 'image/png', 'image/gif', 'image/svg+xml', 'image/webp' // not supported in IE\n  ],\n  VIDEO: ['video/mpeg', 'video/ogg', 'video/webm', 'video/mp4'],\n  AUDIO: ['audio/aac', 'audio/midi', 'audio/x-midi', 'audio/mpeg', 'audio/ogg', 'audio/opus', 'audio/wav', 'audio/webm', 'audio/3gpp', 'audio/3gpp2', 'audio/mp3']\n};\nvar UIKitMessageTypes = {\n  ADMIN: \"ADMIN\",\n  TEXT: \"TEXT\",\n  FILE: \"FILE\",\n  THUMBNAIL: \"THUMBNAIL\",\n  OG: \"OG\",\n  UNKNOWN: \"UNKNOWN\"\n};\nvar UIKitFileTypes = {\n  IMAGE: \"IMAGE\",\n  AUDIO: \"AUDIO\",\n  VIDEO: \"VIDEO\",\n  GIF: \"GIF\",\n  OTHERS: \"OTHERS\"\n};\nvar SendingMessageStatus = {\n  NONE: 'none',\n  SUCCEEDED: 'succeeded',\n  FAILED: 'failed',\n  PENDING: 'pending'\n};\nvar OutgoingMessageStates = {\n  NONE: 'NONE',\n  PENDING: 'PENDING',\n  SENT: 'SENT',\n  FAILED: 'FAILED',\n  DELIVERED: 'DELIVERED',\n  READ: 'READ'\n};\n\nvar isImage = function isImage(type) {\n  return SUPPORTED_MIMES.IMAGE.indexOf(type) >= 0;\n};\n\nvar isVideo = function isVideo(type) {\n  return SUPPORTED_MIMES.VIDEO.indexOf(type) >= 0;\n};\n\nvar isGif = function isGif(type) {\n  return type === 'image/gif';\n};\n\nvar isSupportedFileView = function isSupportedFileView(type) {\n  return isImage(type) || isVideo(type);\n};\n\nvar isAudio = function isAudio(type) {\n  return SUPPORTED_MIMES.AUDIO.indexOf(type) >= 0;\n};\n\nvar getUIKitFileTypes = function getUIKitFileTypes() {\n  return __assign({}, UIKitFileTypes);\n};\n\nvar getUIKitFileType = function getUIKitFileType(type) {\n  if (isGif(type)) return UIKitFileTypes.GIF;\n  if (isImage(type)) return UIKitFileTypes.IMAGE;\n  if (isVideo(type)) return UIKitFileTypes.VIDEO;\n  if (isAudio(type)) return UIKitFileTypes.AUDIO;\n  return UIKitFileTypes.OTHERS;\n};\n\nvar getOutgoingMessageStates = function getOutgoingMessageStates() {\n  return __assign({}, OutgoingMessageStates);\n};\n\nvar getOutgoingMessageState = function getOutgoingMessageState(channel, message) {\n  var _a;\n\n  if (message.sendingStatus === 'pending') return OutgoingMessageStates.PENDING;\n  if (message.sendingStatus === 'failed') return OutgoingMessageStates.FAILED;\n\n  if ((_a = channel === null || channel === void 0 ? void 0 : channel.isGroupChannel) === null || _a === void 0 ? void 0 : _a.call(channel)) {\n    /* GroupChannel only */\n    if (channel.getUnreadMemberCount(message) === 0) {\n      return OutgoingMessageStates.READ;\n    } else if (channel.getUndeliveredMemberCount(message) === 0) {\n      return OutgoingMessageStates.DELIVERED;\n    }\n  }\n\n  if (message.sendingStatus === 'succeeded') return OutgoingMessageStates.SENT;\n  return OutgoingMessageStates.NONE;\n};\n\nvar isSentMessage = function isSentMessage(channel, message) {\n  return getOutgoingMessageState(channel, message) === OutgoingMessageStates.SENT || getOutgoingMessageState(channel, message) === OutgoingMessageStates.DELIVERED || getOutgoingMessageState(channel, message) === OutgoingMessageStates.READ;\n};\n\nvar isFailedMessage = function isFailedMessage(channel, message) {\n  return getOutgoingMessageState(channel, message) === OutgoingMessageStates.FAILED;\n};\n\nvar isPendingMessage = function isPendingMessage(channel, message) {\n  return getOutgoingMessageState(channel, message) === OutgoingMessageStates.PENDING;\n};\n\nvar isSentStatus = function isSentStatus(state) {\n  return state === OutgoingMessageStates.SENT || state === OutgoingMessageStates.DELIVERED || state === OutgoingMessageStates.READ;\n};\n\nvar isAdminMessage = function isAdminMessage(message) {\n  var _a;\n\n  return message && (((_a = message.isAdminMessage) === null || _a === void 0 ? void 0 : _a.call(message)) || message['messageType'] && message.messageType === 'admin');\n};\n\nvar isUserMessage = function isUserMessage(message) {\n  var _a;\n\n  return message && (((_a = message.isUserMessage) === null || _a === void 0 ? void 0 : _a.call(message)) || message['messageType'] && message.messageType === 'user');\n};\n\nvar isFileMessage = function isFileMessage(message) {\n  var _a;\n\n  return message && (((_a = message.isFileMessage) === null || _a === void 0 ? void 0 : _a.call(message)) || message['messageType'] && message.messageType === 'file');\n};\n\nvar isOGMessage = function isOGMessage(message) {\n  var _a;\n\n  return !!(message && isUserMessage(message) && (message === null || message === void 0 ? void 0 : message.ogMetaData) && ((_a = message === null || message === void 0 ? void 0 : message.ogMetaData) === null || _a === void 0 ? void 0 : _a.url));\n};\n\nvar isTextMessage = function isTextMessage(message) {\n  return isUserMessage(message) && !isOGMessage(message);\n};\n\nvar isThumbnailMessage = function isThumbnailMessage(message) {\n  return message && isFileMessage(message) && isSupportedFileView(message.type);\n};\n\nvar isImageMessage = function isImageMessage(message) {\n  return message && isThumbnailMessage(message) && isImage(message.type);\n};\n\nvar isVideoMessage = function isVideoMessage(message) {\n  return message && isThumbnailMessage(message) && isVideo(message.type);\n};\n\nvar isGifMessage = function isGifMessage(message) {\n  return message && isThumbnailMessage(message) && isGif(message.type);\n};\n\nvar isAudioMessage = function isAudioMessage(message) {\n  return message && isFileMessage(message) && isAudio(message.type);\n};\n\nvar isEditedMessage = function isEditedMessage(message) {\n  return isUserMessage(message) && (message === null || message === void 0 ? void 0 : message.updatedAt) > 0;\n};\n\nvar getUIKitMessageTypes = function getUIKitMessageTypes() {\n  return __assign({}, UIKitMessageTypes);\n};\n\nvar getUIKitMessageType = function getUIKitMessageType(message) {\n  if (isAdminMessage(message)) return UIKitMessageTypes.ADMIN;\n\n  if (isUserMessage(message)) {\n    return isOGMessage(message) ? UIKitMessageTypes.OG : UIKitMessageTypes.TEXT;\n  }\n\n  if (isFileMessage(message)) {\n    return isThumbnailMessage(message) ? UIKitMessageTypes.THUMBNAIL : UIKitMessageTypes.FILE;\n  }\n\n  return UIKitMessageTypes.UNKNOWN;\n};\n\nvar getSendingMessageStatus = function getSendingMessageStatus() {\n  return __assign({}, SendingMessageStatus);\n};\n\nvar reducer = function reducer(accumulator, currentValue) {\n  if (Array.isArray(currentValue)) {\n    return __spreadArray(__spreadArray([], accumulator, true), currentValue, true);\n  } else {\n    accumulator.push(currentValue);\n    return accumulator;\n  }\n};\n\nvar getClassName = function getClassName(classNames) {\n  return Array.isArray(classNames) ? classNames.reduce(reducer, []).join(' ') : classNames;\n};\n\nvar isReactedBy = function isReactedBy(userId, reaction) {\n  return reaction.userIds.some(function (reactorUserId) {\n    return reactorUserId === userId;\n  });\n};\n\nvar getEmojiTooltipString = function getEmojiTooltipString(reaction, userId, memberNicknamesMap, stringSet) {\n  var you = '';\n\n  if (isReactedBy(userId, reaction)) {\n    you = reaction.userIds.length === 1 ? stringSet.TOOLTIP__YOU : stringSet.TOOLTIP__AND_YOU;\n  }\n\n  return \"\" + reaction.userIds.filter(function (reactorUserId) {\n    return reactorUserId !== userId;\n  }).map(function (reactorUserId) {\n    return memberNicknamesMap.get(reactorUserId) || stringSet.TOOLTIP__UNKNOWN_USER;\n  }).join(', ') + you;\n};\n\nvar URL_REG = /[-a-zA-Z0-9@:%._+~#=]{1,256}\\.[a-zA-Z0-9()]{1,6}\\b([-a-zA-Z0-9()@:%_+.~#?&//=]*)/;\n\nvar isUrl = function isUrl(text) {\n  return URL_REG.test(text);\n};\n\nvar truncateString = function truncateString(fullStr, strLen) {\n  if (!strLen) strLen = 40;\n  if (fullStr === null || fullStr === undefined) return '';\n  if (fullStr.length <= strLen) return fullStr;\n  var separator = '...';\n  var sepLen = separator.length;\n  var charsToShow = strLen - sepLen;\n  var frontChars = Math.ceil(charsToShow / 2);\n  var backChars = Math.floor(charsToShow / 2);\n  return fullStr.substr(0, frontChars) + separator + fullStr.substr(fullStr.length - backChars);\n};\n\nvar copyToClipboard = function copyToClipboard(text) {\n  // @ts-ignore: Unreachable code error\n  if (window.clipboardData && window.clipboardData.setData) {\n    // Internet Explorer-specific code path to prevent textarea being shown while dialog is visible.\n    // @ts-ignore: Unreachable code error\n    return window.clipboardData.setData('Text', text);\n  }\n\n  if (document.queryCommandSupported && document.queryCommandSupported('copy')) {\n    var textarea = document.createElement('textarea');\n    textarea.textContent = text;\n    textarea.style.position = 'fixed'; // Prevent scrolling to bottom of page in Microsoft Edge.\n\n    document.body.appendChild(textarea);\n    textarea.select();\n\n    try {\n      return document.execCommand('copy'); // Security exception may be thrown by some browsers.\n    } catch (ex) {\n      return false;\n    } finally {\n      document.body.removeChild(textarea);\n    }\n  }\n\n  return false;\n};\n\nvar getEmojiListAll = function getEmojiListAll(emojiContainer) {\n  var _a;\n\n  return (_a = emojiContainer === null || emojiContainer === void 0 ? void 0 : emojiContainer.emojiCategories) === null || _a === void 0 ? void 0 : _a.map(function (emojiCategory) {\n    return emojiCategory.emojis;\n  }).reduce(function (prevArr, currArr) {\n    return prevArr.concat(currArr);\n  }, []);\n};\n\nvar getEmojiMapAll = function getEmojiMapAll(emojiContainer) {\n  var _a;\n\n  var emojiMap = new Map();\n  (_a = emojiContainer === null || emojiContainer === void 0 ? void 0 : emojiContainer.emojiCategories) === null || _a === void 0 ? void 0 : _a.forEach(function (category) {\n    var _a;\n\n    (_a = category === null || category === void 0 ? void 0 : category.emojis) === null || _a === void 0 ? void 0 : _a.forEach(function (emoji) {\n      if (emoji && emoji.key) {\n        emojiMap.set(emoji.key, emoji);\n      }\n    });\n  });\n  return emojiMap;\n};\n\nvar getUserName = function getUserName(user) {\n  return (user === null || user === void 0 ? void 0 : user.friendName) || (user === null || user === void 0 ? void 0 : user.nickname) || (user === null || user === void 0 ? void 0 : user.userId);\n};\n\nvar getSenderName = function getSenderName(message) {\n  return message.sender && getUserName(message.sender);\n};\n\nvar getMessageCreatedAt = function getMessageCreatedAt(message) {\n  return format(message.createdAt || 0, 'p');\n};\n\nvar hasSameMembers = function hasSameMembers(a, b) {\n  if (a === b) {\n    return true;\n  }\n\n  if (a == null || b == null) {\n    return false;\n  }\n\n  if (a.length !== b.length) {\n    return false;\n  }\n\n  var sortedA = __spreadArray([], a, true).sort();\n\n  var sortedB = __spreadArray([], b, true).sort();\n\n  for (var i = 0; i < sortedA.length; ++i) {\n    if (sortedA[i] !== sortedB[i]) {\n      return false;\n    }\n  }\n\n  return true;\n};\n\nvar isFriend = function isFriend(user) {\n  return !!(user.friendDiscoveryKey || user.friendName);\n};\n\nvar filterMessageListParams = function filterMessageListParams(params, message) {\n  var _a, _b, _c;\n\n  if ((params === null || params === void 0 ? void 0 : params.messageType) && params.messageType !== message.messageType) {\n    return false;\n  }\n\n  if (((_a = params === null || params === void 0 ? void 0 : params.customTypes) === null || _a === void 0 ? void 0 : _a.length) > 0) {\n    var customTypes = params.customTypes.filter(function (item) {\n      return item !== '*';\n    }); // Because Chat SDK inserts '*' when customTypes is empty\n\n    if (customTypes.length > 0 && !customTypes.includes(message.customType)) {\n      return false;\n    }\n  }\n\n  if ((params === null || params === void 0 ? void 0 : params.senderUserIds) && ((_b = params === null || params === void 0 ? void 0 : params.senderUserIds) === null || _b === void 0 ? void 0 : _b.length) > 0) {\n    if ((message === null || message === void 0 ? void 0 : message.isUserMessage()) || message.isFileMessage()) {\n      var messageSender = message.sender || message['_sender'];\n\n      if (!((_c = params === null || params === void 0 ? void 0 : params.senderUserIds) === null || _c === void 0 ? void 0 : _c.includes(messageSender === null || messageSender === void 0 ? void 0 : messageSender.userId))) {\n        return false;\n      }\n    } else {\n      return false;\n    }\n  }\n\n  if (!(params === null || params === void 0 ? void 0 : params.includeParentMessageInfo) && ((message === null || message === void 0 ? void 0 : message.parentMessageId) || (message === null || message === void 0 ? void 0 : message.parentMessage))) {\n    return false;\n  }\n\n  return true;\n};\n\nvar filterChannelListParams = function filterChannelListParams(params, channel, currentUserId) {\n  var _a, _b, _c, _d, _e, _f, _g, _h;\n\n  if (!(params === null || params === void 0 ? void 0 : params.includeEmpty) && (channel === null || channel === void 0 ? void 0 : channel.lastMessage) && channel.lastMessage === null) {\n    return false;\n  }\n\n  if (((_a = params === null || params === void 0 ? void 0 : params._searchFilter) === null || _a === void 0 ? void 0 : _a.search_query) && ((_b = params._searchFilter.search_fields) === null || _b === void 0 ? void 0 : _b.length) > 0) {\n    var searchFilter = params._searchFilter;\n    var searchQuery_1 = searchFilter.search_query;\n    var searchFields = searchFilter.search_fields;\n\n    if (searchQuery_1 && searchFields && searchFields.length > 0) {\n      if (!searchFields.some(function (searchField) {\n        switch (searchField) {\n          case 'channel_name':\n            {\n              return channel.name.toLowerCase().includes(searchQuery_1.toLowerCase());\n            }\n\n          case 'member_nickname':\n            {\n              return channel.members.some(function (member) {\n                return member.nickname.toLowerCase().includes(searchQuery_1.toLowerCase());\n              });\n            }\n\n          default:\n            {\n              return true;\n            }\n        }\n      })) {\n        return false;\n      }\n    }\n  }\n\n  if (((_d = (_c = params === null || params === void 0 ? void 0 : params._userIdsFilter) === null || _c === void 0 ? void 0 : _c.userIds) === null || _d === void 0 ? void 0 : _d.length) > 0) {\n    var userIdsFilter = params._userIdsFilter;\n    var includeMode = userIdsFilter.includeMode,\n        queryType = userIdsFilter.queryType;\n    var userIds = userIdsFilter.userIds;\n    var memberIds_1 = channel.members.map(function (member) {\n      return member.userId;\n    });\n\n    if (!includeMode) {\n      // exact match\n      if (!userIds.includes(currentUserId)) {\n        userIds.push(currentUserId); // add the caller's userId if not added already.\n      }\n\n      if (channel.members.length > userIds.length) {\n        return false; // userIds may contain one or more non-member(s).\n      }\n\n      if (!hasSameMembers(userIds, memberIds_1)) {\n        return false;\n      }\n    } else if (userIds.length > 0) {\n      // inclusive\n      switch (queryType) {\n        case 'AND':\n          {\n            if (userIds.some(function (userId) {\n              return !memberIds_1.includes(userId);\n            })) {\n              return false;\n            }\n\n            break;\n          }\n\n        case 'OR':\n          {\n            if (userIds.every(function (userId) {\n              return !memberIds_1.includes(userId);\n            })) {\n              return false;\n            }\n\n            break;\n          }\n      }\n    }\n  }\n\n  if ((params === null || params === void 0 ? void 0 : params.includeEmpty) === false && (channel === null || channel === void 0 ? void 0 : channel.lastMessage) === null) {\n    return false;\n  }\n\n  if ((params === null || params === void 0 ? void 0 : params.includeFrozen) === false && (channel === null || channel === void 0 ? void 0 : channel.isFrozen) === true) {\n    return false;\n  }\n\n  if (((_e = params === null || params === void 0 ? void 0 : params.customTypesFilter) === null || _e === void 0 ? void 0 : _e.length) > 0 && !params.customTypesFilter.includes(channel === null || channel === void 0 ? void 0 : channel.customType)) {\n    return false;\n  }\n\n  if ((params === null || params === void 0 ? void 0 : params.customTypeStartsWithFilter) && !new RegExp(\"^\" + params.customTypeStartsWithFilter).test(channel === null || channel === void 0 ? void 0 : channel.customType)) {\n    return false;\n  }\n\n  if ((params === null || params === void 0 ? void 0 : params.channelNameContainsFilter) && !((_f = channel === null || channel === void 0 ? void 0 : channel.name) === null || _f === void 0 ? void 0 : _f.toLowerCase().includes(params.channelNameContainsFilter.toLowerCase()))) {\n    return false;\n  }\n\n  if (params === null || params === void 0 ? void 0 : params.nicknameContainsFilter) {\n    var lowerCasedSubString_1 = params.nicknameContainsFilter.toLowerCase();\n\n    if ((_g = channel === null || channel === void 0 ? void 0 : channel.members) === null || _g === void 0 ? void 0 : _g.every(function (member) {\n      return !member.nickname.toLowerCase().includes(lowerCasedSubString_1);\n    })) {\n      return false;\n    }\n  }\n\n  if (((_h = params === null || params === void 0 ? void 0 : params.channelUrlsFilter) === null || _h === void 0 ? void 0 : _h.length) > 0 && !params.channelUrlsFilter.includes(channel === null || channel === void 0 ? void 0 : channel.url)) {\n    return false;\n  }\n\n  if (params === null || params === void 0 ? void 0 : params.memberStateFilter) {\n    switch (params.memberStateFilter) {\n      case 'joined_only':\n        if ((channel === null || channel === void 0 ? void 0 : channel.myMemberState) !== 'joined') {\n          return false;\n        }\n\n        break;\n\n      case 'invited_only':\n        if ((channel === null || channel === void 0 ? void 0 : channel.myMemberState) !== 'invited') {\n          return false;\n        }\n\n        break;\n\n      case 'invited_by_friend':\n        if ((channel === null || channel === void 0 ? void 0 : channel.myMemberState) !== 'invited' || !isFriend(channel.inviter)) {\n          return false;\n        }\n\n        break;\n\n      case 'invited_by_non_friend':\n        if ((channel === null || channel === void 0 ? void 0 : channel.myMemberState) !== 'invited' || isFriend(channel.inviter)) {\n          return false;\n        }\n\n        break;\n    }\n  }\n\n  if (params === null || params === void 0 ? void 0 : params.hiddenChannelFilter) {\n    switch (params.hiddenChannelFilter) {\n      case 'unhidden_only':\n        if ((channel === null || channel === void 0 ? void 0 : channel.isHidden) || (channel === null || channel === void 0 ? void 0 : channel.hiddenState) !== 'unhidden') {\n          return false;\n        }\n\n        break;\n\n      case 'hidden_only':\n        if (!(channel === null || channel === void 0 ? void 0 : channel.isHidden)) {\n          return false;\n        }\n\n        break;\n\n      case 'hidden_allow_auto_unhide':\n        if (!(channel === null || channel === void 0 ? void 0 : channel.isHidden) || (channel === null || channel === void 0 ? void 0 : channel.hiddenState) !== 'hidden_allow_auto_unhide') {\n          return false;\n        }\n\n        break;\n\n      case 'hidden_prevent_auto_unhide':\n        if (!(channel === null || channel === void 0 ? void 0 : channel.isHidden) || (channel === null || channel === void 0 ? void 0 : channel.hiddenState) !== 'hidden_prevent_auto_unhide') {\n          return false;\n        }\n\n        break;\n    }\n  }\n\n  if (params === null || params === void 0 ? void 0 : params.unreadChannelFilter) {\n    switch (params.unreadChannelFilter) {\n      case 'unread_message':\n        if ((channel === null || channel === void 0 ? void 0 : channel.unreadMessageCount) === 0) {\n          return false;\n        }\n\n        break;\n    }\n  }\n\n  if (params === null || params === void 0 ? void 0 : params.publicChannelFilter) {\n    switch (params.publicChannelFilter) {\n      case 'public':\n        if (!(channel === null || channel === void 0 ? void 0 : channel.isPublic)) {\n          return false;\n        }\n\n        break;\n\n      case 'private':\n        if (channel === null || channel === void 0 ? void 0 : channel.isPublic) {\n          return false;\n        }\n\n        break;\n    }\n  }\n\n  if (params === null || params === void 0 ? void 0 : params.superChannelFilter) {\n    switch (params.superChannelFilter) {\n      case 'super':\n        if (!(channel === null || channel === void 0 ? void 0 : channel.isSuper)) {\n          return false;\n        }\n\n        break;\n\n      case 'nonsuper':\n        if (channel === null || channel === void 0 ? void 0 : channel.isSuper) {\n          return false;\n        }\n\n        break;\n    }\n  }\n\n  return true;\n};\n\nvar binarySearch = function binarySearch(list, number) {\n  var pivot = Math.floor(list.length / 2);\n\n  if (list[pivot] === number) {\n    return pivot;\n  }\n\n  var leftList = list.slice(0, pivot);\n  var rightList = list.slice(pivot + 1, list.length);\n\n  if (list[pivot] > number) {\n    return pivot + 1 + (rightList.length === 0 ? 0 : binarySearch(rightList, number));\n  } else {\n    return leftList.length === 0 ? pivot : binarySearch(leftList, number);\n  }\n}; // This is required when channel is displayed on channel list by filter\n\n\nvar getChannelsWithUpsertedChannel = function getChannelsWithUpsertedChannel(channels, channel) {\n  var _a;\n\n  if (channels.some(function (ch) {\n    return ch.url === channel.url;\n  })) {\n    return channels.map(function (ch) {\n      return ch.url === channel.url ? channel : ch;\n    });\n  }\n\n  var targetIndex = binarySearch(channels.map(function (channel) {\n    var _a;\n\n    return ((_a = channel === null || channel === void 0 ? void 0 : channel.lastMessage) === null || _a === void 0 ? void 0 : _a.createdAt) || (channel === null || channel === void 0 ? void 0 : channel.createdAt);\n  }), ((_a = channel === null || channel === void 0 ? void 0 : channel.lastMessage) === null || _a === void 0 ? void 0 : _a.createdAt) || (channel === null || channel === void 0 ? void 0 : channel.createdAt));\n  return __spreadArray(__spreadArray(__spreadArray([], channels.slice(0, targetIndex), true), [channel], false), channels.slice(targetIndex, channels.length), true);\n};\n\nvar IconButton = /*#__PURE__*/React__default.forwardRef(function (props, ref) {\n  var className = props.className,\n      children = props.children,\n      disabled = props.disabled,\n      width = props.width,\n      height = props.height,\n      type = props.type,\n      _onClick = props.onClick,\n      _onBlur = props.onBlur,\n      style = props.style;\n\n  var _useState = useState(''),\n      _useState2 = _slicedToArray(_useState, 2),\n      pressed = _useState2[0],\n      setPressed = _useState2[1];\n\n  return (\n    /*#__PURE__*/\n    // eslint-disable-next-line react/button-has-type\n    React__default.createElement(\"button\", {\n      className: [].concat(_toConsumableArray(Array.isArray(className) ? className : [className]), ['sendbird-iconbutton', pressed]).join(' '),\n      disabled: disabled,\n      ref: ref,\n      type: type // eslint-disable-line react/button-has-type\n      ,\n      style: _objectSpread2(_objectSpread2({}, style), {}, {\n        height: height,\n        width: width\n      }),\n      onClick: function onClick(e) {\n        if (disabled) {\n          return;\n        }\n\n        setPressed('sendbird-iconbutton--pressed');\n\n        _onClick(e);\n      },\n      onBlur: function onBlur(e) {\n        setPressed('');\n\n        _onBlur(e);\n      }\n    }, /*#__PURE__*/React__default.createElement(\"span\", {\n      className: \"sendbird-iconbutton__inner\"\n    }, children))\n  );\n});\nIconButton.propTypes = {\n  className: PropTypes.oneOfType([PropTypes.string, PropTypes.arrayOf(PropTypes.string)]),\n  children: PropTypes.oneOfType([PropTypes.element, PropTypes.arrayOf(PropTypes.element), PropTypes.any]).isRequired,\n  disabled: PropTypes.bool,\n  width: PropTypes.string,\n  height: PropTypes.string,\n  type: PropTypes.string,\n  onClick: PropTypes.func,\n  onBlur: PropTypes.func,\n  style: PropTypes.shape({})\n};\nIconButton.defaultProps = {\n  className: '',\n  disabled: false,\n  width: '56px',\n  height: '56px',\n  type: 'button',\n  onClick: function onClick() {},\n  onBlur: function onBlur() {},\n  style: {}\n}; // simple component to be used as modal root\n\nvar MODAL_ROOT = 'sendbird-modal-root';\nvar Type = {\n  PRIMARY: 'PRIMARY',\n  SECONDARY: 'SECONDARY',\n  DANGER: 'DANGER',\n  DISABLED: 'DISABLED'\n};\nvar Size = {\n  BIG: 'BIG',\n  SMALL: 'SMALL'\n};\n\nfunction changeTypeToClassName(type) {\n  switch (type) {\n    case Type.PRIMARY:\n      return 'sendbird-button--primary';\n\n    case Type.SECONDARY:\n      return 'sendbird-button--secondary';\n\n    case Type.DANGER:\n      return 'sendbird-button--danger';\n\n    case Type.DISABLED:\n      return 'sendbird-button--disabled';\n\n    default:\n      return null;\n  }\n}\n\nfunction changeSizeToClassName(size) {\n  switch (size) {\n    case Size.BIG:\n      return 'sendbird-button--big';\n\n    case Size.SMALL:\n      return 'sendbird-button--small';\n\n    default:\n      return null;\n  }\n}\n\nfunction Button(_ref) {\n  var className = _ref.className,\n      type = _ref.type,\n      size = _ref.size,\n      children = _ref.children,\n      disabled = _ref.disabled,\n      onClick = _ref.onClick;\n  var injectingClassNames = [].concat(_toConsumableArray(Array.isArray(className) ? className : [className]), ['sendbird-button', disabled ? 'sendbird-button__disabled' : '', changeTypeToClassName(type), changeSizeToClassName(size)]).join(' ');\n  return /*#__PURE__*/React__default.createElement(\"button\", {\n    className: injectingClassNames,\n    type: \"button\",\n    onClick: onClick,\n    disabled: disabled\n  }, /*#__PURE__*/React__default.createElement(Label, {\n    className: \"sendbird-button__text\",\n    type: LabelTypography.BUTTON_1,\n    color: LabelColors.ONCONTENT_1\n  }, children));\n}\n\nvar ButtonTypes = Type;\nvar ButtonSizes = Size;\nButton.propTypes = {\n  className: PropTypes.oneOfType([PropTypes.string, PropTypes.arrayOf(PropTypes.string)]),\n  type: PropTypes.oneOf(Object.keys(Type)),\n  size: PropTypes.oneOf(Object.keys(Size)),\n  children: PropTypes.oneOfType([PropTypes.string, PropTypes.element, PropTypes.arrayOf(PropTypes.element)]),\n  disabled: PropTypes.bool,\n  onClick: PropTypes.func\n};\nButton.defaultProps = {\n  className: '',\n  type: Type.PRIMARY,\n  size: Size.BIG,\n  children: 'Button',\n  disabled: false,\n  onClick: function onClick() {}\n};\n\nvar ModalHeader = function ModalHeader(_ref) {\n  var titleText = _ref.titleText;\n  return /*#__PURE__*/React__default.createElement(\"div\", {\n    className: \"sendbird-modal__header\"\n  }, /*#__PURE__*/React__default.createElement(Label, {\n    type: LabelTypography.H_1,\n    color: LabelColors.ONBACKGROUND_1\n  }, titleText));\n};\n\nModalHeader.propTypes = {\n  titleText: PropTypes.string.isRequired\n};\n\nvar ModalBody = function ModalBody(_ref2) {\n  var children = _ref2.children;\n  return /*#__PURE__*/React__default.createElement(\"div\", {\n    className: \"sendbird-modal__body\"\n  }, children);\n};\n\nModalBody.propTypes = {\n  children: PropTypes.oneOfType([PropTypes.element.isRequired, PropTypes.arrayOf(PropTypes.element.isRequired)])\n};\nModalBody.defaultProps = {\n  children: null\n};\n\nvar ModalFooter = function ModalFooter(_ref3) {\n  var onSubmit = _ref3.onSubmit,\n      onCancel = _ref3.onCancel,\n      _ref3$disabled = _ref3.disabled,\n      disabled = _ref3$disabled === void 0 ? false : _ref3$disabled,\n      submitText = _ref3.submitText,\n      type = _ref3.type;\n\n  var _useContext = useContext(LocalizationContext),\n      stringSet = _useContext.stringSet;\n\n  return /*#__PURE__*/React__default.createElement(\"div\", {\n    className: \"sendbird-modal__footer\"\n  }, /*#__PURE__*/React__default.createElement(Button, {\n    type: ButtonTypes.SECONDARY,\n    onClick: onCancel\n  }, /*#__PURE__*/React__default.createElement(Label, {\n    type: LabelTypography.BUTTON_1,\n    color: LabelColors.ONBACKGROUND_1\n  }, stringSet.BUTTON__CANCEL)), /*#__PURE__*/React__default.createElement(Button, {\n    type: type,\n    disabled: disabled,\n    onClick: onSubmit\n  }, submitText));\n};\n\nModalFooter.propTypes = {\n  onCancel: PropTypes.func.isRequired,\n  onSubmit: PropTypes.func.isRequired,\n  submitText: PropTypes.string.isRequired,\n  disabled: PropTypes.bool,\n  type: PropTypes.string\n};\nModalFooter.defaultProps = {\n  disabled: false,\n  type: ButtonTypes.DANGER\n};\n\nfunction Modal(props) {\n  var children = props.children,\n      onCancel = props.onCancel,\n      onSubmit = props.onSubmit,\n      disabled = props.disabled,\n      submitText = props.submitText,\n      titleText = props.titleText,\n      hideFooter = props.hideFooter,\n      type = props.type;\n  return /*#__PURE__*/createPortal( /*#__PURE__*/React__default.createElement(\"div\", {\n    className: \"sendbird-modal\"\n  }, /*#__PURE__*/React__default.createElement(\"div\", {\n    className: \"sendbird-modal__content\"\n  }, /*#__PURE__*/React__default.createElement(ModalHeader, {\n    titleText: titleText\n  }), /*#__PURE__*/React__default.createElement(ModalBody, null, children), !hideFooter && /*#__PURE__*/React__default.createElement(ModalFooter, {\n    disabled: disabled,\n    onCancel: onCancel,\n    onSubmit: onSubmit,\n    submitText: submitText,\n    type: type\n  }), /*#__PURE__*/React__default.createElement(\"div\", {\n    className: \"sendbird-modal__close\"\n  }, /*#__PURE__*/React__default.createElement(IconButton, {\n    width: \"32px\",\n    height: \"32px\",\n    onClick: onCancel\n  }, /*#__PURE__*/React__default.createElement(Icon, {\n    type: IconTypes.CLOSE,\n    fillColor: IconColors.DEFAULT,\n    width: \"24px\",\n    height: \"24px\"\n  })))), /*#__PURE__*/React__default.createElement(\"div\", {\n    className: \"sendbird-modal__backdrop\"\n  })), document.getElementById(MODAL_ROOT));\n}\n\nModal.propTypes = {\n  children: PropTypes.oneOfType([PropTypes.element, PropTypes.arrayOf(PropTypes.element)]),\n  onCancel: PropTypes.func.isRequired,\n  onSubmit: PropTypes.func.isRequired,\n  hideFooter: PropTypes.bool,\n  disabled: PropTypes.bool,\n  type: PropTypes.string\n};\nModal.defaultProps = {\n  children: null,\n  hideFooter: false,\n  disabled: false,\n  type: ButtonTypes.DANGER\n};\nvar Colors = {\n  ONBACKGROUND_1: 'ONBACKGROUND_1',\n  ONBACKGROUND_2: 'ONBACKGROUND_2',\n  ONBACKGROUND_3: 'ONBACKGROUND_3',\n  ONBACKGROUND_4: 'ONBACKGROUND_4',\n  ONCONTENT_1: 'ONCONTENT_1',\n  PRIMARY: 'PRIMARY',\n  ERROR: 'ERROR'\n};\n\nfunction changeColorToClassName(color) {\n  switch (color) {\n    case Colors.ONBACKGROUND_1:\n      return 'sendbird-color--onbackground-1';\n\n    case Colors.ONBACKGROUND_2:\n      return 'sendbird-color--onbackground-2';\n\n    case Colors.ONBACKGROUND_3:\n      return 'sendbird-color--onbackground-3';\n\n    case Colors.ONBACKGROUND_4:\n      return 'sendbird-color--onbackground-4';\n\n    case Colors.ONCONTENT_1:\n      return 'sendbird-color--oncontent-1';\n\n    case Colors.PRIMARY:\n      return 'sendbird-color--primary';\n\n    case Colors.ERROR:\n      return 'sendbird-color--error';\n\n    default:\n      return null;\n  }\n}\n\nfunction TextButton(_ref) {\n  var className = _ref.className,\n      color = _ref.color,\n      disabled = _ref.disabled,\n      notUnderline = _ref.notUnderline,\n      onClick = _ref.onClick,\n      children = _ref.children;\n  return /*#__PURE__*/React__default.createElement(\"div\", {\n    className: [].concat(_toConsumableArray(Array.isArray(className) ? className : [className]), [changeColorToClassName(color), notUnderline ? 'sendbird-textbutton--not-underline' : 'sendbird-textbutton', disabled ? 'sendbird-textbutton--disabled' : '']).join(' '),\n    role: \"button\",\n    tabIndex: 0,\n    onClick: onClick,\n    onKeyPress: onClick\n  }, children);\n}\n\nTextButton.propTypes = {\n  className: PropTypes.oneOfType([PropTypes.string, PropTypes.arrayOf(PropTypes.string)]),\n  color: PropTypes.string,\n  disabled: PropTypes.bool,\n  notUnderline: PropTypes.bool,\n  onClick: PropTypes.func,\n  children: PropTypes.oneOfType([PropTypes.string, PropTypes.element]).isRequired\n};\nTextButton.defaultProps = {\n  className: '',\n  color: Colors.ONBACKGROUND_1,\n  disabled: false,\n  notUnderline: false,\n  onClick: function onClick() {}\n};\nvar SEND_MESSAGE_START = 'SEND_MESSAGE_START';\nvar SEND_USER_MESSAGE = 'SEND_USER_MESSAGE';\nvar SEND_FILE_MESSAGE = 'SEND_FILE_MESSAGE';\nvar UPDATE_USER_MESSAGE = 'UPDATE_USER_MESSAGE';\nvar DELETE_MESSAGE = 'DELETE_MESSAGE';\nvar LEAVE_CHANNEL = 'LEAVE_CHANNEL';\nvar CREATE_CHANNEL = 'CREATE_CHANNEL';\n\nvar getSdk = function getSdk(store) {\n  var _store$stores = store.stores,\n      stores = _store$stores === void 0 ? {} : _store$stores;\n  var _stores$sdkStore = stores.sdkStore,\n      sdkStore = _stores$sdkStore === void 0 ? {} : _stores$sdkStore;\n  var sdk = sdkStore.sdk;\n  return sdk;\n};\n\nvar getPubSub = function getPubSub(store) {\n  var _store$config = store.config,\n      config = _store$config === void 0 ? {} : _store$config;\n  var pubSub = config.pubSub;\n  return pubSub;\n}; // SendBird disconnect. Invalidates currentUser\n// eslint-disable-next-line max-len\n\n\nvar getConnect = function getConnect(store) {\n  return function (userId, accessToken) {\n    return new Promise(function (resolve, reject) {\n      var sdk = getSdk(store);\n\n      if (!sdk) {\n        reject(new Error('Sdk not found'));\n      }\n\n      if (!accessToken) {\n        sdk.connect(userId).then(function (res) {\n          return resolve(res);\n        }).catch(function (err) {\n          return reject(err);\n        });\n      } else {\n        sdk.connect(userId, accessToken).then(function (res) {\n          return resolve(res);\n        }).catch(function (err) {\n          return reject(err);\n        });\n      }\n    });\n  };\n}; // SendBird disconnect. Invalidates currentUser\n\n\nvar getDisconnect = function getDisconnect(store) {\n  return function () {\n    return new Promise(function (resolve, reject) {\n      var sdk = getSdk(store);\n\n      if (!sdk) {\n        reject(new Error('Sdk not found'));\n      }\n\n      sdk.disconnect().then(function (res) {\n        return resolve(res);\n      }).catch(function (err) {\n        return reject(err);\n      });\n    });\n  };\n}; // Using the updateCurrentUserInfo() method\n// you can update a user's nickname and profile image with a URL\n// eslint-disable-next-line max-len\n\n\nvar getUpdateUserInfo = function getUpdateUserInfo(store) {\n  return function (nickName, profileUrl) {\n    return new Promise(function (resolve, reject) {\n      var sdk = getSdk(store);\n\n      if (!sdk) {\n        reject(new Error('Sdk not found'));\n      }\n\n      sdk.updateCurrentUserInfo(nickName, profileUrl).then(function (res) {\n        return resolve(res);\n      }).catch(function (err) {\n        return reject(err);\n      });\n    });\n  };\n};\n\nvar getSendUserMessage = function getSendUserMessage(store) {\n  return function (channelUrl, userMessageParams) {\n    var sdk = getSdk(store);\n    var pubsub = getPubSub(store);\n    return new Promise(function (resolve, reject) {\n      if (!sdk) {\n        reject(new Error('Sdk not found'));\n      }\n\n      sdk.GroupChannel.getChannel(channelUrl).then(function (channel) {\n        var promisify = function promisify() {\n          var pendingMsg = null;\n          var pendingPromise = new Promise(function (resolve_, reject_) {\n            pendingMsg = channel.sendUserMessage(userMessageParams, function (res, err) {\n              var swapParams = sdk.getErrorFirstCallback();\n              var message = res;\n              var error = err;\n\n              if (swapParams) {\n                message = err;\n                error = res;\n              }\n\n              if (error) {\n                reject_(error);\n                return;\n              }\n\n              resolve_(message);\n              pubsub.publish(SEND_USER_MESSAGE, {\n                message: message,\n                channel: channel\n              });\n            });\n            pubsub.publish(SEND_MESSAGE_START, {\n              message: pendingMsg,\n              channel: channel\n            });\n          });\n\n          pendingPromise.get = function () {\n            return pendingMsg;\n          };\n\n          return pendingPromise;\n        };\n\n        resolve(promisify());\n      }).catch(reject);\n    });\n  };\n};\n\nvar getSendFileMessage = function getSendFileMessage(store) {\n  return function (channelUrl, fileMessageParams) {\n    var sdk = getSdk(store);\n    var pubsub = getPubSub(store);\n    return new Promise(function (resolve, reject) {\n      if (!sdk) {\n        reject(new Error('Sdk not found'));\n      }\n\n      sdk.GroupChannel.getChannel(channelUrl).then(function (channel) {\n        var promisify = function promisify() {\n          var pendingMsg = null;\n          var pendingPromise = new Promise(function (resolve_, reject_) {\n            pendingMsg = channel.sendFileMessage(fileMessageParams, function (res, err) {\n              var swapParams = sdk.getErrorFirstCallback();\n              var message = res;\n              var error = err;\n\n              if (swapParams) {\n                message = err;\n                error = res;\n              }\n\n              if (error) {\n                reject_(error);\n                return;\n              }\n\n              resolve_(message);\n              pubsub.publish(SEND_FILE_MESSAGE, {\n                message: message,\n                channel: channel\n              });\n            });\n          });\n\n          if (fileMessageParams.file) {\n            // keep the file's local version in pendingMsg.localUrl\n            // because promise doesnt allow overriding of pendingMsg.url\n            // eslint-disable-next-line no-param-reassign\n            pendingMsg.localUrl = URL.createObjectURL(fileMessageParams.file);\n          }\n\n          if (fileMessageParams.fileUrl) {\n            // eslint-disable-next-line no-param-reassign\n            pendingMsg.localUrl = fileMessageParams.fileUrl;\n          } // eslint-disable-next-line no-param-reassign\n\n\n          pendingMsg.requestState = 'pending';\n          pubsub.publish(SEND_MESSAGE_START, {\n            message: pendingMsg,\n            channel: channel\n          });\n\n          pendingPromise.get = function () {\n            return pendingMsg;\n          };\n\n          return pendingPromise;\n        };\n\n        resolve(promisify());\n      }).catch(reject);\n    });\n  };\n};\n\nvar getUpdateUserMessage = function getUpdateUserMessage(store) {\n  return function (channelUrl, messageId, params) {\n    var sdk = getSdk(store);\n    var pubsub = getPubSub(store);\n    return new Promise(function (resolve, reject) {\n      if (!sdk) {\n        reject(new Error('Sdk not found'));\n      }\n\n      sdk.GroupChannel.getChannel(channelUrl).then(function (channel) {\n        channel.updateUserMessage(messageId, params, function (res, err) {\n          var swapParams = sdk.getErrorFirstCallback();\n          var message = res;\n          var error = err;\n\n          if (swapParams) {\n            message = err;\n            error = res;\n          }\n\n          if (error) {\n            reject(error);\n            return;\n          }\n\n          resolve(message);\n          pubsub.publish(UPDATE_USER_MESSAGE, {\n            message: message,\n            channel: channel,\n            // workaround for updating channelPreview on message-edit\n            // https://sendbird.atlassian.net/browse/UIKIT-268\n            fromSelector: true\n          });\n        });\n      }).catch(reject);\n    });\n  };\n};\n\nvar getDeleteMessage = function getDeleteMessage(store) {\n  return function (channelUrl, message) {\n    var sdk = getSdk(store);\n    var pubsub = getPubSub(store);\n    return new Promise(function (resolve, reject) {\n      if (!sdk) {\n        reject(new Error('Sdk not found'));\n      }\n\n      sdk.GroupChannel.getChannel(channelUrl).then(function (channel) {\n        var messageId = message.messageId;\n        channel.deleteMessage(message, function (res, err) {\n          var swapParams = sdk.getErrorFirstCallback();\n          var error = err;\n\n          if (swapParams) {\n            error = res;\n          }\n\n          if (error) {\n            reject(error);\n            return;\n          }\n\n          resolve(message);\n          pubsub.publish(DELETE_MESSAGE, {\n            messageId: messageId,\n            channel: channel\n          });\n        });\n      }).catch(reject);\n    });\n  };\n};\n\nvar getResendUserMessage = function getResendUserMessage(store) {\n  return function (channelUrl, failedMessage) {\n    var sdk = getSdk(store);\n    var pubsub = getPubSub(store);\n    return new Promise(function (resolve, reject) {\n      if (!sdk) {\n        reject(new Error('Sdk not found'));\n      }\n\n      sdk.GroupChannel.getChannel(channelUrl).then(function (channel) {\n        channel.resendUserMessage(failedMessage).then(function (message) {\n          resolve(message);\n          pubsub.publish(SEND_USER_MESSAGE, {\n            message: message,\n            channel: channel\n          });\n        }).catch(reject);\n      }).catch(reject);\n    });\n  };\n};\n\nvar getResendFileMessage = function getResendFileMessage(store) {\n  return function (channelUrl, failedMessage) {\n    var sdk = getSdk(store);\n    var pubsub = getPubSub(store);\n    return new Promise(function (resolve, reject) {\n      if (!sdk) {\n        reject(new Error('Sdk not found'));\n      }\n\n      sdk.GroupChannel.getChannel(channelUrl).then(function (channel) {\n        channel.resendFileMessage(failedMessage).then(function (message) {\n          resolve(message);\n          pubsub.publish(SEND_FILE_MESSAGE, {\n            message: message,\n            channel: channel\n          });\n        }).catch(reject);\n      }).catch(reject);\n    });\n  };\n};\n\nvar getCreateChannel = function getCreateChannel(store) {\n  return function (params) {\n    var sdk = getSdk(store);\n    var pubsub = getPubSub(store);\n    return new Promise(function (resolve, reject) {\n      if (!sdk) {\n        reject(new Error('Sdk not found'));\n      }\n\n      sdk.GroupChannel.createChannel(params).then(function (channel) {\n        resolve(channel);\n        pubsub.publish(CREATE_CHANNEL, {\n          channel: channel\n        });\n      }).catch(reject);\n    });\n  };\n};\n\nvar getLeaveChannel = function getLeaveChannel(store) {\n  return function (channelUrl) {\n    var sdk = getSdk(store);\n    var pubsub = getPubSub(store);\n    return new Promise(function (resolve, reject) {\n      if (!sdk) {\n        reject(new Error('Sdk not found'));\n      }\n\n      sdk.GroupChannel.getChannel(channelUrl).then(function (channel) {\n        channel.leave().then(function () {\n          resolve(channel);\n          pubsub.publish(LEAVE_CHANNEL, {\n            channel: channel\n          });\n        }).catch(reject);\n      }).catch(reject);\n    });\n  };\n};\n\nvar getFreezeChannel = function getFreezeChannel(store) {\n  return function (channelUrl) {\n    var sdk = getSdk(store);\n    return new Promise(function (resolve, reject) {\n      if (!sdk) {\n        reject(new Error('Sdk not found'));\n      }\n\n      sdk.GroupChannel.getChannel(channelUrl).then(function (channel) {\n        channel.freeze().then(function () {\n          // do not need pubsub here - event listener works\n          resolve(channel);\n        }).catch(reject);\n      }).catch(reject);\n    });\n  };\n};\n\nvar getUnFreezeChannel = function getUnFreezeChannel(store) {\n  return function (channelUrl) {\n    var sdk = getSdk(store);\n    return new Promise(function (resolve, reject) {\n      if (!sdk) {\n        reject(new Error('Sdk not found'));\n      }\n\n      sdk.GroupChannel.getChannel(channelUrl).then(function (channel) {\n        channel.unfreeze().then(function () {\n          // do not need pubsub here - event listener works\n          resolve(channel);\n        }).catch(reject);\n      }).catch(reject);\n    });\n  };\n};\n\nvar getCreateOpenChannel = function getCreateOpenChannel(store) {\n  return function (params) {\n    var sdk = getSdk(store);\n    return new Promise(function (resolve, reject) {\n      if (!sdk) {\n        reject(new Error('Sdk not found'));\n      }\n\n      sdk.OpenChannel.createChannel(params).then(function (channel) {\n        resolve(channel);\n      }).catch(reject);\n    });\n  };\n};\n\nvar enterOpenChannel = function enterOpenChannel(store) {\n  return function (channelUrl) {\n    var sdk = getSdk(store);\n    return new Promise(function (resolve, reject) {\n      if (!sdk) {\n        reject(new Error('Sdk not found'));\n      }\n\n      sdk.OpenChannel.getChannel(channelUrl, function (openChannel, error) {\n        if (error) {\n          reject(new Error(error));\n          return;\n        }\n\n        openChannel.enter(function (response, enterError) {\n          if (error) {\n            reject(new Error(enterError));\n            return;\n          }\n\n          resolve(response);\n        });\n      });\n    });\n  };\n};\n\nvar exitOpenChannel = function exitOpenChannel(store) {\n  return function (channelUrl) {\n    var sdk = getSdk(store);\n    return new Promise(function (resolve, reject) {\n      if (!sdk) {\n        reject(new Error('Sdk not found'));\n      }\n\n      sdk.OpenChannel.getChannel(channelUrl, function (openChannel, error) {\n        if (error) {\n          reject(new Error(error));\n          return;\n        }\n\n        openChannel.exit(function (response, exitError) {\n          if (error) {\n            reject(new Error(exitError));\n            return;\n          }\n\n          resolve(response);\n        });\n      });\n    });\n  };\n};\n\nvar getOpenChannelSendUserMessage = function getOpenChannelSendUserMessage(store) {\n  return function (channelUrl, userMessageParams) {\n    var sdk = getSdk(store);\n    var pubsub = getPubSub(store);\n    return new Promise(function (resolve, reject) {\n      if (!sdk) {\n        reject(new Error('Sdk not found'));\n      }\n\n      sdk.OpenChannel.getChannel(channelUrl).then(function (channel) {\n        var promisify = function promisify() {\n          var pendingMsg = null;\n          var pendingPromise = new Promise(function (resolve_, reject_) {\n            pendingMsg = channel.sendUserMessage(userMessageParams, function (res, err) {\n              var swapParams = sdk.getErrorFirstCallback();\n              var message = res;\n              var error = err;\n\n              if (swapParams) {\n                message = err;\n                error = res;\n              }\n\n              if (error) {\n                reject_(error);\n                return;\n              }\n\n              resolve_(message);\n              pubsub.publish(SEND_USER_MESSAGE, {\n                message: message,\n                channel: channel\n              });\n            });\n            pubsub.publish(SEND_MESSAGE_START, {\n              message: pendingMsg,\n              channel: channel\n            });\n          });\n\n          pendingPromise.get = function () {\n            return pendingMsg;\n          };\n\n          return pendingPromise;\n        };\n\n        resolve(promisify());\n      }).catch(reject);\n    });\n  };\n};\n\nvar getOpenChannelSendFileMessage = function getOpenChannelSendFileMessage(store) {\n  return function (channelUrl, fileMessageParams) {\n    var sdk = getSdk(store);\n    var pubsub = getPubSub(store);\n    return new Promise(function (resolve, reject) {\n      if (!sdk) {\n        reject(new Error('Sdk not found'));\n      }\n\n      sdk.OpenChannel.getChannel(channelUrl).then(function (channel) {\n        var promisify = function promisify() {\n          var pendingMsg = null;\n          var pendingPromise = new Promise(function (resolve_, reject_) {\n            pendingMsg = channel.sendFileMessage(fileMessageParams, function (res, err) {\n              var swapParams = sdk.getErrorFirstCallback();\n              var message = res;\n              var error = err;\n\n              if (swapParams) {\n                message = err;\n                error = res;\n              }\n\n              if (error) {\n                reject_(error);\n                return;\n              }\n\n              resolve_(message);\n              pubsub.publish(SEND_FILE_MESSAGE, {\n                message: message,\n                channel: channel\n              });\n            });\n          });\n\n          if (fileMessageParams.file) {\n            // keep the file's local version in pendingMsg.localUrl\n            // because promise doesnt allow overriding of pendingMsg.url\n            // eslint-disable-next-line no-param-reassign\n            pendingMsg.localUrl = URL.createObjectURL(fileMessageParams.file);\n          }\n\n          if (fileMessageParams.fileUrl) {\n            // eslint-disable-next-line no-param-reassign\n            pendingMsg.localUrl = fileMessageParams.fileUrl;\n          } // eslint-disable-next-line no-param-reassign\n\n\n          pendingMsg.requestState = 'pending';\n          pubsub.publish(SEND_MESSAGE_START, {\n            message: pendingMsg,\n            channel: channel\n          });\n\n          pendingPromise.get = function () {\n            return pendingMsg;\n          };\n\n          return pendingPromise;\n        };\n\n        resolve(promisify());\n      }).catch(reject);\n    });\n  };\n};\n\nvar getOpenChannelUpdateUserMessage = function getOpenChannelUpdateUserMessage(store) {\n  return function (channelUrl, messageId, params) {\n    var sdk = getSdk(store);\n    var pubsub = getPubSub(store);\n    return new Promise(function (resolve, reject) {\n      if (!sdk) {\n        reject(new Error('Sdk not found'));\n      }\n\n      sdk.OpenChannel.getChannel(channelUrl).then(function (channel) {\n        channel.updateUserMessage(messageId, params, function (res, err) {\n          var swapParams = sdk.getErrorFirstCallback();\n          var message = res;\n          var error = err;\n\n          if (swapParams) {\n            message = err;\n            error = res;\n          }\n\n          if (error) {\n            reject(error);\n            return;\n          }\n\n          resolve(message);\n          pubsub.publish(UPDATE_USER_MESSAGE, {\n            message: message,\n            channel: channel,\n            // workaround for updating channelPreview on message-edit\n            // https://sendbird.atlassian.net/browse/UIKIT-268\n            fromSelector: true\n          });\n        });\n      }).catch(reject);\n    });\n  };\n};\n\nvar getOpenChannelDeleteMessage = function getOpenChannelDeleteMessage(store) {\n  return function (channelUrl, message) {\n    var sdk = getSdk(store);\n    var pubsub = getPubSub(store);\n    return new Promise(function (resolve, reject) {\n      if (!sdk) {\n        reject(new Error('Sdk not found'));\n      }\n\n      sdk.OpenChannel.getChannel(channelUrl).then(function (channel) {\n        var messageId = message.messageId;\n        channel.deleteMessage(message, function (res, err) {\n          var swapParams = sdk.getErrorFirstCallback();\n          var error = err;\n\n          if (swapParams) {\n            error = res;\n          }\n\n          if (error) {\n            reject(error);\n            return;\n          }\n\n          resolve(message);\n          pubsub.publish(DELETE_MESSAGE, {\n            messageId: messageId,\n            channel: channel\n          });\n        });\n      }).catch(reject);\n    });\n  };\n};\n\nvar getOpenChannelResendUserMessage = function getOpenChannelResendUserMessage(store) {\n  return function (channelUrl, failedMessage) {\n    var sdk = getSdk(store);\n    var pubsub = getPubSub(store);\n    return new Promise(function (resolve, reject) {\n      if (!sdk) {\n        reject(new Error('Sdk not found'));\n      }\n\n      sdk.OpenChannel.getChannel(channelUrl).then(function (channel) {\n        channel.resendUserMessage(failedMessage).then(function (message) {\n          resolve(message);\n          pubsub.publish(SEND_USER_MESSAGE, {\n            message: message,\n            channel: channel\n          });\n        }).catch(reject);\n      }).catch(reject);\n    });\n  };\n};\n\nvar getOpenChannelResendFileMessage = function getOpenChannelResendFileMessage(store) {\n  return function (channelUrl, failedMessage) {\n    var sdk = getSdk(store);\n    var pubsub = getPubSub(store);\n    return new Promise(function (resolve, reject) {\n      if (!sdk) {\n        reject(new Error('Sdk not found'));\n      }\n\n      sdk.OpenChannel.getChannel(channelUrl).then(function (channel) {\n        channel.resendFileMessage(failedMessage).then(function (message) {\n          resolve(message);\n          pubsub.publish(SEND_FILE_MESSAGE, {\n            message: message,\n            channel: channel\n          });\n        }).catch(reject);\n      }).catch(reject);\n    });\n  };\n};\n\nvar selectors = {\n  getSdk: getSdk,\n  getConnect: getConnect,\n  getDisconnect: getDisconnect,\n  getUpdateUserInfo: getUpdateUserInfo,\n  getSendUserMessage: getSendUserMessage,\n  getSendFileMessage: getSendFileMessage,\n  getUpdateUserMessage: getUpdateUserMessage,\n  getDeleteMessage: getDeleteMessage,\n  getResendUserMessage: getResendUserMessage,\n  getResendFileMessage: getResendFileMessage,\n  getFreezeChannel: getFreezeChannel,\n  getUnFreezeChannel: getUnFreezeChannel,\n  getCreateChannel: getCreateChannel,\n  getLeaveChannel: getLeaveChannel,\n  getCreateOpenChannel: getCreateOpenChannel,\n  getEnterOpenChannel: enterOpenChannel,\n  getExitOpenChannel: exitOpenChannel,\n  getOpenChannelSendUserMessage: getOpenChannelSendUserMessage,\n  getOpenChannelSendFileMessage: getOpenChannelSendFileMessage,\n  getOpenChannelUpdateUserMessage: getOpenChannelUpdateUserMessage,\n  getOpenChannelDeleteMessage: getOpenChannelDeleteMessage,\n  getOpenChannelResendUserMessage: getOpenChannelResendUserMessage,\n  getOpenChannelResendFileMessage: getOpenChannelResendFileMessage\n};\n\nfunction UserProfile(_a) {\n  var user = _a.user,\n      currentUserId = _a.currentUserId,\n      sdk = _a.sdk,\n      logger = _a.logger,\n      _b = _a.disableMessaging,\n      disableMessaging = _b === void 0 ? false : _b,\n      createChannel = _a.createChannel,\n      onSuccess = _a.onSuccess;\n  var stringSet = useContext(LocalizationContext).stringSet;\n  return /*#__PURE__*/React__default.createElement(\"div\", {\n    className: \"sendbird__user-profile\"\n  }, /*#__PURE__*/React__default.createElement(\"section\", {\n    className: \"sendbird__user-profile-avatar\"\n  }, /*#__PURE__*/React__default.createElement(Avatar, {\n    height: \"80px\",\n    width: \"80px\",\n    src: user.profileUrl\n  })), /*#__PURE__*/React__default.createElement(\"section\", {\n    className: \"sendbird__user-profile-name\"\n  }, /*#__PURE__*/React__default.createElement(Label, {\n    type: LabelTypography.H_2,\n    color: LabelColors.ONBACKGROUND_1\n  }, user.nickname || stringSet.NO_NAME)), user.userId !== currentUserId && !disableMessaging && /*#__PURE__*/React__default.createElement(\"section\", {\n    className: \"sendbird__user-profile-message\"\n  }, /*#__PURE__*/React__default.createElement(Button, {\n    type: ButtonTypes.SECONDARY,\n    onClick: function onClick() {\n      var params = new sdk.GroupChannelParams();\n      params.isDistinct = true;\n      params.addUserIds([user.userId]);\n      onSuccess();\n      createChannel(params).then(function (groupChannel) {\n        logger.info('UserProfile, channel create', groupChannel);\n      });\n    }\n  }, stringSet.USER_PROFILE__MESSAGE)), /*#__PURE__*/React__default.createElement(\"div\", {\n    className: \"sendbird__user-profile-separator\"\n  }), /*#__PURE__*/React__default.createElement(\"section\", {\n    className: \"sendbird__user-profile-userId\"\n  }, /*#__PURE__*/React__default.createElement(Label, {\n    className: \"sendbird__user-profile-userId--label\",\n    type: LabelTypography.CAPTION_2,\n    color: LabelColors.ONBACKGROUND_2\n  }, stringSet.USER_PROFILE__USER_ID), /*#__PURE__*/React__default.createElement(Label, {\n    className: \"sendbird__user-profile-userId--value\",\n    type: LabelTypography.BODY_1,\n    color: LabelColors.ONBACKGROUND_1\n  }, user.userId)));\n}\n\nvar mapStoreToProps = function mapStoreToProps(store) {\n  return {\n    sdk: getSdk(store),\n    createChannel: getCreateChannel(store),\n    logger: store.config.logger,\n    pubsub: store.config.pubSub\n  };\n};\n\nvar ConnectedUserProfile = withSendbirdContext(UserProfile, mapStoreToProps);\n\nvar MenuItems$1 = /*#__PURE__*/function (_Component) {\n  _inherits(MenuItems, _Component);\n\n  var _super = _createSuper(MenuItems);\n\n  function MenuItems(props) {\n    var _this;\n\n    _classCallCheck(this, MenuItems);\n\n    _this = _super.call(this, props);\n\n    _defineProperty(_assertThisInitialized(_this), \"showParent\", function () {\n      var _this$props$parentCon = _this.props.parentContainRef,\n          parentContainRef = _this$props$parentCon === void 0 ? {} : _this$props$parentCon;\n      var current = parentContainRef.current;\n\n      if (parentContainRef && current) {\n        current.classList.add('sendbird-icon--pressed');\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"hideParent\", function () {\n      var _this$props$parentCon2 = _this.props.parentContainRef,\n          parentContainRef = _this$props$parentCon2 === void 0 ? {} : _this$props$parentCon2;\n      var current = parentContainRef.current;\n\n      if (parentContainRef && current) {\n        current.classList.remove('sendbird-icon--pressed');\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"setupEvents\", function () {\n      var closeDropdown = _this.props.closeDropdown;\n\n      var _assertThisInitialize = _assertThisInitialized(_this),\n          menuRef = _assertThisInitialize.menuRef;\n\n      var handleClickOutside = function handleClickOutside(event) {\n        if (menuRef.current && !menuRef.current.contains(event.target)) {\n          closeDropdown();\n        }\n      };\n\n      _this.setState({\n        handleClickOutside: handleClickOutside\n      });\n\n      document.addEventListener('mousedown', handleClickOutside);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"cleanUpEvents\", function () {\n      var handleClickOutside = _this.state.handleClickOutside;\n      document.removeEventListener('mousedown', handleClickOutside);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"getMenuPosition\", function () {\n      var _this$props = _this.props,\n          parentRef = _this$props.parentRef,\n          openLeft = _this$props.openLeft;\n      var parentRect = parentRef.current.getBoundingClientRect();\n      var x = parentRect.x || parentRect.left;\n      var y = parentRect.y || parentRect.top;\n      var menuStyle = {\n        top: y,\n        left: x\n      };\n      if (!_this.menuRef.current) return menuStyle;\n      var _window = window,\n          innerWidth = _window.innerWidth,\n          innerHeight = _window.innerHeight;\n\n      var rect = _this.menuRef.current.getBoundingClientRect();\n\n      if (y + rect.height > innerHeight) {\n        menuStyle.top -= rect.height;\n      }\n\n      if (x + rect.width > innerWidth && !openLeft) {\n        menuStyle.left -= rect.width;\n      }\n\n      if (menuStyle.top < 0) {\n        menuStyle.top = rect.height < innerHeight ? (innerHeight - rect.height) / 2 : 0;\n      }\n\n      if (menuStyle.left < 0) {\n        menuStyle.left = rect.width < innerWidth ? (innerWidth - rect.width) / 2 : 0;\n      }\n\n      menuStyle.top += 32;\n\n      if (openLeft) {\n        var padding = Number.isNaN(rect.width - 30) ? 108 // default\n        : rect.width - 30;\n        menuStyle.left -= padding;\n      }\n\n      return _this.setState({\n        menuStyle: menuStyle\n      });\n    });\n\n    _this.menuRef = /*#__PURE__*/React__default.createRef();\n    _this.state = {\n      menuStyle: {},\n      handleClickOutside: function handleClickOutside() {}\n    };\n    return _this;\n  }\n\n  _createClass(MenuItems, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.setupEvents();\n      this.getMenuPosition();\n      this.showParent();\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.cleanUpEvents();\n      this.hideParent();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var menuStyle = this.state.menuStyle;\n      var _this$props2 = this.props,\n          children = _this$props2.children,\n          style = _this$props2.style;\n      return /*#__PURE__*/createPortal( /*#__PURE__*/React__default.createElement(React__default.Fragment, null, /*#__PURE__*/React__default.createElement(\"div\", {\n        className: \"sendbird-dropdown__menu-backdrop\"\n      }), /*#__PURE__*/React__default.createElement(\"ul\", {\n        className: \"sendbird-dropdown__menu\",\n        ref: this.menuRef,\n        style: _objectSpread2({\n          display: 'inline-block',\n          position: 'fixed',\n          left: \"\".concat(Math.round(menuStyle.left), \"px\"),\n          top: \"\".concat(Math.round(menuStyle.top), \"px\")\n        }, style)\n      }, children)), document.getElementById('sendbird-dropdown-portal'));\n    }\n  }]);\n\n  return MenuItems;\n}(Component);\n\nMenuItems$1.propTypes = {\n  closeDropdown: PropTypes.func.isRequired,\n  children: PropTypes.oneOfType([PropTypes.element, PropTypes.arrayOf(PropTypes.element)]).isRequired,\n  style: PropTypes.shape({}),\n  // https://stackoverflow.com/a/51127130\n  parentRef: PropTypes.oneOfType([PropTypes.func, PropTypes.shape({\n    current: PropTypes.instanceOf(Element)\n  })]).isRequired,\n  parentContainRef: PropTypes.oneOfType([PropTypes.func, PropTypes.shape({\n    current: PropTypes.instanceOf(Element)\n  })]).isRequired,\n  openLeft: PropTypes.bool\n};\nMenuItems$1.defaultProps = {\n  style: {},\n  openLeft: false\n};\nvar componentClassName = 'sendbird-sort-by-row';\n\nfunction SortByRow(_ref) {\n  var className = _ref.className,\n      maxItemCount = _ref.maxItemCount,\n      itemWidth = _ref.itemWidth,\n      itemHeight = _ref.itemHeight,\n      children = _ref.children;\n\n  if (children.length > maxItemCount) {\n    var result = [];\n\n    for (var i = 0; i < children.length; i += maxItemCount) {\n      result.push( /*#__PURE__*/React__default.createElement(\"div\", {\n        className: [].concat(_toConsumableArray(Array.isArray(className) ? className : [className]), [componentClassName]).join(' '),\n        key: className + i,\n        style: {\n          width: itemWidth * maxItemCount,\n          height: itemHeight\n        }\n      }, children.slice(i, i + maxItemCount)));\n    }\n\n    return result;\n  }\n\n  return /*#__PURE__*/React__default.createElement(\"div\", {\n    className: [].concat(_toConsumableArray(Array.isArray(className) ? className : [className]), [componentClassName]).join(' '),\n    style: {\n      width: itemWidth * children.length,\n      height: itemHeight\n    }\n  }, children);\n}\n\nSortByRow.propTypes = {\n  className: PropTypes.oneOfType([PropTypes.string, PropTypes.arrayOf(PropTypes.string)]),\n  maxItemCount: PropTypes.number.isRequired,\n  itemWidth: PropTypes.number.isRequired,\n  itemHeight: PropTypes.number.isRequired,\n  children: PropTypes.oneOfType([PropTypes.element, PropTypes.arrayOf(PropTypes.element), PropTypes.string, PropTypes.arrayOf(PropTypes.string)]).isRequired\n};\nSortByRow.defaultProps = {\n  className: ''\n};\n\nvar EmojiListItems$1 = /*#__PURE__*/function (_Component) {\n  _inherits(EmojiListItems, _Component);\n\n  var _super = _createSuper(EmojiListItems);\n\n  function EmojiListItems(props) {\n    var _this;\n\n    _classCallCheck(this, EmojiListItems);\n\n    _this = _super.call(this, props);\n\n    _defineProperty(_assertThisInitialized(_this), \"showParent\", function () {\n      var _this$props$parentCon = _this.props.parentContainRef,\n          parentContainRef = _this$props$parentCon === void 0 ? {} : _this$props$parentCon;\n      var current = parentContainRef.current;\n\n      if (parentContainRef && current) {\n        current.classList.add('sendbird-reactions--pressed');\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"hideParent\", function () {\n      var _this$props$parentCon2 = _this.props.parentContainRef,\n          parentContainRef = _this$props$parentCon2 === void 0 ? {} : _this$props$parentCon2;\n      var current = parentContainRef.current;\n\n      if (parentContainRef && current) {\n        current.classList.remove('sendbird-reactions--pressed');\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"setupEvents\", function () {\n      var closeDropdown = _this.props.closeDropdown;\n\n      var _assertThisInitialize = _assertThisInitialized(_this),\n          reactionRef = _assertThisInitialize.reactionRef;\n\n      var handleClickOutside = function handleClickOutside(event) {\n        if (reactionRef.current && !reactionRef.current.contains(event.target)) {\n          closeDropdown();\n        }\n      };\n\n      _this.setState({\n        handleClickOutside: handleClickOutside\n      });\n\n      document.addEventListener('mousedown', handleClickOutside);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"cleanUpEvents\", function () {\n      var handleClickOutside = _this.state.handleClickOutside;\n      document.removeEventListener('mousedown', handleClickOutside);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"getBarPosition\", function () {\n      // calculate the location that the context menu should be\n      var _this$props = _this.props,\n          parentRef = _this$props.parentRef,\n          spaceFromTrigger = _this$props.spaceFromTrigger;\n      var spaceFromTriggerX = spaceFromTrigger.x || 0;\n      var spaceFromTriggerY = spaceFromTrigger.y || 0;\n      var parentRect = parentRef.current.getBoundingClientRect();\n      var x = parentRect.x || parentRect.left;\n      var y = parentRect.y || parentRect.top;\n      var reactionStyle = {\n        top: y,\n        left: x\n      };\n      if (!_this.reactionRef.current) return reactionStyle;\n\n      var rect = _this.reactionRef.current.getBoundingClientRect();\n\n      if (reactionStyle.top < rect.height) {\n        reactionStyle.top += parentRect.height;\n        reactionStyle.top += spaceFromTriggerY;\n      } else {\n        reactionStyle.top -= rect.height;\n        reactionStyle.top -= spaceFromTriggerY;\n      }\n\n      reactionStyle.left -= rect.width / 2;\n      reactionStyle.left += parentRect.height / 2 - 2;\n      reactionStyle.left += spaceFromTriggerX;\n      var maximumLeft = window.innerWidth - rect.width;\n\n      if (maximumLeft < reactionStyle.left) {\n        reactionStyle.left = maximumLeft;\n      }\n\n      if (reactionStyle.left < 0) {\n        reactionStyle.left = 0;\n      }\n\n      return _this.setState({\n        reactionStyle: reactionStyle\n      });\n    });\n\n    _this.reactionRef = /*#__PURE__*/React__default.createRef();\n    _this.state = {\n      reactionStyle: {},\n      handleClickOutside: function handleClickOutside() {}\n    };\n    return _this;\n  }\n\n  _createClass(EmojiListItems, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.setupEvents();\n      this.getBarPosition();\n      this.showParent();\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.cleanUpEvents();\n      this.hideParent();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var reactionStyle = this.state.reactionStyle;\n      var children = this.props.children;\n      return /*#__PURE__*/createPortal( /*#__PURE__*/React__default.createElement(React__default.Fragment, null, /*#__PURE__*/React__default.createElement(\"div\", {\n        className: \"sendbird-dropdown__menu-backdrop\"\n      }), /*#__PURE__*/React__default.createElement(\"ul\", {\n        className: \"sendbird-dropdown__reaction-bar\",\n        ref: this.reactionRef,\n        style: {\n          display: 'inline-block',\n          position: 'fixed',\n          left: \"\".concat(Math.round(reactionStyle.left), \"px\"),\n          top: \"\".concat(Math.round(reactionStyle.top), \"px\")\n        }\n      }, /*#__PURE__*/React__default.createElement(SortByRow, {\n        className: \"sendbird-dropdown__reaction-bar__row\",\n        maxItemCount: 8,\n        itemWidth: 44,\n        itemHeight: 40\n      }, children))), document.getElementById('sendbird-emoji-list-portal'));\n    }\n  }]);\n\n  return EmojiListItems;\n}(Component);\n\nEmojiListItems$1.propTypes = {\n  closeDropdown: PropTypes.func.isRequired,\n  children: PropTypes.oneOfType([PropTypes.element, PropTypes.arrayOf(PropTypes.element)]).isRequired,\n  parentRef: PropTypes.oneOfType([PropTypes.func, PropTypes.shape({\n    current: PropTypes.instanceOf(Element)\n  })]).isRequired,\n  parentContainRef: PropTypes.oneOfType([PropTypes.func, PropTypes.shape({\n    current: PropTypes.instanceOf(Element)\n  })]).isRequired,\n  spaceFromTrigger: PropTypes.shape({\n    x: PropTypes.number,\n    y: PropTypes.number\n  })\n};\nEmojiListItems$1.defaultProps = {\n  spaceFromTrigger: {}\n};\nvar ENTER = 13;\nvar MenuItems = MenuItems$1;\nvar EmojiListItems = EmojiListItems$1;\n\nvar MenuItem = function MenuItem(_ref) {\n  var className = _ref.className,\n      children = _ref.children,\n      onClick = _ref.onClick,\n      disable = _ref.disable;\n\n  var handleClickEvent = function handleClickEvent(e) {\n    if (!disable) onClick(e);\n  };\n\n  return /*#__PURE__*/React__default.createElement(\"li\", {\n    className: getClassName([className, 'sendbird-dropdown__menu-item', disable ? 'disable' : '']),\n    role: \"menuitem\",\n    onClick: handleClickEvent,\n    onKeyPress: function onKeyPress(e) {\n      if (e.keyCode === ENTER) handleClickEvent(e);\n    },\n    tabIndex: 0\n  }, /*#__PURE__*/React__default.createElement(Label, {\n    className: \"sendbird-dropdown__menu-item__text\",\n    type: LabelTypography.SUBTITLE_2,\n    color: disable ? LabelColors.ONBACKGROUND_4 : LabelColors.ONBACKGROUND_1\n  }, children));\n};\n\nMenuItem.propTypes = {\n  className: PropTypes.oneOfType([PropTypes.string, PropTypes.arrayOf(PropTypes.string)]),\n  children: PropTypes.oneOfType([PropTypes.string, PropTypes.element]).isRequired,\n  onClick: PropTypes.func.isRequired,\n  disable: PropTypes.bool\n};\nMenuItem.defaultProps = {\n  className: '',\n  disable: false\n}; // Root components should be appended before ContextMenu is rendered\n\nfunction ContextMenu(_ref2) {\n  var menuTrigger = _ref2.menuTrigger,\n      menuItems = _ref2.menuItems;\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      showMenu = _useState2[0],\n      setShowMenu = _useState2[1];\n\n  return /*#__PURE__*/React__default.createElement(\"div\", {\n    className: \"sendbird-context-menu\",\n    style: {\n      display: 'inline'\n    }\n  }, menuTrigger(function () {\n    return setShowMenu(!showMenu);\n  }), showMenu && menuItems(function () {\n    return setShowMenu(false);\n  }));\n}\n\nContextMenu.propTypes = {\n  menuTrigger: PropTypes.func.isRequired,\n  menuItems: PropTypes.func.isRequired\n};\nexport { getOutgoingMessageState as $, copyToClipboard as A, Button as B, ContextMenu as C, DELETE_MESSAGE as D, EmojiListItems as E, getEmojiListAll as F, getEmojiMapAll as G, isReactedBy as H, IconButton as I, getEmojiTooltipString as J, isEditedMessage as K, LEAVE_CHANNEL as L, Modal as M, getUIKitFileType as N, isVideoMessage as O, isGifMessage as P, isUrl as Q, getUIKitFileTypes as R, SEND_MESSAGE_START as S, Type as T, UserProfileContext as U, isThumbnailMessage as V, isVideo as W, isGif as X, isFileMessage as Y, isSupportedFileView as Z, getUIKitMessageTypes as _, TextButton as a, getSenderName as a0, isTextMessage as a1, isOGMessage as a2, getUIKitMessageType as a3, isImageMessage as a4, isAudioMessage as a5, Colors as a6, changeColorToClassName as a7, MODAL_ROOT as a8, isImage as a9, MenuItems as b, MenuItem as c, ButtonTypes as d, ButtonSizes as e, ConnectedUserProfile as f, getSdk as g, UserProfileProvider as h, filterChannelListParams as i, getChannelsWithUpsertedChannel as j, CREATE_CHANNEL as k, UPDATE_USER_MESSAGE as l, getOutgoingMessageStates as m, getSendingMessageStatus as n, SEND_USER_MESSAGE as o, SEND_FILE_MESSAGE as p, filterMessageListParams as q, isSentStatus as r, selectors as s, truncateString as t, getMessageCreatedAt as u, isUserMessage as v, isFailedMessage as w, isPendingMessage as x, isSentMessage as y, getClassName as z };","map":{"version":3,"sources":["../src/lib/UserProfileContext.jsx","../src/utils/index.ts","../src/ui/IconButton/index.jsx","../src/hooks/useModal/ModalRoot/index.jsx","../src/ui/Button/type.js","../src/ui/Button/utils.js","../src/ui/Button/index.jsx","../src/ui/Modal/index.jsx","../src/utils/color.js","../src/ui/TextButton/index.jsx","../src/lib/pubSub/topics.js","../src/lib/selectors.js","../src/ui/UserProfile/index.tsx","../src/ui/ContextMenu/items/MenuItems.jsx","../src/ui/SortByRow/index.jsx","../src/ui/ContextMenu/items/EmojiListItems.jsx","../src/ui/ContextMenu/index.jsx"],"names":["UserProfileContext","disableUserProfile","isOpenChannel","renderUserProfile","UserProfileProvider","children","className","props","PropTypes","string","SUPPORTED_MIMES","IMAGE","VIDEO","AUDIO","UIKitMessageTypes","ADMIN","TEXT","FILE","THUMBNAIL","OG","UNKNOWN","UIKitFileTypes","GIF","OTHERS","SendingMessageStatus","NONE","SUCCEEDED","FAILED","PENDING","OutgoingMessageStates","SENT","DELIVERED","READ","isImage","isVideo","isGif","isSupportedFileView","isAudio","getUIKitFileTypes","getUIKitFileType","getOutgoingMessageStates","getOutgoingMessageState","message","channel","isSentMessage","isFailedMessage","isPendingMessage","isSentStatus","state","isAdminMessage","isUserMessage","isFileMessage","isOGMessage","isTextMessage","isThumbnailMessage","isImageMessage","isVideoMessage","isGifMessage","isAudioMessage","isEditedMessage","getUIKitMessageTypes","getUIKitMessageType","getSendingMessageStatus","reducer","Array","accumulator","currentValue","getClassName","classNames","isReactedBy","getEmojiTooltipString","you","reaction","stringSet","memberNicknamesMap","URL_REG","isUrl","truncateString","strLen","fullStr","separator","sepLen","charsToShow","frontChars","Math","backChars","copyToClipboard","window","document","textarea","getEmojiListAll","map","reduce","getEmojiMapAll","emojiMap","forEach","emoji","getUserName","user","getSenderName","getMessageCreatedAt","hasSameMembers","a","b","sortedA","__spreadArray","sortedB","i","isFriend","filterMessageListParams","params","customTypes","messageSender","includes","filterChannelListParams","searchFilter","searchQuery_1","searchFields","userIdsFilter","queryType","userIds","memberIds_1","toLowerCase","lowerCasedSubString_1","every","member","binarySearch","pivot","list","leftList","rightList","getChannelsWithUpsertedChannel","ch","targetIndex","channels","IconButton","disabled","width","height","type","onClick","onBlur","style","pressed","setPressed","useState","MODAL_ROOT","Type","PRIMARY","SECONDARY","DANGER","DISABLED","Size","BIG","SMALL","size","injectingClassNames","changeTypeToClassName","changeSizeToClassName","LabelTypography","LabelColors","ONCONTENT_1","ButtonTypes","ButtonSizes","Button","Object","func","ModalHeader","titleText","ONBACKGROUND_1","isRequired","ModalBody","ModalFooter","onSubmit","onCancel","submitText","useContext","hideFooter","createPortal","React","IconTypes","IconColors","Modal","Colors","ONBACKGROUND_2","ONBACKGROUND_3","ONBACKGROUND_4","ERROR","color","notUnderline","changeColorToClassName","TextButton","SEND_MESSAGE_START","SEND_USER_MESSAGE","SEND_FILE_MESSAGE","UPDATE_USER_MESSAGE","DELETE_MESSAGE","LEAVE_CHANNEL","CREATE_CHANNEL","getSdk","stores","store","sdkStore","sdk","getPubSub","config","pubSub","getConnect","reject","resolve","getDisconnect","getUpdateUserInfo","getSendUserMessage","pubsub","promisify","pendingMsg","pendingPromise","swapParams","error","reject_","resolve_","getSendFileMessage","fileMessageParams","URL","getUpdateUserMessage","fromSelector","getDeleteMessage","messageId","getResendUserMessage","getResendFileMessage","getCreateChannel","getLeaveChannel","getFreezeChannel","getUnFreezeChannel","getCreateOpenChannel","enterOpenChannel","openChannel","exitOpenChannel","getOpenChannelSendUserMessage","getOpenChannelSendFileMessage","getOpenChannelUpdateUserMessage","getOpenChannelDeleteMessage","getOpenChannelResendUserMessage","getOpenChannelResendFileMessage","getEnterOpenChannel","getExitOpenChannel","currentUserId","logger","_b","createChannel","onSuccess","profileUrl","mapStoreToProps","ConnectedUserProfile","withSendbirdContext","MenuItems","Component","menuStyle","handleClickOutside","parentContainRef","current","closeDropdown","menuRef","event","parentRef","openLeft","parentRect","x","y","top","left","innerWidth","innerHeight","rect","padding","display","position","bool","componentClassName","maxItemCount","itemWidth","itemHeight","result","SortByRow","EmojiListItems","reactionStyle","reactionRef","spaceFromTrigger","spaceFromTriggerX","spaceFromTriggerY","maximumLeft","number","ENTER","MenuItems_","EmojiListItems_","MenuItem","disable","handleClickEvent","e","menuTrigger","menuItems","showMenu","setShowMenu","ContextMenu"],"mappings":"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","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\n\n/**\n * user profile goes deep inside the component tree\n * use this context as a short circuit to send in values\n */\nconst UserProfileContext = React.createContext({\n  disableUserProfile: true,\n  isOpenChannel: false,\n  renderUserProfile: null,\n});\n\nconst UserProfileProvider = (props) => {\n  const { children, className } = props;\n  return (\n    <UserProfileContext.Provider value={props}>\n      <div className={className}>\n        {children}\n      </div>\n    </UserProfileContext.Provider>\n  );\n};\n\nUserProfileProvider.propTypes = {\n  children: PropTypes.oneOfType([\n    PropTypes.element,\n    PropTypes.arrayOf(PropTypes.element),\n    PropTypes.any,\n  ]).isRequired,\n  // eslint-disable-next-line react/no-unused-prop-types\n  isOpenChannel: PropTypes.bool,\n  // eslint-disable-next-line react/no-unused-prop-types\n  disableUserProfile: PropTypes.bool,\n  // eslint-disable-next-line react/no-unused-prop-types\n  renderUserProfile: PropTypes.func,\n  className: PropTypes.string,\n};\n\nUserProfileProvider.defaultProps = {\n  className: null,\n  isOpenChannel: false,\n  disableUserProfile: false,\n  renderUserProfile: null,\n};\n\nexport { UserProfileContext, UserProfileProvider };\n","import format from 'date-fns/format';\nimport { AdminMessage, Emoji, EmojiCategory, EmojiContainer, FileMessage, GroupChannel, GroupChannelListQuery, Member, MessageListParams, OpenChannel, Reaction, SendBirdInstance, User, UserMessage } from \"sendbird\";\n\n// https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Complete_list_of_MIME_types\nconst SUPPORTED_MIMES = {\n  IMAGE: [\n    'image/jpeg',\n    'image/jpg',\n    'image/png',\n    'image/gif',\n    'image/svg+xml',\n    'image/webp', // not supported in IE\n  ],\n  VIDEO: [\n    'video/mpeg',\n    'video/ogg',\n    'video/webm',\n    'video/mp4',\n  ],\n  AUDIO: [\n    'audio/aac',\n    'audio/midi',\n    'audio/x-midi',\n    'audio/mpeg',\n    'audio/ogg',\n    'audio/opus',\n    'audio/wav',\n    'audio/webm',\n    'audio/3gpp',\n    'audio/3gpp2',\n    'audio/mp3',\n  ],\n};\n\nexport interface UIKitMessageTypes {\n  ADMIN: \"ADMIN\",\n  TEXT: \"TEXT\",\n  FILE: \"FILE\",\n  THUMBNAIL: \"THUMBNAIL\",\n  OG: \"OG\",\n  UNKNOWN: \"UNKNOWN\",\n}\nconst UIKitMessageTypes: UIKitMessageTypes = {\n  ADMIN: \"ADMIN\",\n  TEXT: \"TEXT\",\n  FILE: \"FILE\",\n  THUMBNAIL: \"THUMBNAIL\",\n  OG: \"OG\",\n  UNKNOWN: \"UNKNOWN\",\n};\nexport interface UIKitFileTypes {\n  IMAGE: \"IMAGE\",\n  AUDIO: \"AUDIO\",\n  VIDEO: \"VIDEO\",\n  GIF: \"GIF\",\n  OTHERS: \"OTHERS\",\n}\nexport const UIKitFileTypes: UIKitFileTypes = {\n  IMAGE: \"IMAGE\",\n  AUDIO: \"AUDIO\",\n  VIDEO: \"VIDEO\",\n  GIF: \"GIF\",\n  OTHERS: \"OTHERS\",\n};\n\nexport interface SendingMessageStatus {\n  NONE: 'none',\n  SUCCEEDED: 'succeeded',\n  FAILED: 'failed',\n  PENDING: 'pending',\n}\nconst SendingMessageStatus: SendingMessageStatus = {\n  NONE: 'none',\n  SUCCEEDED: 'succeeded',\n  FAILED: 'failed',\n  PENDING: 'pending',\n};\n\nexport interface OutgoingMessageStates {\n  NONE: 'NONE',\n  PENDING: 'PENDING',\n  SENT: 'SENT',\n  FAILED: 'FAILED',\n  DELIVERED: 'DELIVERED',\n  READ: 'READ',\n  // delivered and read are only in group channel\n}\nconst OutgoingMessageStates: OutgoingMessageStates = {\n  NONE: 'NONE',\n  PENDING: 'PENDING',\n  SENT: 'SENT',\n  FAILED: 'FAILED',\n  DELIVERED: 'DELIVERED',\n  READ: 'READ',\n};\n\nexport type CoreMessageType = AdminMessage | UserMessage | FileMessage;\n\nexport const isImage = (type: string): boolean => SUPPORTED_MIMES.IMAGE.indexOf(type) >= 0;\nexport const isVideo = (type: string): boolean => SUPPORTED_MIMES.VIDEO.indexOf(type) >= 0;\nexport const isGif = (type: string): boolean => type === 'image/gif';\nexport const isSupportedFileView = (type: string): boolean => isImage(type) || isVideo(type);\nexport const isAudio = (type: string): boolean => SUPPORTED_MIMES.AUDIO.indexOf(type) >= 0;\n\nexport const getUIKitFileTypes = (): UIKitFileTypes => ({ ...UIKitFileTypes });\nexport const getUIKitFileType = (type: string): string => {\n  if (isGif(type)) return UIKitFileTypes.GIF;\n  if (isImage(type)) return UIKitFileTypes.IMAGE;\n  if (isVideo(type)) return UIKitFileTypes.VIDEO;\n  if (isAudio(type)) return UIKitFileTypes.AUDIO;\n  return UIKitFileTypes.OTHERS;\n};\nexport const getOutgoingMessageStates = (): OutgoingMessageStates => ({ ...OutgoingMessageStates });\nexport const getOutgoingMessageState = (channel: GroupChannel | OpenChannel, message: UserMessage | FileMessage): string => {\n  if (message.sendingStatus === 'pending') return OutgoingMessageStates.PENDING;\n  if (message.sendingStatus === 'failed') return OutgoingMessageStates.FAILED;\n  if (channel?.isGroupChannel?.()) {\n    /* GroupChannel only */\n    if ((channel as GroupChannel).getUnreadMemberCount(message) === 0) {\n      return OutgoingMessageStates.READ;\n    } else if ((channel as GroupChannel).getUndeliveredMemberCount(message) === 0) {\n      return OutgoingMessageStates.DELIVERED;\n    }\n  }\n  if (message.sendingStatus === 'succeeded') return OutgoingMessageStates.SENT;\n  return OutgoingMessageStates.NONE;\n};\nexport const isSentMessage = (channel: GroupChannel | OpenChannel, message: UserMessage | FileMessage): boolean => (\n  getOutgoingMessageState(channel, message) === OutgoingMessageStates.SENT\n  || getOutgoingMessageState(channel, message) === OutgoingMessageStates.DELIVERED\n  || getOutgoingMessageState(channel, message) === OutgoingMessageStates.READ\n);\nexport const isDeliveredMessage = (channel: GroupChannel, message: UserMessage | FileMessage): boolean => (\n  getOutgoingMessageState(channel, message) === OutgoingMessageStates.DELIVERED\n  || getOutgoingMessageState(channel, message) === OutgoingMessageStates.READ\n);\nexport const isReadMessage = (channel: GroupChannel, message: UserMessage | FileMessage): boolean => (\n  getOutgoingMessageState(channel, message) === OutgoingMessageStates.READ\n);\n// TODO: Remove channel from the params, it seems unnecessary\nexport const isFailedMessage = (channel: GroupChannel | OpenChannel, message: UserMessage | FileMessage): boolean => (\n  getOutgoingMessageState(channel, message) === OutgoingMessageStates.FAILED\n);\nexport const isPendingMessage = (channel: GroupChannel | OpenChannel, message: UserMessage | FileMessage): boolean => (\n  getOutgoingMessageState(channel, message) === OutgoingMessageStates.PENDING\n);\nexport const isSentStatus = (state: string): boolean => (\n  state === OutgoingMessageStates.SENT\n  || state === OutgoingMessageStates.DELIVERED\n  || state === OutgoingMessageStates.READ\n);\n\nexport const isAdminMessage = (message: AdminMessage): boolean => (\n  message && (message.isAdminMessage?.() || (message['messageType'] && message.messageType === 'admin'))\n);\nexport const isUserMessage = (message: UserMessage): boolean => (\n  message && (message.isUserMessage?.() || (message['messageType'] && message.messageType === 'user'))\n);\nexport const isFileMessage = (message: FileMessage): boolean => (\n  message && (message.isFileMessage?.() || (message['messageType'] && message.messageType === 'file'))\n);\n\nexport const isOGMessage = (message: UserMessage): boolean => !!(\n  message && isUserMessage(message) && message?.ogMetaData && message?.ogMetaData?.url\n);\nexport const isTextMessage = (message: UserMessage): boolean => isUserMessage(message) && !isOGMessage(message);\nexport const isThumbnailMessage = (message: FileMessage): boolean => message && isFileMessage(message) && isSupportedFileView(message.type);\nexport const isImageMessage = (message: FileMessage): boolean => message && isThumbnailMessage(message) && isImage(message.type);\nexport const isVideoMessage = (message: FileMessage): boolean => message && isThumbnailMessage(message) && isVideo(message.type);\nexport const isGifMessage = (message: FileMessage): boolean => message && isThumbnailMessage(message) && isGif(message.type);\nexport const isAudioMessage = (message: FileMessage): boolean => message && isFileMessage(message) && isAudio(message.type);\n\nexport const isEditedMessage = (message: UserMessage): boolean => isUserMessage(message) && (message?.updatedAt > 0);\nexport const isEnabledOGMessage = (message: UserMessage): boolean => (\n  (!message || !message.ogMetaData || !message.ogMetaData.url) ? false : true\n);\n\nexport const getUIKitMessageTypes = (): UIKitMessageTypes => ({ ...UIKitMessageTypes });\nexport const getUIKitMessageType = (message: CoreMessageType): string => {\n  if (isAdminMessage(message as AdminMessage)) return UIKitMessageTypes.ADMIN;\n  if (isUserMessage(message as UserMessage)) {\n    return isOGMessage(message as UserMessage) ? UIKitMessageTypes.OG : UIKitMessageTypes.TEXT;\n  }\n  if (isFileMessage(message as FileMessage)) {\n    return isThumbnailMessage(message as FileMessage) ? UIKitMessageTypes.THUMBNAIL : UIKitMessageTypes.FILE;\n  }\n  return UIKitMessageTypes.UNKNOWN;\n};\nexport const getSendingMessageStatus = (): SendingMessageStatus => ({ ...SendingMessageStatus });\n\nconst reducer = (accumulator: Array<string>, currentValue: string | Array<string>): Array<any> => {\n  if (Array.isArray(currentValue)) {\n    return [...accumulator, ...currentValue];\n  } else {\n    accumulator.push(currentValue);\n    return accumulator;\n  }\n};\nexport const getClassName = (classNames: string | Array<string | Array<string>>): string => (\n  Array.isArray(classNames)\n    ? classNames.reduce(reducer, []).join(' ')\n    : classNames\n);\nexport const isReactedBy = (userId: string, reaction: Reaction): boolean => (\n  reaction.userIds.some((reactorUserId: string): boolean => reactorUserId === userId)\n);\ninterface StringSet {\n  TOOLTIP__YOU: string;\n  TOOLTIP__AND_YOU: string;\n  TOOLTIP__UNKNOWN_USER: string;\n}\nexport const getEmojiTooltipString = (reaction: Reaction, userId: string, memberNicknamesMap: Map<string, string>, stringSet: StringSet): string => {\n  let you = '';\n  if (isReactedBy(userId, reaction)) {\n    you = reaction.userIds.length === 1 ? stringSet.TOOLTIP__YOU : stringSet.TOOLTIP__AND_YOU;\n  }\n  return (`${reaction.userIds\n    .filter((reactorUserId: string) => reactorUserId !== userId)\n    .map((reactorUserId: string) => (memberNicknamesMap.get(reactorUserId) || stringSet.TOOLTIP__UNKNOWN_USER))\n    .join(', ')}${you}`);\n};\n\n// TODO: Use the interface after language tranlsatation of Sendbird.js\ninterface UIKitStore {\n  stores: {\n    sdkStore: {\n      sdk: SendBirdInstance,\n    },\n    userStore: {\n      user: User,\n    },\n  },\n  config: {\n    useReaction: boolean,\n  }\n}\nexport const getCurrentUserId = (store: UIKitStore): string => (store?.stores?.userStore?.user?.userId);\nexport const getUseReaction = (store: UIKitStore, channel: GroupChannel | OpenChannel): boolean => {\n  if (!store?.config?.useReaction)\n    return false;\n  if (!store?.stores?.sdkStore?.sdk?.appInfo?.isUsingReaction)\n    return false;\n  if (channel?.isGroupChannel())\n    return !((channel as GroupChannel).isBroadcast || (channel as GroupChannel).isSuper);\n  return store?.config?.useReaction;\n};\n\nexport const isMessageSentByMe = (userId: string, message: UserMessage | FileMessage): boolean => (\n  (userId && message?.sender?.userId) && userId === message.sender.userId\n);\n\nconst URL_REG = /[-a-zA-Z0-9@:%._+~#=]{1,256}\\.[a-zA-Z0-9()]{1,6}\\b([-a-zA-Z0-9()@:%_+.~#?&//=]*)/;\nexport const isUrl = (text: string): boolean => URL_REG.test(text);\n\nexport const truncateString = (fullStr: string, strLen?: number): string => {\n  if (!strLen) strLen = 40;\n  if (fullStr === null || fullStr === undefined) return '';\n  if (fullStr.length <= strLen) return fullStr;\n  const separator = '...';\n  const sepLen = separator.length;\n  const charsToShow = strLen - sepLen;\n  const frontChars = Math.ceil(charsToShow / 2);\n  const backChars = Math.floor(charsToShow / 2);\n  return fullStr.substr(0, frontChars) + separator + fullStr.substr(fullStr.length - backChars);\n};\n\nexport const copyToClipboard = (text: string): boolean => {\n  // @ts-ignore: Unreachable code error\n  if (window.clipboardData && window.clipboardData.setData) {\n    // Internet Explorer-specific code path to prevent textarea being shown while dialog is visible.\n    // @ts-ignore: Unreachable code error\n    return window.clipboardData.setData('Text', text);\n  }\n  if (document.queryCommandSupported && document.queryCommandSupported('copy')) {\n    const textarea = document.createElement('textarea');\n    textarea.textContent = text;\n    textarea.style.position = 'fixed'; // Prevent scrolling to bottom of page in Microsoft Edge.\n    document.body.appendChild(textarea);\n    textarea.select();\n    try {\n      return document.execCommand('copy'); // Security exception may be thrown by some browsers.\n    } catch (ex) {\n      return false;\n    } finally {\n      document.body.removeChild(textarea);\n    }\n  }\n  return false;\n};\n\nexport const getEmojiListAll = (emojiContainer: EmojiContainer): Array<Emoji> => (\n  emojiContainer?.emojiCategories?.map((emojiCategory: EmojiCategory) => emojiCategory.emojis)\n    .reduce((prevArr: Array<Emoji>, currArr: Array<Emoji>) => prevArr.concat(currArr), [])\n);\nexport const getEmojiMapAll = (emojiContainer: EmojiContainer): Map<string, Emoji> => {\n  const emojiMap = new Map();\n  emojiContainer?.emojiCategories?.forEach((category: EmojiCategory) => {\n    category?.emojis?.forEach((emoji: Emoji): void => {\n      if (emoji && emoji.key) {\n        emojiMap.set(emoji.key, emoji);\n      }\n    });\n  });\n  return emojiMap;\n};\n\nexport const getUserName = (user: User): string => (user?.friendName || user?.nickname || user?.userId);\nexport const getSenderName = (message: UserMessage | FileMessage): string => (message.sender && getUserName(message.sender));\nexport const getMessageCreatedAt = (message: UserMessage | FileMessage): string => format(message.createdAt || 0, 'p');\n\nexport const hasSameMembers = <T>(a: T[], b: T[]): boolean => {\n  if (a === b) {\n    return true;\n  }\n  if (a == null || b == null) {\n    return false;\n  }\n  if (a.length !== b.length) {\n    return false;\n  }\n\n  const sortedA = [...a].sort();\n  const sortedB = [...b].sort();\n\n  for (let i = 0; i < sortedA.length; ++i) {\n    if (sortedA[i] !== sortedB[i]) {\n      return false;\n    }\n  }\n  return true;\n}\nexport const isFriend = (user: User): boolean => !!(user.friendDiscoveryKey || user.friendName);\n\nexport const filterMessageListParams = (params: MessageListParams, message: UserMessage | FileMessage): boolean => {\n  if (params?.messageType && params.messageType !== message.messageType) {\n    return false;\n  }\n  if (params?.customTypes?.length > 0) {\n    const customTypes = params.customTypes.filter((item) => item !== '*');\n    // Because Chat SDK inserts '*' when customTypes is empty\n    if (customTypes.length > 0 && !customTypes.includes(message.customType)) {\n      return false;\n    }\n  }\n  if (params?.senderUserIds && params?.senderUserIds?.length > 0) {\n    if (message?.isUserMessage() || message.isFileMessage()) {\n      const messageSender = (message as UserMessage | FileMessage).sender || message['_sender'];\n      if (!params?.senderUserIds?.includes(messageSender?.userId)) {\n        return false;\n      }\n    } else {\n      return false;\n    }\n  }\n  if (!params?.includeParentMessageInfo && (message?.parentMessageId || message?.parentMessage)) {\n    return false;\n  }\n  return true;\n};\n\ninterface SDKChannelListParamsPrivateProps extends GroupChannelListQuery {\n  _searchFilter: {\n    search_query: string,\n    search_fields: Array<'member_nickname' | 'channel_name'>,\n  };\n  _userIdsFilter: {\n    userIds: Array<string>,\n    includeMode: boolean,\n    queryType: 'AND' | 'OR',\n  };\n}\nexport const filterChannelListParams = (params: SDKChannelListParamsPrivateProps, channel: GroupChannel, currentUserId: string): boolean => {\n  if (!params?.includeEmpty && channel?.lastMessage && channel.lastMessage === null) {\n    return false;\n  }\n  if (params?._searchFilter?.search_query && params._searchFilter.search_fields?.length > 0) {\n    const searchFilter = params._searchFilter;\n    const searchQuery = searchFilter.search_query;\n    const searchFields = searchFilter.search_fields;\n    if (searchQuery && searchFields && searchFields.length > 0) {\n      if (!searchFields.some((searchField) => {\n        switch (searchField) {\n          case 'channel_name': {\n            return channel.name.toLowerCase().includes(searchQuery.toLowerCase());\n          }\n          case 'member_nickname': {\n            return channel.members.some((member: Member) => member.nickname.toLowerCase().includes(searchQuery.toLowerCase()));\n          }\n          default: {\n            return true;\n          }\n        }\n      })) {\n        return false;\n      }\n    }\n  }\n  if (params?._userIdsFilter?.userIds?.length > 0) {\n    const userIdsFilter = params._userIdsFilter;\n    const { includeMode, queryType } = userIdsFilter;\n    const userIds: string[] = userIdsFilter.userIds;\n    const memberIds = channel.members.map((member: Member) => member.userId);\n    if (!includeMode) { // exact match\n      if (!userIds.includes(currentUserId)) {\n        userIds.push(currentUserId); // add the caller's userId if not added already.\n      }\n      if (channel.members.length > userIds.length) {\n        return false; // userIds may contain one or more non-member(s).\n      }\n      if (!hasSameMembers(userIds, memberIds)) {\n        return false;\n      }\n    } else if (userIds.length > 0) { // inclusive\n      switch (queryType) {\n        case 'AND': {\n          if (userIds.some((userId: string) => !memberIds.includes(userId))) {\n            return false;\n          }\n          break;\n        }\n        case 'OR': {\n          if (userIds.every((userId: string) => !memberIds.includes(userId))) {\n            return false;\n          }\n          break;\n        }\n        default: {\n          break;\n        }\n      }\n    }\n  }\n  if (params?.includeEmpty === false && channel?.lastMessage === null) {\n    return false;\n  }\n  if (params?.includeFrozen === false && channel?.isFrozen === true) {\n    return false;\n  }\n  if (params?.customTypesFilter?.length > 0 && !params.customTypesFilter.includes(channel?.customType)) {\n    return false;\n  }\n  if (params?.customTypeStartsWithFilter && !new RegExp(`^${params.customTypeStartsWithFilter}`).test(channel?.customType)) {\n    return false;\n  }\n  if (params?.channelNameContainsFilter && !channel?.name?.toLowerCase().includes(params.channelNameContainsFilter.toLowerCase())) {\n    return false;\n  }\n  if (params?.nicknameContainsFilter) {\n    const lowerCasedSubString = params.nicknameContainsFilter.toLowerCase();\n    if (channel?.members?.every((member: Member) => !member.nickname.toLowerCase().includes(lowerCasedSubString))) {\n      return false;\n    }\n  }\n  if (params?.channelUrlsFilter?.length > 0 && !params.channelUrlsFilter.includes(channel?.url)) {\n    return false;\n  }\n  if (params?.memberStateFilter) {\n    switch (params.memberStateFilter) {\n      case 'joined_only':\n        if (channel?.myMemberState !== 'joined') {\n          return false;\n        }\n        break;\n      case 'invited_only':\n        if (channel?.myMemberState !== 'invited') {\n          return false;\n        }\n        break;\n      case 'invited_by_friend':\n        if (channel?.myMemberState !== 'invited' || !isFriend(channel.inviter)) {\n          return false;\n        }\n        break;\n      case 'invited_by_non_friend':\n        if (channel?.myMemberState !== 'invited' || isFriend(channel.inviter)) {\n          return false;\n        }\n        break;\n    }\n  }\n  if (params?.hiddenChannelFilter) {\n    switch (params.hiddenChannelFilter) {\n      case 'unhidden_only':\n        if (channel?.isHidden || channel?.hiddenState !== 'unhidden') {\n          return false;\n        }\n        break;\n      case 'hidden_only':\n        if (!channel?.isHidden) {\n          return false;\n        }\n        break;\n      case 'hidden_allow_auto_unhide':\n        if (!channel?.isHidden || channel?.hiddenState !== 'hidden_allow_auto_unhide') {\n          return false;\n        }\n        break;\n      case 'hidden_prevent_auto_unhide':\n        if (!channel?.isHidden || channel?.hiddenState !== 'hidden_prevent_auto_unhide') {\n          return false;\n        }\n        break;\n    }\n  }\n  if (params?.unreadChannelFilter) {\n    switch (params.unreadChannelFilter) {\n      case 'unread_message':\n        if (channel?.unreadMessageCount === 0) {\n          return false;\n        }\n        break;\n    }\n  }\n  if (params?.publicChannelFilter) {\n    switch (params.publicChannelFilter) {\n      case 'public':\n        if (!channel?.isPublic) {\n          return false;\n        }\n        break;\n      case 'private':\n        if (channel?.isPublic) {\n          return false;\n        }\n        break;\n    }\n  }\n  if (params?.superChannelFilter) {\n    switch (params.superChannelFilter) {\n      case 'super':\n        if (!channel?.isSuper) {\n          return false;\n        }\n        break;\n      case 'nonsuper':\n        if (channel?.isSuper) {\n          return false;\n        }\n        break;\n    }\n  }\n  return true;\n};\n\nexport const binarySearch = (list: Array<number>, number: number): number => {// [100, 99, 98, 97, ...]\n  const pivot = Math.floor(list.length / 2);\n  if (list[pivot] === number) {\n    return pivot;\n  }\n  const leftList = list.slice(0, pivot);\n  const rightList = list.slice(pivot + 1, list.length);\n  if (list[pivot] > number) {\n    return pivot + 1 + (rightList.length === 0 ? 0 : binarySearch(rightList, number));\n  } else {\n    return (leftList.length === 0) ? pivot : binarySearch(leftList, number);\n  }\n};\n// This is required when channel is displayed on channel list by filter\nexport const getChannelsWithUpsertedChannel = (channels: Array<GroupChannel>, channel: GroupChannel): Array<GroupChannel> => {\n  if (channels.some((ch: GroupChannel) => ch.url === channel.url)) {\n    return channels.map((ch: GroupChannel) => (ch.url === channel.url ? channel : ch));\n  }\n  const targetIndex = binarySearch(\n    channels.map((channel: GroupChannel) => channel?.lastMessage?.createdAt || channel?.createdAt),\n    channel?.lastMessage?.createdAt || channel?.createdAt\n  );\n  return [...channels.slice(0, targetIndex), channel, ...channels.slice(targetIndex, channels.length)];\n};\n","import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\n\nimport './index.scss';\n\nconst IconButton = React.forwardRef((props, ref) => {\n  const {\n    className,\n    children,\n    disabled,\n    width,\n    height,\n    type,\n    onClick,\n    onBlur,\n    style,\n  } = props;\n\n  const [pressed, setPressed] = useState('');\n\n  return (\n    // eslint-disable-next-line react/button-has-type\n    <button\n      className={[\n        ...(Array.isArray(className) ? className : [className]),\n        'sendbird-iconbutton',\n        pressed,\n      ].join(' ')}\n      disabled={disabled}\n      ref={ref}\n      type={type} // eslint-disable-line react/button-has-type\n      style={{\n        ...style,\n        height,\n        width,\n      }}\n      onClick={(e) => {\n        if (disabled) { return; }\n        setPressed('sendbird-iconbutton--pressed');\n        onClick(e);\n      }}\n      onBlur={(e) => {\n        setPressed('');\n        onBlur(e);\n      }}\n    >\n      <span className=\"sendbird-iconbutton__inner\">\n        {children}\n      </span>\n    </button>\n  );\n});\n\nIconButton.propTypes = {\n  className: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.arrayOf(PropTypes.string),\n  ]),\n  children: PropTypes.oneOfType([\n    PropTypes.element,\n    PropTypes.arrayOf(PropTypes.element),\n    PropTypes.any,\n  ]).isRequired,\n  disabled: PropTypes.bool,\n  width: PropTypes.string,\n  height: PropTypes.string,\n  type: PropTypes.string,\n  onClick: PropTypes.func,\n  onBlur: PropTypes.func,\n  style: PropTypes.shape({}),\n};\n\nIconButton.defaultProps = {\n  className: '',\n  disabled: false,\n  width: '56px',\n  height: '56px',\n  type: 'button',\n  onClick: () => { },\n  onBlur: () => { },\n  style: {},\n};\n\nexport default IconButton;\n","// simple component to be used as modal root\nimport React from 'react';\n\nexport const MODAL_ROOT = 'sendbird-modal-root';\n\nexport default () => (\n  <div id={MODAL_ROOT} />\n);\n","export const Type = {\n  PRIMARY: 'PRIMARY',\n  SECONDARY: 'SECONDARY',\n  DANGER: 'DANGER',\n  DISABLED: 'DISABLED',\n};\n\nexport const Size = {\n  BIG: 'BIG',\n  SMALL: 'SMALL',\n};\n","import { Type, Size } from './type';\n\nexport function changeTypeToClassName(type) {\n  switch (type) {\n    case Type.PRIMARY: return 'sendbird-button--primary';\n    case Type.SECONDARY: return 'sendbird-button--secondary';\n    case Type.DANGER: return 'sendbird-button--danger';\n    case Type.DISABLED: return 'sendbird-button--disabled';\n    default: return null;\n  }\n}\n\nexport function changeSizeToClassName(size) {\n  switch (size) {\n    case Size.BIG: return 'sendbird-button--big';\n    case Size.SMALL: return 'sendbird-button--small';\n    default: return null;\n  }\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport './index.scss';\nimport Label, { LabelTypography, LabelColors } from '../Label';\nimport { Type, Size } from './type';\nimport { changeTypeToClassName, changeSizeToClassName } from './utils';\n\nexport default function Button({\n  className,\n  type,\n  size,\n  children,\n  disabled,\n  onClick,\n}) {\n  const injectingClassNames = [\n    ...((Array.isArray(className)) ? className : [className]),\n    'sendbird-button',\n    (disabled ? 'sendbird-button__disabled' : ''),\n    changeTypeToClassName(type),\n    changeSizeToClassName(size),\n  ].join(' ');\n\n  return (\n    <button\n      className={injectingClassNames}\n      type=\"button\"\n      onClick={onClick}\n      disabled={disabled}\n    >\n      <Label\n        className=\"sendbird-button__text\"\n        type={LabelTypography.BUTTON_1}\n        color={LabelColors.ONCONTENT_1}\n      >\n        {children}\n      </Label>\n    </button>\n  );\n}\n\nexport const ButtonTypes = Type;\nexport const ButtonSizes = Size;\n\nButton.propTypes = {\n  className: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.arrayOf(PropTypes.string),\n  ]),\n  type: PropTypes.oneOf(Object.keys(Type)),\n  size: PropTypes.oneOf(Object.keys(Size)),\n  children: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.element,\n    PropTypes.arrayOf(PropTypes.element),\n  ]),\n  disabled: PropTypes.bool,\n  onClick: PropTypes.func,\n};\n\nButton.defaultProps = {\n  className: '',\n  type: Type.PRIMARY,\n  size: Size.BIG,\n  children: 'Button',\n  disabled: false,\n  onClick: () => { },\n};\n","import React, { useContext } from 'react';\nimport PropTypes from 'prop-types';\nimport { createPortal } from 'react-dom';\n\nimport './index.scss';\n\nimport { LocalizationContext } from '../../lib/LocalizationContext';\nimport { MODAL_ROOT } from '../../hooks/useModal/ModalRoot';\nimport IconButton from '../IconButton';\nimport Icon, { IconTypes, IconColors } from '../Icon';\nimport Button, { ButtonTypes } from '../Button';\nimport Label, { LabelTypography, LabelColors } from '../Label';\n\nexport const ModalHeader = ({ titleText }) => (\n  <div className=\"sendbird-modal__header\">\n    <Label type={LabelTypography.H_1} color={LabelColors.ONBACKGROUND_1}>\n      {titleText}\n    </Label>\n  </div>\n);\nModalHeader.propTypes = {\n  titleText: PropTypes.string.isRequired,\n};\n\nexport const ModalBody = ({ children }) => (\n  <div className=\"sendbird-modal__body\">{children}</div>\n);\nModalBody.propTypes = {\n  children: PropTypes.oneOfType([\n    PropTypes.element.isRequired,\n    PropTypes.arrayOf(PropTypes.element.isRequired),\n  ]),\n};\nModalBody.defaultProps = {\n  children: null,\n};\n\nexport const ModalFooter = ({\n  onSubmit,\n  onCancel,\n  disabled = false,\n  submitText,\n  type,\n}) => {\n  const { stringSet } = useContext(LocalizationContext);\n  return (\n    <div className=\"sendbird-modal__footer\">\n      <Button type={ButtonTypes.SECONDARY} onClick={onCancel}>\n        <Label type={LabelTypography.BUTTON_1} color={LabelColors.ONBACKGROUND_1}>\n          {stringSet.BUTTON__CANCEL}\n        </Label>\n      </Button>\n      <Button type={type} disabled={disabled} onClick={onSubmit}>\n        {submitText}\n      </Button>\n    </div>\n  );\n};\n\nModalFooter.propTypes = {\n  onCancel: PropTypes.func.isRequired,\n  onSubmit: PropTypes.func.isRequired,\n  submitText: PropTypes.string.isRequired,\n  disabled: PropTypes.bool,\n  type: PropTypes.string,\n};\nModalFooter.defaultProps = {\n  disabled: false,\n  type: ButtonTypes.DANGER,\n};\n\nexport default function Modal(props) {\n  const {\n    children,\n    onCancel,\n    onSubmit,\n    disabled,\n    submitText,\n    titleText,\n    hideFooter,\n    type,\n  } = props;\n  return createPortal((\n    <div className=\"sendbird-modal\">\n      <div className=\"sendbird-modal__content\">\n        <ModalHeader titleText={titleText} />\n        <ModalBody>{children}</ModalBody>\n        {\n          !hideFooter && (\n            <ModalFooter\n              disabled={disabled}\n              onCancel={onCancel}\n              onSubmit={onSubmit}\n              submitText={submitText}\n              type={type}\n            />\n          )\n        }\n        <div className=\"sendbird-modal__close\">\n          <IconButton\n            width=\"32px\"\n            height=\"32px\"\n            onClick={onCancel}\n          >\n            <Icon\n              type={IconTypes.CLOSE}\n              fillColor={IconColors.DEFAULT}\n              width=\"24px\"\n              height=\"24px\"\n            />\n          </IconButton>\n        </div>\n      </div>\n      <div className=\"sendbird-modal__backdrop\" />\n    </div>\n  ), document.getElementById(MODAL_ROOT));\n}\n\nModal.propTypes = {\n  children: PropTypes.oneOfType([\n    PropTypes.element,\n    PropTypes.arrayOf(PropTypes.element),\n  ]),\n  onCancel: PropTypes.func.isRequired,\n  onSubmit: PropTypes.func.isRequired,\n  hideFooter: PropTypes.bool,\n  disabled: PropTypes.bool,\n  type: PropTypes.string,\n};\nModal.defaultProps = {\n  children: null,\n  hideFooter: false,\n  disabled: false,\n  type: ButtonTypes.DANGER,\n};\n","import './color.scss';\n\nexport const Colors = {\n  ONBACKGROUND_1: 'ONBACKGROUND_1',\n  ONBACKGROUND_2: 'ONBACKGROUND_2',\n  ONBACKGROUND_3: 'ONBACKGROUND_3',\n  ONBACKGROUND_4: 'ONBACKGROUND_4',\n  ONCONTENT_1: 'ONCONTENT_1',\n  PRIMARY: 'PRIMARY',\n  ERROR: 'ERROR',\n};\n\nexport function changeColorToClassName(color) {\n  switch (color) {\n    case Colors.ONBACKGROUND_1: return 'sendbird-color--onbackground-1';\n    case Colors.ONBACKGROUND_2: return 'sendbird-color--onbackground-2';\n    case Colors.ONBACKGROUND_3: return 'sendbird-color--onbackground-3';\n    case Colors.ONBACKGROUND_4: return 'sendbird-color--onbackground-4';\n    case Colors.ONCONTENT_1: return 'sendbird-color--oncontent-1';\n    case Colors.PRIMARY: return 'sendbird-color--primary';\n    case Colors.ERROR: return 'sendbird-color--error';\n    default: return null;\n  }\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport './index.scss';\nimport { changeColorToClassName, Colors } from '../../utils/color';\n\nexport default function TextButton({\n  className,\n  color,\n  disabled,\n  notUnderline,\n  onClick,\n  children,\n}) {\n  return (\n    <div\n      className={[\n        ...(Array.isArray(className) ? className : [className]),\n        changeColorToClassName(color),\n        notUnderline ? 'sendbird-textbutton--not-underline' : 'sendbird-textbutton',\n        disabled ? 'sendbird-textbutton--disabled' : '',\n      ].join(' ')}\n      role=\"button\"\n      tabIndex={0}\n      onClick={onClick}\n      onKeyPress={onClick}\n    >\n      {children}\n    </div>\n  );\n}\n\nTextButton.propTypes = {\n  className: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.arrayOf(PropTypes.string),\n  ]),\n  color: PropTypes.string,\n  disabled: PropTypes.bool,\n  notUnderline: PropTypes.bool,\n  onClick: PropTypes.func,\n  children: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.element,\n  ]).isRequired,\n};\n\nTextButton.defaultProps = {\n  className: '',\n  color: Colors.ONBACKGROUND_1,\n  disabled: false,\n  notUnderline: false,\n  onClick: () => { },\n};\n","export const USER_UPDATED = 'USER_UPDATED';\nexport const SEND_MESSAGE_START = 'SEND_MESSAGE_START';\nexport const SEND_USER_MESSAGE = 'SEND_USER_MESSAGE';\nexport const SEND_FILE_MESSAGE = 'SEND_FILE_MESSAGE';\nexport const UPDATE_USER_MESSAGE = 'UPDATE_USER_MESSAGE';\nexport const DELETE_MESSAGE = 'DELETE_MESSAGE';\nexport const LEAVE_CHANNEL = 'LEAVE_CHANNEL';\nexport const CREATE_CHANNEL = 'CREATE_CHANNEL';\n","import * as topics from './pubSub/topics';\n\nexport const getSdk = (store) => {\n  const { stores = {} } = store;\n  const { sdkStore = {} } = stores;\n  const { sdk } = sdkStore;\n  return sdk;\n};\n\nexport const getPubSub = (store) => {\n  const { config = {} } = store;\n  const { pubSub } = config;\n  return pubSub;\n};\n\n// SendBird disconnect. Invalidates currentUser\n// eslint-disable-next-line max-len\nexport const getConnect = (store) => (userId, accessToken) => new Promise((resolve, reject) => {\n  const sdk = getSdk(store);\n  if (!sdk) {\n    reject(new Error('Sdk not found'));\n  }\n  if (!accessToken) {\n    sdk.connect(userId)\n      .then((res) => resolve(res))\n      .catch((err) => reject(err));\n  } else {\n    sdk.connect(userId, accessToken)\n      .then((res) => resolve(res))\n      .catch((err) => reject(err));\n  }\n});\n\n// SendBird disconnect. Invalidates currentUser\nexport const getDisconnect = (store) => () => new Promise((resolve, reject) => {\n  const sdk = getSdk(store);\n  if (!sdk) {\n    reject(new Error('Sdk not found'));\n  }\n  sdk.disconnect()\n    .then((res) => resolve(res))\n    .catch((err) => reject(err));\n});\n\n// Using the updateCurrentUserInfo() method\n// you can update a user's nickname and profile image with a URL\n// eslint-disable-next-line max-len\nexport const getUpdateUserInfo = (store) => (nickName, profileUrl) => new Promise((resolve, reject) => {\n  const sdk = getSdk(store);\n  if (!sdk) {\n    reject(new Error('Sdk not found'));\n  }\n  sdk.updateCurrentUserInfo(nickName, profileUrl)\n    .then((res) => resolve(res))\n    .catch((err) => reject(err));\n});\n\nexport const getSendUserMessage = (store) => (channelUrl, userMessageParams) => {\n  const sdk = getSdk(store);\n  const pubsub = getPubSub(store);\n  return new Promise((resolve, reject) => {\n    if (!sdk) {\n      reject(new Error('Sdk not found'));\n    }\n    sdk.GroupChannel.getChannel(channelUrl)\n      .then((channel) => {\n        const promisify = () => {\n          let pendingMsg = null;\n          const pendingPromise = new Promise((resolve_, reject_) => {\n            pendingMsg = channel.sendUserMessage(userMessageParams, (res, err) => {\n              const swapParams = sdk.getErrorFirstCallback();\n              let message = res;\n              let error = err;\n              if (swapParams) {\n                message = err;\n                error = res;\n              }\n              if (error) {\n                reject_(error);\n                return;\n              }\n              resolve_(message);\n              pubsub.publish(\n                topics.SEND_USER_MESSAGE,\n                {\n                  message,\n                  channel,\n                },\n              );\n            });\n            pubsub.publish(\n              topics.SEND_MESSAGE_START,\n              {\n                message: pendingMsg,\n                channel,\n              },\n            );\n          });\n          pendingPromise.get = () => pendingMsg;\n          return pendingPromise;\n        };\n        resolve(promisify());\n      })\n      .catch(reject);\n  });\n};\nexport const getSendFileMessage = (store) => (channelUrl, fileMessageParams) => {\n  const sdk = getSdk(store);\n  const pubsub = getPubSub(store);\n  return new Promise((resolve, reject) => {\n    if (!sdk) {\n      reject(new Error('Sdk not found'));\n    }\n    sdk.GroupChannel.getChannel(channelUrl)\n      .then((channel) => {\n        const promisify = () => {\n          let pendingMsg = null;\n          const pendingPromise = new Promise((resolve_, reject_) => {\n            pendingMsg = channel.sendFileMessage(fileMessageParams, (res, err) => {\n              const swapParams = sdk.getErrorFirstCallback();\n              let message = res;\n              let error = err;\n              if (swapParams) {\n                message = err;\n                error = res;\n              }\n\n              if (error) {\n                reject_(error);\n                return;\n              }\n              resolve_(message);\n              pubsub.publish(\n                topics.SEND_FILE_MESSAGE,\n                {\n                  message,\n                  channel,\n                },\n              );\n            });\n          });\n          if (fileMessageParams.file) {\n            // keep the file's local version in pendingMsg.localUrl\n            // because promise doesnt allow overriding of pendingMsg.url\n            // eslint-disable-next-line no-param-reassign\n            pendingMsg.localUrl = URL.createObjectURL(fileMessageParams.file);\n          }\n          if (fileMessageParams.fileUrl) {\n            // eslint-disable-next-line no-param-reassign\n            pendingMsg.localUrl = fileMessageParams.fileUrl;\n          }\n          // eslint-disable-next-line no-param-reassign\n          pendingMsg.requestState = 'pending';\n          pubsub.publish(\n            topics.SEND_MESSAGE_START,\n            {\n              message: pendingMsg,\n              channel,\n            },\n          );\n          pendingPromise.get = () => pendingMsg;\n          return pendingPromise;\n        };\n        resolve(promisify());\n      })\n      .catch(reject);\n  });\n};\nexport const getUpdateUserMessage = (store) => (channelUrl, messageId, params) => {\n  const sdk = getSdk(store);\n  const pubsub = getPubSub(store);\n  return new Promise((resolve, reject) => {\n    if (!sdk) {\n      reject(new Error('Sdk not found'));\n    }\n    sdk.GroupChannel.getChannel(channelUrl)\n      .then((channel) => {\n        channel.updateUserMessage(messageId, params, (res, err) => {\n          const swapParams = sdk.getErrorFirstCallback();\n          let message = res;\n          let error = err;\n          if (swapParams) {\n            message = err;\n            error = res;\n          }\n\n          if (error) {\n            reject(error);\n            return;\n          }\n          resolve(message);\n          pubsub.publish(\n            topics.UPDATE_USER_MESSAGE,\n            {\n              message,\n              channel,\n              // workaround for updating channelPreview on message-edit\n              // https://sendbird.atlassian.net/browse/UIKIT-268\n              fromSelector: true,\n            },\n          );\n        });\n      })\n      .catch(reject);\n  });\n};\nexport const getDeleteMessage = (store) => (channelUrl, message) => {\n  const sdk = getSdk(store);\n  const pubsub = getPubSub(store);\n  return new Promise((resolve, reject) => {\n    if (!sdk) {\n      reject(new Error('Sdk not found'));\n    }\n    sdk.GroupChannel.getChannel(channelUrl)\n      .then((channel) => {\n        const { messageId } = message;\n        channel.deleteMessage(message, (res, err) => {\n          const swapParams = sdk.getErrorFirstCallback();\n          let error = err;\n          if (swapParams) {\n            error = res;\n          }\n\n          if (error) {\n            reject(error);\n            return;\n          }\n          resolve(message);\n          pubsub.publish(\n            topics.DELETE_MESSAGE,\n            {\n              messageId,\n              channel,\n            },\n          );\n        });\n      })\n      .catch(reject);\n  });\n};\n\nexport const getResendUserMessage = (store) => (channelUrl, failedMessage) => {\n  const sdk = getSdk(store);\n  const pubsub = getPubSub(store);\n  return new Promise((resolve, reject) => {\n    if (!sdk) {\n      reject(new Error('Sdk not found'));\n    }\n    sdk.GroupChannel.getChannel(channelUrl)\n      .then((channel) => {\n        channel.resendUserMessage(failedMessage)\n          .then((message) => {\n            resolve(message);\n            pubsub.publish(\n              topics.SEND_USER_MESSAGE,\n              {\n                message,\n                channel,\n              },\n            );\n          })\n          .catch(reject);\n      })\n      .catch(reject);\n  });\n};\n\nexport const getResendFileMessage = (store) => (channelUrl, failedMessage) => {\n  const sdk = getSdk(store);\n  const pubsub = getPubSub(store);\n  return new Promise((resolve, reject) => {\n    if (!sdk) {\n      reject(new Error('Sdk not found'));\n    }\n    sdk.GroupChannel.getChannel(channelUrl)\n      .then((channel) => {\n        channel.resendFileMessage(failedMessage)\n          .then((message) => {\n            resolve(message);\n            pubsub.publish(\n              topics.SEND_FILE_MESSAGE,\n              {\n                message,\n                channel,\n              },\n            );\n          })\n          .catch(reject);\n      })\n      .catch(reject);\n  });\n};\n\nexport const getCreateChannel = (store) => (params) => {\n  const sdk = getSdk(store);\n  const pubsub = getPubSub(store);\n  return new Promise((resolve, reject) => {\n    if (!sdk) {\n      reject(new Error('Sdk not found'));\n    }\n    sdk.GroupChannel.createChannel(params)\n      .then((channel) => {\n        resolve(channel);\n        pubsub.publish(\n          topics.CREATE_CHANNEL,\n          {\n            channel,\n          },\n        );\n      })\n      .catch(reject);\n  });\n};\n\nexport const getLeaveChannel = (store) => (channelUrl) => {\n  const sdk = getSdk(store);\n  const pubsub = getPubSub(store);\n  return new Promise((resolve, reject) => {\n    if (!sdk) {\n      reject(new Error('Sdk not found'));\n    }\n    sdk.GroupChannel.getChannel(channelUrl)\n      .then((channel) => {\n        channel.leave()\n          .then(() => {\n            resolve(channel);\n            pubsub.publish(\n              topics.LEAVE_CHANNEL,\n              {\n                channel,\n              },\n            );\n          })\n          .catch(reject);\n      })\n      .catch(reject);\n  });\n};\n\nexport const getFreezeChannel = (store) => (channelUrl) => {\n  const sdk = getSdk(store);\n  return new Promise((resolve, reject) => {\n    if (!sdk) {\n      reject(new Error('Sdk not found'));\n    }\n    sdk.GroupChannel.getChannel(channelUrl)\n      .then((channel) => {\n        channel.freeze()\n          .then(() => {\n            // do not need pubsub here - event listener works\n            resolve(channel);\n          })\n          .catch(reject);\n      })\n      .catch(reject);\n  });\n};\n\nexport const getUnFreezeChannel = (store) => (channelUrl) => {\n  const sdk = getSdk(store);\n  return new Promise((resolve, reject) => {\n    if (!sdk) {\n      reject(new Error('Sdk not found'));\n    }\n    sdk.GroupChannel.getChannel(channelUrl)\n      .then((channel) => {\n        channel.unfreeze()\n          .then(() => {\n            // do not need pubsub here - event listener works\n            resolve(channel);\n          })\n          .catch(reject);\n      })\n      .catch(reject);\n  });\n};\n\nexport const getCreateOpenChannel = (store) => (params) => {\n  const sdk = getSdk(store);\n  return new Promise((resolve, reject) => {\n    if (!sdk) {\n      reject(new Error('Sdk not found'));\n    }\n    sdk.OpenChannel.createChannel(params)\n      .then((channel) => {\n        resolve(channel);\n      })\n      .catch(reject);\n  });\n};\nexport const enterOpenChannel = (store) => (channelUrl) => {\n  const sdk = getSdk(store);\n  return new Promise((resolve, reject) => {\n    if (!sdk) {\n      reject(new Error('Sdk not found'));\n    }\n    sdk.OpenChannel.getChannel(channelUrl, (openChannel, error) => {\n      if (error) {\n        reject(new Error(error));\n        return;\n      }\n\n      openChannel.enter((response, enterError) => {\n        if (error) {\n          reject(new Error(enterError));\n          return;\n        }\n        resolve(response);\n      });\n    });\n  });\n};\n\nexport const exitOpenChannel = (store) => (channelUrl) => {\n  const sdk = getSdk(store);\n  return new Promise((resolve, reject) => {\n    if (!sdk) {\n      reject(new Error('Sdk not found'));\n    }\n    sdk.OpenChannel.getChannel(channelUrl, (openChannel, error) => {\n      if (error) {\n        reject(new Error(error));\n        return;\n      }\n\n      openChannel.exit((response, exitError) => {\n        if (error) {\n          reject(new Error(exitError));\n          return;\n        }\n        resolve(response);\n      });\n    });\n  });\n};\n\nexport const getOpenChannelSendUserMessage = (store) => (channelUrl, userMessageParams) => {\n  const sdk = getSdk(store);\n  const pubsub = getPubSub(store);\n  return new Promise((resolve, reject) => {\n    if (!sdk) {\n      reject(new Error('Sdk not found'));\n    }\n    sdk.OpenChannel.getChannel(channelUrl)\n      .then((channel) => {\n        const promisify = () => {\n          let pendingMsg = null;\n          const pendingPromise = new Promise((resolve_, reject_) => {\n            pendingMsg = channel.sendUserMessage(userMessageParams, (res, err) => {\n              const swapParams = sdk.getErrorFirstCallback();\n              let message = res;\n              let error = err;\n              if (swapParams) {\n                message = err;\n                error = res;\n              }\n              if (error) {\n                reject_(error);\n                return;\n              }\n              resolve_(message);\n              pubsub.publish(\n                topics.SEND_USER_MESSAGE,\n                {\n                  message,\n                  channel,\n                },\n              );\n            });\n            pubsub.publish(\n              topics.SEND_MESSAGE_START,\n              {\n                message: pendingMsg,\n                channel,\n              },\n            );\n          });\n          pendingPromise.get = () => pendingMsg;\n          return pendingPromise;\n        };\n        resolve(promisify());\n      })\n      .catch(reject);\n  });\n};\n\nexport const getOpenChannelSendFileMessage = (store) => (channelUrl, fileMessageParams) => {\n  const sdk = getSdk(store);\n  const pubsub = getPubSub(store);\n  return new Promise((resolve, reject) => {\n    if (!sdk) {\n      reject(new Error('Sdk not found'));\n    }\n    sdk.OpenChannel.getChannel(channelUrl)\n      .then((channel) => {\n        const promisify = () => {\n          let pendingMsg = null;\n          const pendingPromise = new Promise((resolve_, reject_) => {\n            pendingMsg = channel.sendFileMessage(fileMessageParams, (res, err) => {\n              const swapParams = sdk.getErrorFirstCallback();\n              let message = res;\n              let error = err;\n              if (swapParams) {\n                message = err;\n                error = res;\n              }\n\n              if (error) {\n                reject_(error);\n                return;\n              }\n              resolve_(message);\n              pubsub.publish(\n                topics.SEND_FILE_MESSAGE,\n                {\n                  message,\n                  channel,\n                },\n              );\n            });\n          });\n          if (fileMessageParams.file) {\n            // keep the file's local version in pendingMsg.localUrl\n            // because promise doesnt allow overriding of pendingMsg.url\n            // eslint-disable-next-line no-param-reassign\n            pendingMsg.localUrl = URL.createObjectURL(fileMessageParams.file);\n          }\n          if (fileMessageParams.fileUrl) {\n            // eslint-disable-next-line no-param-reassign\n            pendingMsg.localUrl = fileMessageParams.fileUrl;\n          }\n          // eslint-disable-next-line no-param-reassign\n          pendingMsg.requestState = 'pending';\n          pubsub.publish(\n            topics.SEND_MESSAGE_START,\n            {\n              message: pendingMsg,\n              channel,\n            },\n          );\n          pendingPromise.get = () => pendingMsg;\n          return pendingPromise;\n        };\n        resolve(promisify());\n      })\n      .catch(reject);\n  });\n};\n\nexport const getOpenChannelUpdateUserMessage = (store) => (channelUrl, messageId, params) => {\n  const sdk = getSdk(store);\n  const pubsub = getPubSub(store);\n  return new Promise((resolve, reject) => {\n    if (!sdk) {\n      reject(new Error('Sdk not found'));\n    }\n    sdk.OpenChannel.getChannel(channelUrl)\n      .then((channel) => {\n        channel.updateUserMessage(messageId, params, (res, err) => {\n          const swapParams = sdk.getErrorFirstCallback();\n          let message = res;\n          let error = err;\n          if (swapParams) {\n            message = err;\n            error = res;\n          }\n\n          if (error) {\n            reject(error);\n            return;\n          }\n          resolve(message);\n          pubsub.publish(\n            topics.UPDATE_USER_MESSAGE,\n            {\n              message,\n              channel,\n              // workaround for updating channelPreview on message-edit\n              // https://sendbird.atlassian.net/browse/UIKIT-268\n              fromSelector: true,\n            },\n          );\n        });\n      })\n      .catch(reject);\n  });\n};\n\nexport const getOpenChannelDeleteMessage = (store) => (channelUrl, message) => {\n  const sdk = getSdk(store);\n  const pubsub = getPubSub(store);\n  return new Promise((resolve, reject) => {\n    if (!sdk) {\n      reject(new Error('Sdk not found'));\n    }\n    sdk.OpenChannel.getChannel(channelUrl)\n      .then((channel) => {\n        const { messageId } = message;\n        channel.deleteMessage(message, (res, err) => {\n          const swapParams = sdk.getErrorFirstCallback();\n          let error = err;\n          if (swapParams) {\n            error = res;\n          }\n\n          if (error) {\n            reject(error);\n            return;\n          }\n          resolve(message);\n          pubsub.publish(\n            topics.DELETE_MESSAGE,\n            {\n              messageId,\n              channel,\n            },\n          );\n        });\n      })\n      .catch(reject);\n  });\n};\n\nexport const getOpenChannelResendUserMessage = (store) => (channelUrl, failedMessage) => {\n  const sdk = getSdk(store);\n  const pubsub = getPubSub(store);\n  return new Promise((resolve, reject) => {\n    if (!sdk) {\n      reject(new Error('Sdk not found'));\n    }\n    sdk.OpenChannel.getChannel(channelUrl)\n      .then((channel) => {\n        channel.resendUserMessage(failedMessage)\n          .then((message) => {\n            resolve(message);\n            pubsub.publish(\n              topics.SEND_USER_MESSAGE,\n              {\n                message,\n                channel,\n              },\n            );\n          })\n          .catch(reject);\n      })\n      .catch(reject);\n  });\n};\n\nexport const getOpenChannelResendFileMessage = (store) => (channelUrl, failedMessage) => {\n  const sdk = getSdk(store);\n  const pubsub = getPubSub(store);\n  return new Promise((resolve, reject) => {\n    if (!sdk) {\n      reject(new Error('Sdk not found'));\n    }\n    sdk.OpenChannel.getChannel(channelUrl)\n      .then((channel) => {\n        channel.resendFileMessage(failedMessage)\n          .then((message) => {\n            resolve(message);\n            pubsub.publish(\n              topics.SEND_FILE_MESSAGE,\n              {\n                message,\n                channel,\n              },\n            );\n          })\n          .catch(reject);\n      })\n      .catch(reject);\n  });\n};\n\nexport default {\n  getSdk,\n  getConnect,\n  getDisconnect,\n  getUpdateUserInfo,\n  getSendUserMessage,\n  getSendFileMessage,\n  getUpdateUserMessage,\n  getDeleteMessage,\n  getResendUserMessage,\n  getResendFileMessage,\n  getFreezeChannel,\n  getUnFreezeChannel,\n  getCreateChannel,\n  getLeaveChannel,\n  getCreateOpenChannel,\n  getEnterOpenChannel: enterOpenChannel,\n  getExitOpenChannel: exitOpenChannel,\n  getOpenChannelSendUserMessage,\n  getOpenChannelSendFileMessage,\n  getOpenChannelUpdateUserMessage,\n  getOpenChannelDeleteMessage,\n  getOpenChannelResendUserMessage,\n  getOpenChannelResendFileMessage,\n};\n","import React, { ReactElement, useContext } from 'react';\nimport { SendbirdTypes } from '../../types';\nimport './index.scss';\n\nimport { LocalizationContext } from '../../lib/LocalizationContext';\nimport withSendbirdContext from '../../lib/SendbirdSdkContext';\nimport { getSdk, getCreateChannel } from '../../lib/selectors';\nimport Avatar from '../Avatar/index';\nimport Label, { LabelColors, LabelTypography } from '../Label';\nimport Button, { ButtonTypes } from '../Button';\n\ninterface Logger {\n  info?(message: string, channel: SendbirdTypes['GroupChannel']): void;\n}\n\ninterface Props {\n  user: SendbirdTypes['User'];\n  currentUserId?: string;\n  sdk?: SendbirdTypes['SendBirdInstance'];\n  logger?: Logger;\n  disableMessaging?: boolean;\n  createChannel?(params: SendbirdTypes['GroupChannelParams']): Promise<SendbirdTypes['GroupChannel']>;\n  onSuccess?(): void;\n}\n\nfunction UserProfile({\n  user,\n  currentUserId,\n  sdk,\n  logger,\n  disableMessaging = false,\n  createChannel,\n  onSuccess,\n}: Props): ReactElement {\n  const { stringSet } = useContext(LocalizationContext);\n  return (\n    <div className=\"sendbird__user-profile\">\n      <section className=\"sendbird__user-profile-avatar\">\n        <Avatar\n          height=\"80px\"\n          width=\"80px\"\n          src={user.profileUrl}\n        />\n      </section>\n      <section className=\"sendbird__user-profile-name\">\n        <Label\n          type={LabelTypography.H_2}\n          color={LabelColors.ONBACKGROUND_1}\n        >\n          {user.nickname || stringSet.NO_NAME}\n        </Label>\n      </section>\n      {\n        (user.userId !== currentUserId) && !disableMessaging && (\n          <section className=\"sendbird__user-profile-message\">\n            <Button\n              type={ButtonTypes.SECONDARY}\n              onClick={() => {\n                const params = new sdk.GroupChannelParams();\n                params.isDistinct = true;\n                params.addUserIds([user.userId]);\n                onSuccess();\n                createChannel(params)\n                  .then((groupChannel) => {\n                    logger.info('UserProfile, channel create', groupChannel);\n                  });\n              }}\n            >\n              {stringSet.USER_PROFILE__MESSAGE}\n            </Button>\n          </section>\n        )\n      }\n      <div className=\"sendbird__user-profile-separator\" />\n      <section className=\"sendbird__user-profile-userId\">\n        <Label\n          className=\"sendbird__user-profile-userId--label\"\n          type={LabelTypography.CAPTION_2}\n          color={LabelColors.ONBACKGROUND_2}\n        >\n          {stringSet.USER_PROFILE__USER_ID}\n        </Label>\n        <Label\n          className=\"sendbird__user-profile-userId--value\"\n          type={LabelTypography.BODY_1}\n          color={LabelColors.ONBACKGROUND_1}\n        >\n          {user.userId}\n        </Label>\n      </section>\n    </div>\n  );\n}\n\nconst mapStoreToProps = (store) => ({\n  sdk: getSdk(store),\n  createChannel: getCreateChannel(store),\n  logger: store.config.logger,\n  pubsub: store.config.pubSub,\n});\n\nconst ConnectedUserProfile = withSendbirdContext(UserProfile, mapStoreToProps);\n\nexport default ConnectedUserProfile;\n","import React, { Component } from 'react';\nimport { createPortal } from 'react-dom';\nimport PropTypes from 'prop-types';\n\nexport default class MenuItems extends Component {\n  constructor(props) {\n    super(props);\n    this.menuRef = React.createRef();\n    this.state = {\n      menuStyle: {},\n      handleClickOutside: () => { },\n    };\n  }\n\n  componentDidMount() {\n    this.setupEvents();\n    this.getMenuPosition();\n    this.showParent();\n  }\n\n  componentWillUnmount() {\n    this.cleanUpEvents();\n    this.hideParent();\n  }\n\n  showParent = () => {\n    const { parentContainRef = {} } = this.props;\n    const { current } = parentContainRef;\n    if (parentContainRef && current) {\n      current.classList.add('sendbird-icon--pressed');\n    }\n  }\n\n  hideParent = () => {\n    const { parentContainRef = {} } = this.props;\n    const { current } = parentContainRef;\n    if (parentContainRef && current) {\n      current.classList.remove('sendbird-icon--pressed');\n    }\n  }\n\n  setupEvents = () => {\n    const { closeDropdown } = this.props;\n    const { menuRef } = this;\n    const handleClickOutside = (event) => {\n      if (menuRef.current && !menuRef.current.contains(event.target)) {\n        closeDropdown();\n      }\n    };\n    this.setState({\n      handleClickOutside,\n    });\n\n    document.addEventListener('mousedown', handleClickOutside);\n  }\n\n  cleanUpEvents = () => {\n    const {\n      handleClickOutside,\n    } = this.state;\n    document.removeEventListener('mousedown', handleClickOutside);\n  }\n\n  getMenuPosition = () => {\n    const { parentRef, openLeft } = this.props;\n    const parentRect = parentRef.current.getBoundingClientRect();\n    const x = parentRect.x || parentRect.left;\n    const y = parentRect.y || parentRect.top;\n    const menuStyle = {\n      top: y,\n      left: x,\n    };\n\n    if (!this.menuRef.current) return menuStyle;\n\n    const { innerWidth, innerHeight } = window;\n    const rect = this.menuRef.current.getBoundingClientRect();\n    if (y + rect.height > innerHeight) {\n      menuStyle.top -= rect.height;\n    }\n\n    if (x + rect.width > innerWidth && !openLeft) {\n      menuStyle.left -= rect.width;\n    }\n\n    if (menuStyle.top < 0) {\n      menuStyle.top = rect.height < innerHeight ? (innerHeight - rect.height) / 2 : 0;\n    }\n\n    if (menuStyle.left < 0) {\n      menuStyle.left = rect.width < innerWidth ? (innerWidth - rect.width) / 2 : 0;\n    }\n\n    menuStyle.top += 32;\n    if (openLeft) {\n      const padding = Number.isNaN(rect.width - 30)\n        ? 108 // default\n        : rect.width - 30;\n      menuStyle.left -= padding;\n    }\n\n    return this.setState({ menuStyle });\n  }\n\n  render() {\n    const { menuStyle } = this.state;\n    const { children, style } = this.props;\n    return (\n      createPortal(\n        (\n          <>\n            <div className=\"sendbird-dropdown__menu-backdrop\" />\n            <ul\n              className=\"sendbird-dropdown__menu\"\n              ref={this.menuRef}\n              style={{\n                display: 'inline-block',\n                position: 'fixed',\n                left: `${Math.round(menuStyle.left)}px`,\n                top: `${Math.round(menuStyle.top)}px`,\n                ...style,\n              }}\n            >\n              {children}\n            </ul>\n          </>\n        ),\n        document.getElementById('sendbird-dropdown-portal'),\n      )\n    );\n  }\n}\nMenuItems.propTypes = {\n  closeDropdown: PropTypes.func.isRequired,\n  children: PropTypes.oneOfType([\n    PropTypes.element,\n    PropTypes.arrayOf(PropTypes.element),\n  ]).isRequired,\n  style: PropTypes.shape({}),\n  // https://stackoverflow.com/a/51127130\n  parentRef: PropTypes.oneOfType([\n    PropTypes.func,\n    PropTypes.shape({ current: PropTypes.instanceOf(Element) }),\n  ]).isRequired,\n  parentContainRef: PropTypes.oneOfType([\n    PropTypes.func,\n    PropTypes.shape({ current: PropTypes.instanceOf(Element) }),\n  ]).isRequired,\n  openLeft: PropTypes.bool,\n};\nMenuItems.defaultProps = {\n  style: {},\n  openLeft: false,\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport './index.scss';\n\nconst componentClassName = 'sendbird-sort-by-row';\nexport default function SortByRow({\n  className,\n  maxItemCount,\n  itemWidth,\n  itemHeight,\n  children,\n}) {\n  if (children.length > maxItemCount) {\n    const result = [];\n\n    for (let i = 0; i < children.length; i += maxItemCount) {\n      result.push(\n        <div\n          className={[\n            ...(Array.isArray(className) ? className : [className]),\n            componentClassName,\n          ].join(' ')}\n          key={className + i}\n          style={{\n            width: itemWidth * maxItemCount,\n            height: itemHeight,\n          }}\n        >\n          {\n            children.slice(i, i + maxItemCount)\n          }\n        </div>,\n      );\n    }\n    return result;\n  }\n\n  return (\n    <div\n      className={[\n        ...(Array.isArray(className) ? className : [className]),\n        componentClassName,\n      ].join(' ')}\n      style={{\n        width: itemWidth * children.length,\n        height: itemHeight,\n      }}\n    >\n      {children}\n    </div>\n  );\n}\n\nSortByRow.propTypes = {\n  className: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.arrayOf(PropTypes.string),\n  ]),\n  maxItemCount: PropTypes.number.isRequired,\n  itemWidth: PropTypes.number.isRequired,\n  itemHeight: PropTypes.number.isRequired,\n  children: PropTypes.oneOfType([\n    PropTypes.element,\n    PropTypes.arrayOf(PropTypes.element),\n    PropTypes.string,\n    PropTypes.arrayOf(PropTypes.string),\n  ]).isRequired,\n};\n\nSortByRow.defaultProps = {\n  className: '',\n};\n","import React, { Component } from 'react';\nimport { createPortal } from 'react-dom';\nimport PropTypes from 'prop-types';\n\nimport SortByRow from '../../SortByRow';\n\nexport default class EmojiListItems extends Component {\n  constructor(props) {\n    super(props);\n    this.reactionRef = React.createRef();\n    this.state = {\n      reactionStyle: {},\n      handleClickOutside: () => { },\n    };\n  }\n\n  componentDidMount() {\n    this.setupEvents();\n    this.getBarPosition();\n    this.showParent();\n  }\n\n  componentWillUnmount() {\n    this.cleanUpEvents();\n    this.hideParent();\n  }\n\n  showParent = () => {\n    const { parentContainRef = {} } = this.props;\n    const { current } = parentContainRef;\n    if (parentContainRef && current) {\n      current.classList.add('sendbird-reactions--pressed');\n    }\n  }\n\n  hideParent = () => {\n    const { parentContainRef = {} } = this.props;\n    const { current } = parentContainRef;\n    if (parentContainRef && current) {\n      current.classList.remove('sendbird-reactions--pressed');\n    }\n  }\n\n  setupEvents = () => {\n    const { closeDropdown } = this.props;\n    const { reactionRef } = this;\n    const handleClickOutside = (event) => {\n      if (reactionRef.current && !reactionRef.current.contains(event.target)) {\n        closeDropdown();\n      }\n    };\n    this.setState({\n      handleClickOutside,\n    });\n    document.addEventListener('mousedown', handleClickOutside);\n  }\n\n  cleanUpEvents = () => {\n    const {\n      handleClickOutside,\n    } = this.state;\n    document.removeEventListener('mousedown', handleClickOutside);\n  }\n\n  getBarPosition = () => {\n    // calculate the location that the context menu should be\n    const {\n      parentRef,\n      spaceFromTrigger,\n    } = this.props;\n    const spaceFromTriggerX = spaceFromTrigger.x || 0;\n    const spaceFromTriggerY = spaceFromTrigger.y || 0;\n\n    const parentRect = parentRef.current.getBoundingClientRect();\n\n    const x = parentRect.x || parentRect.left;\n    const y = parentRect.y || parentRect.top;\n\n    const reactionStyle = {\n      top: y,\n      left: x,\n    };\n\n    if (!this.reactionRef.current) return reactionStyle;\n    const rect = this.reactionRef.current.getBoundingClientRect();\n\n    if (reactionStyle.top < rect.height) {\n      reactionStyle.top += parentRect.height;\n      reactionStyle.top += spaceFromTriggerY;\n    } else {\n      reactionStyle.top -= rect.height;\n      reactionStyle.top -= spaceFromTriggerY;\n    }\n\n    reactionStyle.left -= (rect.width / 2);\n    reactionStyle.left += (parentRect.height / 2) - 2;\n    reactionStyle.left += spaceFromTriggerX;\n\n    const maximumLeft = (window.innerWidth - rect.width);\n    if (maximumLeft < reactionStyle.left) {\n      reactionStyle.left = maximumLeft;\n    }\n    if (reactionStyle.left < 0) {\n      reactionStyle.left = 0;\n    }\n\n    return this.setState({ reactionStyle });\n  }\n\n  render() {\n    const { reactionStyle } = this.state;\n    const { children } = this.props;\n    return (\n      createPortal(\n        <>\n          <div className=\"sendbird-dropdown__menu-backdrop\" />\n          <ul\n            className=\"sendbird-dropdown__reaction-bar\"\n            ref={this.reactionRef}\n            style={{\n              display: 'inline-block',\n              position: 'fixed',\n              left: `${Math.round(reactionStyle.left)}px`,\n              top: `${Math.round(reactionStyle.top)}px`,\n            }}\n          >\n            <SortByRow\n              className=\"sendbird-dropdown__reaction-bar__row\"\n              maxItemCount={8}\n              itemWidth={44}\n              itemHeight={40}\n            >\n              {children}\n            </SortByRow>\n          </ul>\n        </>,\n        document.getElementById('sendbird-emoji-list-portal'),\n      )\n    );\n  }\n}\nEmojiListItems.propTypes = {\n  closeDropdown: PropTypes.func.isRequired,\n  children: PropTypes.oneOfType([\n    PropTypes.element,\n    PropTypes.arrayOf(PropTypes.element),\n  ]).isRequired,\n  parentRef: PropTypes.oneOfType([\n    PropTypes.func,\n    PropTypes.shape({ current: PropTypes.instanceOf(Element) }),\n  ]).isRequired,\n  parentContainRef: PropTypes.oneOfType([\n    PropTypes.func,\n    PropTypes.shape({ current: PropTypes.instanceOf(Element) }),\n  ]).isRequired,\n  spaceFromTrigger: PropTypes.shape({\n    x: PropTypes.number,\n    y: PropTypes.number,\n  }),\n};\nEmojiListItems.defaultProps = {\n  spaceFromTrigger: {},\n};\n","import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\n\nimport './index.scss';\n\nimport Label, { LabelTypography, LabelColors } from '../Label';\nimport { getClassName } from '../../utils';\n\nimport MenuItems_ from './items/MenuItems';\nimport EmojiListItems_ from './items/EmojiListItems';\n\nconst ENTER = 13;\n\nexport const MenuItems = MenuItems_;\nexport const EmojiListItems = EmojiListItems_;\n\nexport const MenuItem = ({\n  className,\n  children,\n  onClick,\n  disable,\n}) => {\n  const handleClickEvent = (e) => { if (!disable) onClick(e); };\n  return (\n    <li\n      className={getClassName([className, 'sendbird-dropdown__menu-item', disable ? 'disable' : ''])}\n      role=\"menuitem\"\n      onClick={handleClickEvent}\n      onKeyPress={(e) => { if (e.keyCode === ENTER) handleClickEvent(e); }}\n      tabIndex={0}\n    >\n      <Label\n        className=\"sendbird-dropdown__menu-item__text\"\n        type={LabelTypography.SUBTITLE_2}\n        color={disable ? LabelColors.ONBACKGROUND_4 : LabelColors.ONBACKGROUND_1}\n      >\n        {children}\n      </Label>\n    </li>\n  );\n};\n\nMenuItem.propTypes = {\n  className: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.arrayOf(PropTypes.string),\n  ]),\n  children: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.element,\n  ]).isRequired,\n  onClick: PropTypes.func.isRequired,\n  disable: PropTypes.bool,\n};\n\nMenuItem.defaultProps = {\n  className: '',\n  disable: false,\n};\n\n// Root components should be appended before ContextMenu is rendered\nexport const MenuRoot = () => (\n  <div id=\"sendbird-dropdown-portal\" />\n);\nexport const EmojiReactionListRoot = () => (\n  <div id=\"sendbird-emoji-list-portal\" />\n);\n\nexport default function ContextMenu({ menuTrigger, menuItems }) {\n  const [showMenu, setShowMenu] = useState(false);\n\n  return (\n    <div className=\"sendbird-context-menu\" style={{ display: 'inline' }}>\n      {menuTrigger(() => setShowMenu(!showMenu))}\n      {showMenu && menuItems(() => setShowMenu(false))}\n    </div>\n  );\n}\n\nContextMenu.propTypes = {\n  menuTrigger: PropTypes.func.isRequired,\n  menuItems: PropTypes.func.isRequired,\n};\n"]},"metadata":{},"sourceType":"module"}