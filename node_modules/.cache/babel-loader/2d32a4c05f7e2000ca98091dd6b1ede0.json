{"ast":null,"code":"import { e as _toConsumableArray, c as LocalizationContext, b as _slicedToArray } from './LocalizationContext-dfe8b78b.js';\nimport React__default, { useContext, useRef, useState, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport { a as LabelTypography, b as LabelColors, k as changeColorToClassName, L as Label, I as Icon, c as IconTypes, d as IconColors, A as Avatar } from './index-fe1a6d27.js';\nimport { a6 as Colors, a7 as changeColorToClassName$1, z as getClassName, I as IconButton, B as Button, d as ButtonTypes, e as ButtonSizes, a8 as MODAL_ROOT, Z as isSupportedFileView, W as isVideo, a9 as isImage } from './index-cb0d7936.js';\nimport { createPortal } from 'react-dom';\n\nvar isEmpty = function isEmpty(val) {\n  return val === null || val === undefined;\n}; // Some Ids return string and number inconsistently\n// only use to comapre IDs\n\n\nfunction compareIds(a, b) {\n  if (isEmpty(a) || isEmpty(b)) {\n    return false;\n  }\n\n  var aString = a.toString();\n  var bString = b.toString();\n  return aString === bString;\n}\n\nvar http = /https?:\\/\\//;\n\nfunction LinkLabel(_ref) {\n  var className = _ref.className,\n      src = _ref.src,\n      type = _ref.type,\n      color = _ref.color,\n      children = _ref.children;\n  var url = http.test(src) ? src : \"http://\".concat(src);\n  return /*#__PURE__*/React__default.createElement(\"a\", {\n    className: [].concat(_toConsumableArray(Array.isArray(className) ? className : [className]), ['sendbird-link-label', color ? changeColorToClassName(color) : '']).join(' '),\n    href: url,\n    target: \"_blank\",\n    rel: \"noopener noreferrer\"\n  }, /*#__PURE__*/React__default.createElement(Label, {\n    className: \"sendbird-link-label__label\",\n    type: type,\n    color: color\n  }, children));\n}\n\nLinkLabel.propTypes = {\n  className: PropTypes.oneOfType([PropTypes.string, PropTypes.arrayOf(PropTypes.string)]),\n  src: PropTypes.string.isRequired,\n  type: PropTypes.oneOf(Object.keys(LabelTypography)).isRequired,\n  color: PropTypes.oneOf(Object.keys(LabelColors)).isRequired,\n  children: PropTypes.oneOfType([PropTypes.string, PropTypes.element, PropTypes.arrayOf(PropTypes.string), PropTypes.arrayOf(PropTypes.element)]).isRequired\n};\nLinkLabel.defaultProps = {\n  className: ''\n};\n\nfunction DateSeparator(_ref) {\n  var className = _ref.className,\n      children = _ref.children,\n      separatorColor = _ref.separatorColor;\n  return /*#__PURE__*/React__default.createElement(\"div\", {\n    className: [].concat(_toConsumableArray(Array.isArray(className) ? className : [className]), ['sendbird-separator']).join(' ')\n  }, /*#__PURE__*/React__default.createElement(\"div\", {\n    className: ['sendbird-separator__left', \"\".concat(changeColorToClassName$1(separatorColor), \"--background-color\")].join(' ')\n  }), /*#__PURE__*/React__default.createElement(\"div\", {\n    className: \"sendbird-separator__text\"\n  }, children), /*#__PURE__*/React__default.createElement(\"div\", {\n    className: ['sendbird-separator__right', \"\".concat(changeColorToClassName$1(separatorColor), \"--background-color\")].join(' ')\n  }));\n}\n\nDateSeparator.propTypes = {\n  className: PropTypes.oneOfType([PropTypes.string, PropTypes.arrayOf(PropTypes.string)]),\n  children: PropTypes.oneOfType([PropTypes.string, PropTypes.arrayOf(PropTypes.string), PropTypes.element]),\n  separatorColor: PropTypes.string\n};\nDateSeparator.defaultProps = {\n  className: '',\n  children: /*#__PURE__*/React__default.createElement(Label, {\n    type: LabelTypography.CAPTION_2,\n    color: LabelColors.ONBACKGROUND_2\n  }, \"Date Separator\"),\n  separatorColor: Colors.ONBACKGROUND_4\n};\nvar LINE_HEIGHT = 76;\n\nvar noop = function noop() {};\n\nvar KeyCode = {\n  SHIFT: 16,\n  ENTER: 13\n};\n\nvar handleUploadFile = function handleUploadFile(callback) {\n  return function (event) {\n    if (event.target.files && event.target.files[0]) {\n      callback(event.target.files[0]);\n    } // eslint-disable-next-line no-param-reassign\n\n\n    event.target.value = '';\n  };\n};\n\nvar MessageInput = /*#__PURE__*/React__default.forwardRef(function (props, ref) {\n  var className = props.className,\n      isEdit = props.isEdit,\n      disabled = props.disabled,\n      value = props.value,\n      name = props.name,\n      placeholder = props.placeholder,\n      maxLength = props.maxLength,\n      onFileUpload = props.onFileUpload,\n      onSendMessage = props.onSendMessage,\n      onCancelEdit = props.onCancelEdit,\n      onStartTyping = props.onStartTyping,\n      channelUrl = props.channelUrl;\n\n  var _useContext = useContext(LocalizationContext),\n      stringSet = _useContext.stringSet;\n\n  var fileInputRef = useRef(null);\n\n  var _useState = useState(value),\n      _useState2 = _slicedToArray(_useState, 2),\n      inputValue = _useState2[0],\n      setInputValue = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      isShiftPressed = _useState4[0],\n      setIsShiftPressed = _useState4[1];\n\n  var setHeight = function setHeight() {\n    try {\n      var elem = ref.current;\n      var MAX_HEIGHT = window.document.body.offsetHeight * 0.6;\n\n      if (elem && elem.scrollHeight >= LINE_HEIGHT) {\n        if (MAX_HEIGHT < elem.scrollHeight) {\n          elem.style.height = 'auto';\n          elem.style.height = \"\".concat(MAX_HEIGHT, \"px\");\n        } else {\n          elem.style.height = 'auto';\n          elem.style.height = \"\".concat(elem.scrollHeight, \"px\");\n        }\n      } else {\n        elem.style.height = '';\n      }\n    } catch (error) {// error\n    }\n  }; // after setHeight called twice, the textarea goes to the initialized\n\n\n  useEffect(function () {\n    setHeight();\n    return setHeight;\n  }, [inputValue]); // clear input value when channel changes\n\n  useEffect(function () {\n    setInputValue('');\n  }, [channelUrl]);\n\n  var sendMessage = function sendMessage() {\n    if (inputValue && inputValue.trim().length > 0) {\n      var trimmedInputValue = inputValue.trim();\n\n      if (isEdit) {\n        // useUpdateMessageCallback\n        onSendMessage(name, trimmedInputValue, function () {\n          onCancelEdit();\n        });\n      } else {\n        // useSendMessageCallback\n        onSendMessage();\n        setInputValue('');\n      }\n    }\n  };\n\n  return /*#__PURE__*/React__default.createElement(\"form\", {\n    className: getClassName([className, isEdit ? 'sendbird-message-input__edit' : '', disabled ? 'sendbird-message-input-form__disabled' : ''])\n  }, /*#__PURE__*/React__default.createElement(\"div\", {\n    className: getClassName(['sendbird-message-input', disabled ? 'sendbird-message-input__disabled' : ''])\n  }, /*#__PURE__*/React__default.createElement(\"textarea\", {\n    className: \"sendbird-message-input--textarea\",\n    disabled: disabled,\n    ref: ref,\n    name: name,\n    value: inputValue,\n    maxLength: maxLength,\n    onChange: function onChange(e) {\n      setInputValue(e.target.value);\n      onStartTyping();\n    },\n    onKeyDown: function onKeyDown(e) {\n      if (e.keyCode === KeyCode.SHIFT) {\n        setIsShiftPressed(true);\n      }\n\n      if (!isShiftPressed && e.keyCode === KeyCode.ENTER) {\n        e.preventDefault();\n        sendMessage();\n      }\n    },\n    onKeyUp: function onKeyUp(e) {\n      if (e.keyCode === KeyCode.SHIFT) {\n        setIsShiftPressed(false);\n      }\n    }\n  }), !inputValue && /*#__PURE__*/React__default.createElement(Label, {\n    className: \"sendbird-message-input--placeholder\",\n    type: LabelTypography.BODY_1,\n    color: LabelColors.ONBACKGROUND_3\n  }, placeholder || stringSet.MESSAGE_INPUT__PLACE_HOLDER), !isEdit && inputValue && inputValue.trim().length > 0 && /*#__PURE__*/React__default.createElement(IconButton, {\n    className: \"sendbird-message-input--send\",\n    height: \"32px\",\n    width: \"32px\",\n    onClick: sendMessage\n  }, /*#__PURE__*/React__default.createElement(Icon, {\n    type: IconTypes.SEND,\n    fillColor: IconColors.PRIMARY,\n    width: \"20px\",\n    height: \"20px\"\n  })), !isEdit && (!inputValue || !(inputValue.trim().length > 0)) && /*#__PURE__*/React__default.createElement(IconButton, {\n    className: \"sendbird-message-input--attach\",\n    height: \"32px\",\n    width: \"32px\",\n    onClick: function onClick() {\n      // todo: clear previous input\n      fileInputRef.current.click();\n    }\n  }, /*#__PURE__*/React__default.createElement(Icon, {\n    type: IconTypes.ATTACH,\n    fillColor: IconColors.CONTENT_INVERSE,\n    width: \"20px\",\n    height: \"20px\"\n  }), /*#__PURE__*/React__default.createElement(\"input\", {\n    className: \"sendbird-message-input--attach-input\",\n    type: \"file\",\n    ref: fileInputRef,\n    onChange: handleUploadFile(onFileUpload)\n  }))), isEdit && /*#__PURE__*/React__default.createElement(\"div\", {\n    className: \"sendbird-message-input--edit-action\"\n  }, /*#__PURE__*/React__default.createElement(Button, {\n    className: \"sendbird-message-input--edit-action__cancel\",\n    type: ButtonTypes.SECONDARY,\n    size: ButtonSizes.SMALL,\n    onClick: onCancelEdit\n  }, stringSet.BUTTON__CANCEL), /*#__PURE__*/React__default.createElement(Button, {\n    className: \"sendbird-message-input--edit-action__save\",\n    type: ButtonTypes.PRIMARY,\n    size: ButtonSizes.SMALL,\n    onClick: function onClick() {\n      if (inputValue) {\n        var trimmedInputValue = inputValue.trim();\n        onSendMessage(name, trimmedInputValue, function () {\n          onCancelEdit();\n        });\n      }\n    }\n  }, stringSet.BUTTON__SAVE)));\n});\nMessageInput.propTypes = {\n  className: PropTypes.oneOfType([PropTypes.string, PropTypes.arrayOf(PropTypes.string)]),\n  placeholder: PropTypes.oneOfType([PropTypes.string, PropTypes.bool]),\n  isEdit: PropTypes.bool,\n  name: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n  value: PropTypes.string,\n  disabled: PropTypes.bool,\n  maxLength: PropTypes.number,\n  onFileUpload: PropTypes.func,\n  onSendMessage: PropTypes.func,\n  onStartTyping: PropTypes.func,\n  onCancelEdit: PropTypes.func,\n  channelUrl: PropTypes.string\n};\nMessageInput.defaultProps = {\n  className: '',\n  value: '',\n  channelUrl: '',\n  onSendMessage: noop,\n  name: 'sendbird-message-input',\n  isEdit: false,\n  disabled: false,\n  placeholder: '',\n  maxLength: 5000,\n  onFileUpload: noop,\n  onCancelEdit: noop,\n  onStartTyping: noop\n};\n\nvar FileViewerComponent = function FileViewerComponent(_ref) {\n  var profileUrl = _ref.profileUrl,\n      nickname = _ref.nickname,\n      name = _ref.name,\n      type = _ref.type,\n      url = _ref.url,\n      isByMe = _ref.isByMe,\n      onClose = _ref.onClose,\n      onDelete = _ref.onDelete,\n      disableDelete = _ref.disableDelete;\n  return /*#__PURE__*/React__default.createElement(\"div\", {\n    className: \"sendbird-fileviewer\"\n  }, /*#__PURE__*/React__default.createElement(\"div\", {\n    className: \"sendbird-fileviewer__header\"\n  }, /*#__PURE__*/React__default.createElement(\"div\", {\n    className: \"sendbird-fileviewer__header__left\"\n  }, /*#__PURE__*/React__default.createElement(\"div\", {\n    className: \"sendbird-fileviewer__header__left__avatar\"\n  }, /*#__PURE__*/React__default.createElement(Avatar, {\n    height: \"32px\",\n    width: \"32px\",\n    src: profileUrl\n  })), /*#__PURE__*/React__default.createElement(Label, {\n    className: \"sendbird-fileviewer__header__left__filename\",\n    type: LabelTypography.H_2,\n    color: LabelColors.ONBACKGROUND_1\n  }, name), /*#__PURE__*/React__default.createElement(Label, {\n    className: \"sendbird-fileviewer__header__left__sender-name\",\n    type: LabelTypography.BODY_1,\n    color: LabelColors.ONBACKGROUND_2\n  }, nickname)), /*#__PURE__*/React__default.createElement(\"div\", {\n    className: \"sendbird-fileviewer__header__right\"\n  }, isSupportedFileView(type) && /*#__PURE__*/React__default.createElement(\"div\", {\n    className: \"sendbird-fileviewer__header__right__actions\"\n  }, /*#__PURE__*/React__default.createElement(\"a\", {\n    className: \"sendbird-fileviewer__header__right__actions__download\",\n    rel: \"noopener noreferrer\",\n    href: url,\n    target: \"_blank\"\n  }, /*#__PURE__*/React__default.createElement(Icon, {\n    type: IconTypes.DOWNLOAD,\n    fillColor: IconColors.ON_BACKGROUND_1,\n    height: \"24px\",\n    width: \"24px\"\n  })), onDelete && isByMe && /*#__PURE__*/React__default.createElement(\"div\", {\n    className: \"sendbird-fileviewer__header__right__actions__delete\"\n  }, /*#__PURE__*/React__default.createElement(Icon, {\n    className: disableDelete ? 'disabled' : '',\n    type: IconTypes.DELETE,\n    fillColor: disableDelete ? IconColors.GRAY : IconColors.ON_BACKGROUND_1,\n    height: \"24px\",\n    width: \"24px\",\n    onClick: function onClick() {\n      if (!disableDelete) {\n        onDelete();\n      }\n    }\n  }))), /*#__PURE__*/React__default.createElement(\"div\", {\n    className: \"sendbird-fileviewer__header__right__actions__close\"\n  }, /*#__PURE__*/React__default.createElement(Icon, {\n    type: IconTypes.CLOSE,\n    fillColor: IconColors.ON_BACKGROUND_1,\n    height: \"24px\",\n    width: \"24px\",\n    onClick: onClose\n  })))), /*#__PURE__*/React__default.createElement(\"div\", {\n    className: \"sendbird-fileviewer__content\"\n  }, isVideo(type) &&\n  /*#__PURE__*/\n  // eslint-disable-next-line jsx-a11y/media-has-caption\n  React__default.createElement(\"video\", {\n    controls: true,\n    className: \"sendbird-fileviewer__content__video\"\n  }, /*#__PURE__*/React__default.createElement(\"source\", {\n    src: url,\n    type: type\n  })), isImage(type) && /*#__PURE__*/React__default.createElement(\"img\", {\n    src: url,\n    alt: name,\n    className: \"sendbird-fileviewer__content__img\"\n  }), !isSupportedFileView(type) && /*#__PURE__*/React__default.createElement(\"div\", {\n    className: \"sendbird-fileviewer__content__unsupported\"\n  }, /*#__PURE__*/React__default.createElement(Label, {\n    type: LabelTypography.H_1,\n    color: LabelColors.ONBACKGROUND_1\n  }, \"Unsupoprted message\"))));\n};\n\nFileViewerComponent.propTypes = {\n  profileUrl: PropTypes.string.isRequired,\n  nickname: PropTypes.string.isRequired,\n  type: PropTypes.string.isRequired,\n  url: PropTypes.string.isRequired,\n  name: PropTypes.string.isRequired,\n  onClose: PropTypes.func.isRequired,\n  onDelete: PropTypes.func.isRequired,\n  isByMe: PropTypes.bool,\n  disableDelete: PropTypes.bool\n};\nFileViewerComponent.defaultProps = {\n  isByMe: true,\n  disableDelete: false\n};\n\nfunction FileViewer(props) {\n  var message = props.message,\n      isByMe = props.isByMe,\n      onClose = props.onClose,\n      onDelete = props.onDelete;\n  var sender = message.sender,\n      type = message.type,\n      url = message.url,\n      _message$name = message.name,\n      name = _message$name === void 0 ? '' : _message$name,\n      _message$threadInfo = message.threadInfo,\n      threadInfo = _message$threadInfo === void 0 ? {} : _message$threadInfo;\n  var disableDelete = (threadInfo === null || threadInfo === void 0 ? void 0 : threadInfo.replyCount) > 0;\n  var profileUrl = sender.profileUrl,\n      _sender$nickname = sender.nickname,\n      nickname = _sender$nickname === void 0 ? '' : _sender$nickname;\n  return /*#__PURE__*/createPortal( /*#__PURE__*/React__default.createElement(FileViewerComponent, {\n    profileUrl: profileUrl,\n    nickname: nickname,\n    type: type,\n    url: url,\n    name: name,\n    onClose: onClose,\n    onDelete: onDelete,\n    isByMe: isByMe,\n    disableDelete: disableDelete\n  }), document.getElementById(MODAL_ROOT));\n}\n\nFileViewer.propTypes = {\n  message: PropTypes.shape({\n    sender: PropTypes.shape({\n      profileUrl: PropTypes.string,\n      nickname: PropTypes.string\n    }),\n    type: PropTypes.string,\n    url: PropTypes.string,\n    name: PropTypes.string\n  }).isRequired,\n  isByMe: PropTypes.bool,\n  onClose: PropTypes.func.isRequired,\n  onDelete: PropTypes.func.isRequired\n};\nFileViewer.defaultProps = {\n  isByMe: true\n};\nexport { DateSeparator as D, FileViewer as F, LinkLabel as L, MessageInput as M, compareIds as c };","map":{"version":3,"sources":["../src/utils/compareIds.js","../src/ui/LinkLabel/index.jsx","../src/ui/DateSeparator/index.jsx","../src/ui/MessageInput/index.jsx","../src/ui/FileViewer/index.jsx"],"names":["isEmpty","val","aString","a","bString","b","http","className","src","type","color","children","url","Array","changeColorToClassName","LinkLabel","PropTypes","Object","isRequired","separatorColor","DateSeparator","string","LabelTypography","LabelColors","ONBACKGROUND_2","Colors","ONBACKGROUND_4","LINE_HEIGHT","noop","KeyCode","SHIFT","ENTER","handleUploadFile","event","callback","MessageInput","isEdit","disabled","value","name","placeholder","maxLength","onFileUpload","onSendMessage","onCancelEdit","onStartTyping","channelUrl","props","stringSet","useContext","fileInputRef","useRef","inputValue","setInputValue","useState","isShiftPressed","setIsShiftPressed","setHeight","elem","ref","MAX_HEIGHT","window","useEffect","sendMessage","trimmedInputValue","getClassName","e","ONBACKGROUND_3","IconTypes","IconColors","ButtonTypes","ButtonSizes","FileViewerComponent","profileUrl","nickname","isByMe","onClose","onDelete","disableDelete","ONBACKGROUND_1","isSupportedFileView","isImage","bool","message","sender","threadInfo","createPortal","document","FileViewer"],"mappings":"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","sourcesContent":["const isEmpty = (val) => (val === null || val === undefined);\n\n// Some Ids return string and number inconsistently\n// only use to comapre IDs\nexport default function (a, b) {\n  if (isEmpty(a) || isEmpty(b)) {\n    return false;\n  }\n  const aString = a.toString();\n  const bString = b.toString();\n  return aString === bString;\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport Label, { LabelTypography, LabelColors } from '../Label';\nimport { changeColorToClassName } from '../Label/utils';\nimport './index.scss';\n\nconst http = /https?:\\/\\//;\n\nexport default function LinkLabel({\n  className,\n  src,\n  type,\n  color,\n  children,\n}) {\n  const url = (http.test(src)) ? src : `http://${src}`;\n\n  return (\n    <a\n      className={[\n        ...(Array.isArray(className) ? className : [className]),\n        'sendbird-link-label',\n        color ? changeColorToClassName(color) : '',\n      ].join(' ')}\n      href={url}\n      target=\"_blank\"\n      rel=\"noopener noreferrer\"\n    >\n      <Label\n        className=\"sendbird-link-label__label\"\n        type={type}\n        color={color}\n      >\n        {children}\n      </Label>\n    </a>\n  );\n}\n\nLinkLabel.propTypes = {\n  className: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.arrayOf(PropTypes.string),\n  ]),\n  src: PropTypes.string.isRequired,\n  type: PropTypes.oneOf(Object.keys(LabelTypography)).isRequired,\n  color: PropTypes.oneOf(Object.keys(LabelColors)).isRequired,\n  children: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.element,\n    PropTypes.arrayOf(PropTypes.string),\n    PropTypes.arrayOf(PropTypes.element),\n  ]).isRequired,\n};\n\nLinkLabel.defaultProps = {\n  className: '',\n};\n\nexport const LinkLabelTypography = LabelTypography;\nexport const LinkLabelColors = LabelColors;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport './index.scss';\nimport { changeColorToClassName, Colors } from '../../utils/color';\nimport Label, { LabelTypography, LabelColors } from '../Label';\n\nexport default function DateSeparator({\n  className,\n  children,\n  separatorColor,\n}) {\n  return (\n    <div\n      className={[\n        ...(Array.isArray(className) ? className : [className]),\n        'sendbird-separator',\n      ].join(' ')}\n    >\n      <div className={['sendbird-separator__left', `${changeColorToClassName(separatorColor)}--background-color`].join(' ')} />\n      <div className=\"sendbird-separator__text\">{children}</div>\n      <div className={['sendbird-separator__right', `${changeColorToClassName(separatorColor)}--background-color`].join(' ')} />\n    </div>\n  );\n}\n\nDateSeparator.propTypes = {\n  className: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.arrayOf(PropTypes.string),\n  ]),\n  children: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.arrayOf(PropTypes.string),\n    PropTypes.element,\n  ]),\n  separatorColor: PropTypes.string,\n};\n\nDateSeparator.defaultProps = {\n  className: '',\n  children: (\n    <Label type={LabelTypography.CAPTION_2} color={LabelColors.ONBACKGROUND_2}>\n      Date Separator\n    </Label>\n  ),\n  separatorColor: Colors.ONBACKGROUND_4,\n};\n","import React, {\n  useState,\n  useRef,\n  useEffect,\n  useContext,\n} from 'react';\nimport PropTypes from 'prop-types';\n\nimport './index.scss';\n\nimport IconButton from '../IconButton';\nimport Button, { ButtonTypes, ButtonSizes } from '../Button';\n\nimport Icon, { IconTypes, IconColors } from '../Icon';\nimport Label, { LabelTypography, LabelColors } from '../Label';\nimport { LocalizationContext } from '../../lib/LocalizationContext';\nimport { getClassName } from '../../utils';\n\nconst LINE_HEIGHT = 76;\nconst noop = () => { };\nconst KeyCode = {\n  SHIFT: 16,\n  ENTER: 13,\n};\n\nconst handleUploadFile = (callback) => (event) => {\n  if (event.target.files && event.target.files[0]) {\n    callback(event.target.files[0]);\n  }\n  // eslint-disable-next-line no-param-reassign\n  event.target.value = '';\n};\n\nconst MessageInput = React.forwardRef((props, ref) => {\n  const {\n    className,\n    isEdit,\n    disabled,\n    value,\n    name,\n    placeholder,\n    maxLength,\n    onFileUpload,\n    onSendMessage,\n    onCancelEdit,\n    onStartTyping,\n    channelUrl,\n  } = props;\n\n  const { stringSet } = useContext(LocalizationContext);\n  const fileInputRef = useRef(null);\n  const [inputValue, setInputValue] = useState(value);\n  const [isShiftPressed, setIsShiftPressed] = useState(false);\n\n  const setHeight = () => {\n    try {\n      const elem = ref.current;\n      const MAX_HEIGHT = window.document.body.offsetHeight * 0.6;\n      if (elem && elem.scrollHeight >= LINE_HEIGHT) {\n        if (MAX_HEIGHT < elem.scrollHeight) {\n          elem.style.height = 'auto';\n          elem.style.height = `${MAX_HEIGHT}px`;\n        } else {\n          elem.style.height = 'auto';\n          elem.style.height = `${elem.scrollHeight}px`;\n        }\n      } else {\n        elem.style.height = '';\n      }\n    } catch (error) {\n      // error\n    }\n  };\n\n  // after setHeight called twice, the textarea goes to the initialized\n  useEffect(() => {\n    setHeight();\n    return setHeight;\n  }, [inputValue]);\n  // clear input value when channel changes\n  useEffect(() => {\n    setInputValue('');\n  }, [channelUrl]);\n\n  const sendMessage = () => {\n    if (inputValue && inputValue.trim().length > 0) {\n      const trimmedInputValue = inputValue.trim();\n      if (isEdit) {\n        // useUpdateMessageCallback\n        onSendMessage(name, trimmedInputValue, () => {\n          onCancelEdit();\n        });\n      } else {\n        // useSendMessageCallback\n        onSendMessage();\n        setInputValue('');\n      }\n    }\n  };\n\n  return (\n    <form\n      className={getClassName([\n        className,\n        isEdit ? 'sendbird-message-input__edit' : '',\n        disabled ? 'sendbird-message-input-form__disabled' : '',\n      ])}\n    >\n      <div\n        className={getClassName([\n          'sendbird-message-input',\n          disabled ? 'sendbird-message-input__disabled' : '',\n        ])}\n      >\n        <textarea\n          className=\"sendbird-message-input--textarea\"\n          disabled={disabled}\n          ref={ref}\n          name={name}\n          value={inputValue}\n          maxLength={maxLength}\n          onChange={(e) => {\n            setInputValue(e.target.value);\n            onStartTyping();\n          }}\n          onKeyDown={(e) => {\n            if (e.keyCode === KeyCode.SHIFT) {\n              setIsShiftPressed(true);\n            }\n            if (!isShiftPressed && e.keyCode === KeyCode.ENTER) {\n              e.preventDefault();\n              sendMessage();\n            }\n          }}\n          onKeyUp={(e) => {\n            if (e.keyCode === KeyCode.SHIFT) {\n              setIsShiftPressed(false);\n            }\n          }}\n        />\n        {/* placeholder */}\n        {!inputValue && (\n          <Label\n            className=\"sendbird-message-input--placeholder\"\n            type={LabelTypography.BODY_1}\n            color={LabelColors.ONBACKGROUND_3}\n          >\n            {placeholder || stringSet.MESSAGE_INPUT__PLACE_HOLDER}\n          </Label>\n        )}\n        {/* send icon */}\n        {\n          (!isEdit && inputValue && inputValue.trim().length > 0) && (\n            <IconButton\n              className=\"sendbird-message-input--send\"\n              height=\"32px\"\n              width=\"32px\"\n              onClick={sendMessage}\n            >\n              <Icon type={IconTypes.SEND} fillColor={IconColors.PRIMARY} width=\"20px\" height=\"20px\" />\n            </IconButton>\n          )\n        }\n        {/* upload icon */}\n        {\n          (!isEdit && (!inputValue || !(inputValue.trim().length > 0))) && (\n            <IconButton\n              className=\"sendbird-message-input--attach\"\n              height=\"32px\"\n              width=\"32px\"\n              onClick={() => {\n                // todo: clear previous input\n                fileInputRef.current.click();\n              }}\n            >\n              <Icon\n                type={IconTypes.ATTACH}\n                fillColor={IconColors.CONTENT_INVERSE}\n                width=\"20px\"\n                height=\"20px\"\n              />\n              <input\n                className=\"sendbird-message-input--attach-input\"\n                type=\"file\"\n                ref={fileInputRef}\n                onChange={handleUploadFile(onFileUpload)}\n              />\n            </IconButton>\n          )\n        }\n      </div>\n      {/* Edit */}\n      {\n        isEdit && (\n          <div className=\"sendbird-message-input--edit-action\">\n            <Button\n              className=\"sendbird-message-input--edit-action__cancel\"\n              type={ButtonTypes.SECONDARY}\n              size={ButtonSizes.SMALL}\n              onClick={onCancelEdit}\n            >\n              {stringSet.BUTTON__CANCEL}\n            </Button>\n            <Button\n              className=\"sendbird-message-input--edit-action__save\"\n              type={ButtonTypes.PRIMARY}\n              size={ButtonSizes.SMALL}\n              onClick={() => {\n                if (inputValue) {\n                  const trimmedInputValue = inputValue.trim();\n                  onSendMessage(name, trimmedInputValue, () => {\n                    onCancelEdit();\n                  });\n                }\n              }}\n            >\n              {stringSet.BUTTON__SAVE}\n            </Button>\n          </div>\n        )\n      }\n    </form>\n  );\n});\n\nMessageInput.propTypes = {\n  className: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.arrayOf(PropTypes.string),\n  ]),\n  placeholder: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.bool,\n  ]),\n  isEdit: PropTypes.bool,\n  name: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.number,\n  ]),\n  value: PropTypes.string,\n  disabled: PropTypes.bool,\n  maxLength: PropTypes.number,\n  onFileUpload: PropTypes.func,\n  onSendMessage: PropTypes.func,\n  onStartTyping: PropTypes.func,\n  onCancelEdit: PropTypes.func,\n  channelUrl: PropTypes.string,\n};\n\nMessageInput.defaultProps = {\n  className: '',\n  value: '',\n  channelUrl: '',\n  onSendMessage: noop,\n  name: 'sendbird-message-input',\n  isEdit: false,\n  disabled: false,\n  placeholder: '',\n  maxLength: 5000,\n  onFileUpload: noop,\n  onCancelEdit: noop,\n  onStartTyping: noop,\n};\n\nexport default MessageInput;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { createPortal } from 'react-dom';\n\nimport './index.scss';\nimport Avatar from '../Avatar/index';\nimport Label, { LabelTypography, LabelColors } from '../Label';\nimport Icon, { IconColors, IconTypes } from '../Icon';\nimport { MODAL_ROOT } from '../../hooks/useModal/ModalRoot';\n\nimport { isImage, isVideo, isSupportedFileView } from '../../utils';\n\nexport const FileViewerComponent = ({\n  // sender\n  profileUrl,\n  nickname,\n  // file\n  name,\n  type,\n  url,\n  // others\n  isByMe,\n  onClose,\n  onDelete,\n  disableDelete,\n}) => (\n  <div className=\"sendbird-fileviewer\">\n    <div className=\"sendbird-fileviewer__header\">\n      <div className=\"sendbird-fileviewer__header__left\">\n        <div className=\"sendbird-fileviewer__header__left__avatar\">\n          <Avatar height=\"32px\" width=\"32px\" src={profileUrl} />\n        </div>\n        <Label\n          className=\"sendbird-fileviewer__header__left__filename\"\n          type={LabelTypography.H_2}\n          color={LabelColors.ONBACKGROUND_1}\n        >\n          {name}\n        </Label>\n        <Label\n          className=\"sendbird-fileviewer__header__left__sender-name\"\n          type={LabelTypography.BODY_1}\n          color={LabelColors.ONBACKGROUND_2}\n        >\n          {nickname}\n        </Label>\n      </div>\n      <div className=\"sendbird-fileviewer__header__right\">\n        {\n          isSupportedFileView(type) && (\n            <div className=\"sendbird-fileviewer__header__right__actions\">\n              <a\n                className=\"sendbird-fileviewer__header__right__actions__download\"\n                rel=\"noopener noreferrer\"\n                href={url}\n                target=\"_blank\"\n              >\n                <Icon\n                  type={IconTypes.DOWNLOAD}\n                  fillColor={IconColors.ON_BACKGROUND_1}\n                  height=\"24px\"\n                  width=\"24px\"\n                />\n              </a>\n              {\n                onDelete && isByMe && (\n                  <div className=\"sendbird-fileviewer__header__right__actions__delete\">\n                    <Icon\n                      className={disableDelete ? 'disabled' : ''}\n                      type={IconTypes.DELETE}\n                      fillColor={disableDelete ? IconColors.GRAY : IconColors.ON_BACKGROUND_1}\n                      height=\"24px\"\n                      width=\"24px\"\n                      onClick={() => { if (!disableDelete) { onDelete(); } }}\n                    />\n                  </div>\n                )\n              }\n            </div>\n          )\n        }\n        <div className=\"sendbird-fileviewer__header__right__actions__close\">\n          <Icon\n            type={IconTypes.CLOSE}\n            fillColor={IconColors.ON_BACKGROUND_1}\n            height=\"24px\"\n            width=\"24px\"\n            onClick={onClose}\n          />\n        </div>\n      </div>\n    </div>\n    <div className=\"sendbird-fileviewer__content\">\n      {isVideo(type) && (\n        // eslint-disable-next-line jsx-a11y/media-has-caption\n        <video controls className=\"sendbird-fileviewer__content__video\">\n          <source src={url} type={type} />\n        </video>\n      )}\n      {\n        isImage(type) && (\n          <img\n            src={url}\n            alt={name}\n            className=\"sendbird-fileviewer__content__img\"\n          />\n        )\n      }\n      {\n        !isSupportedFileView(type) && (\n          <div className=\"sendbird-fileviewer__content__unsupported\">\n            <Label type={LabelTypography.H_1} color={LabelColors.ONBACKGROUND_1}>\n              Unsupoprted message\n            </Label>\n          </div>\n        )\n      }\n    </div>\n  </div>\n);\n\nFileViewerComponent.propTypes = {\n  profileUrl: PropTypes.string.isRequired,\n  nickname: PropTypes.string.isRequired,\n  type: PropTypes.string.isRequired,\n  url: PropTypes.string.isRequired,\n  name: PropTypes.string.isRequired,\n  onClose: PropTypes.func.isRequired,\n  onDelete: PropTypes.func.isRequired,\n  isByMe: PropTypes.bool,\n  disableDelete: PropTypes.bool,\n};\n\nFileViewerComponent.defaultProps = {\n  isByMe: true,\n  disableDelete: false,\n};\n\nexport default function FileViewer(props) {\n  const {\n    message,\n    isByMe,\n    onClose,\n    onDelete,\n  } = props;\n  const {\n    sender,\n    type,\n    url,\n    name = '',\n    threadInfo = {},\n  } = message;\n  const disableDelete = threadInfo?.replyCount > 0;\n  const { profileUrl, nickname = '' } = sender;\n  return createPortal(\n    (\n      <FileViewerComponent\n        profileUrl={profileUrl}\n        nickname={nickname}\n        type={type}\n        url={url}\n        name={name}\n        onClose={onClose}\n        onDelete={onDelete}\n        isByMe={isByMe}\n        disableDelete={disableDelete}\n      />\n    ),\n    document.getElementById(MODAL_ROOT),\n  );\n}\n\nFileViewer.propTypes = {\n  message: PropTypes.shape({\n    sender: PropTypes.shape({\n      profileUrl: PropTypes.string,\n      nickname: PropTypes.string,\n    }),\n    type: PropTypes.string,\n    url: PropTypes.string,\n    name: PropTypes.string,\n  }).isRequired,\n  isByMe: PropTypes.bool,\n  onClose: PropTypes.func.isRequired,\n  onDelete: PropTypes.func.isRequired,\n};\n\nFileViewer.defaultProps = {\n  isByMe: true,\n};\n"]},"metadata":{},"sourceType":"module"}